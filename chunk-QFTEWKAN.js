import{a as ye}from"./chunk-GBBNV7LZ.js";import{a as P}from"./chunk-DS5JRME6.js";import{a as xe}from"./chunk-UAMZTM3J.js";import{a as Se}from"./chunk-IBCVUEYR.js";import"./chunk-JMDA2KYA.js";import"./chunk-FP7EL6KI.js";import{a as Pe}from"./chunk-4BTXT65B.js";import{a as k}from"./chunk-Y7V3HG6R.js";import{a as Ce}from"./chunk-QHILUX33.js";import{a as Me}from"./chunk-RB2IKARN.js";import"./chunk-7UZYWCAJ.js";import"./chunk-MLMGL4QO.js";import{a as Oe}from"./chunk-TXE4BVN3.js";import{a as te,b as ne,c as C,d as ie,e as oe,f as ae,g as ce,h as re,j as se,k as de,l as le,m as me,n as pe,o as ge,p as fe,q as ve,r as ue,t as he,u as _e,v as be}from"./chunk-VLP6GBL3.js";import{b as X,c as Z,e as ee}from"./chunk-3YJIJH2N.js";import{A as v,Aa as I,B as u,Ba as E,Ca as F,Ea as D,Fa as q,Ia as V,Ka as N,Oa as W,P as s,Sa as J,Ta as Y,U as O,V as z,Xa as G,Z as h,_a as H,ba as l,ca as i,da as n,ea as y,gb as U,ib as Q,jb as $,ka as x,la as g,ma as m,mb as K,va as c,wa as _,xa as b,ya as L,za as j}from"./chunk-T4RMSDZY.js";var A=()=>({standalone:!0}),Ie=r=>["/vaccinator/patients",r];function Ee(r,o){r&1&&(i(0,"div",16)(1,"span",17),c(2,"\u26A0\uFE0F"),n(),i(3,"span"),c(4,"You are currently offline. Changes will be synced when connection is restored."),n()())}function Fe(r,o){if(r&1){let e=x();i(0,"app-alert",18),g("dismiss",function(){v(e);let a=m();return u(a.errorMessage="")}),n()}if(r&2){let e=m();l("message",e.errorMessage)("show",!!e.errorMessage)}}function De(r,o){if(r&1&&(i(0,"tr")(1,"td")(2,"strong"),c(3),n()(),i(4,"td"),c(5),n(),i(6,"td")(7,"span",24),c(8),n()(),i(9,"td"),c(10),n(),i(11,"td"),c(12),V(13,"date"),n(),i(14,"td")(15,"span",25),c(16),n()(),i(17,"td")(18,"button",26),c(19," View Patient "),n()()()),r&2){let e=o.$implicit;s(3),_(e.patientName||"N/A"),s(2),_(e.vaccineName||"N/A"),s(3),b("Dose ",e.doseNumber),s(2),_(e.batchNumber||"N/A"),s(2),_(N(13,7,e.administeredDate||e.date,"dd MMM yyyy")),s(4),_(e.administrationSite||e.site||"N/A"),s(2),l("routerLink",q(10,Ie,e.patientId))}}function Ve(r,o){if(r&1){let e=x();i(0,"tr")(1,"td",27)(2,"div",28)(3,"span",29),c(4,"\u{1F489}"),n(),i(5,"p"),c(6,"No vaccinations found"),n(),i(7,"button",6),g("click",function(){v(e);let a=m(2);return u(a.openRecordModal())}),c(8,"Record First Vaccination"),n()()()()}}function Ne(r,o){if(r&1&&(i(0,"div",19)(1,"div",20)(2,"h3"),c(3),n()(),i(4,"div",21)(5,"table",22)(6,"thead")(7,"tr")(8,"th"),c(9,"Patient"),n(),i(10,"th"),c(11,"Vaccine"),n(),i(12,"th"),c(13,"Dose"),n(),i(14,"th"),c(15,"Batch"),n(),i(16,"th"),c(17,"Date"),n(),i(18,"th"),c(19,"Site"),n(),i(20,"th"),c(21,"Actions"),n()()(),i(22,"tbody"),h(23,De,20,12,"tr",23)(24,Ve,9,0,"tr",15),n()()()()),r&2){let e=m();s(3),b("Vaccination Records (",e.filteredVaccinations.length,")"),s(20),l("ngForOf",e.filteredVaccinations),s(),l("ngIf",e.filteredVaccinations.length===0&&!e.isLoadingData)}}function Te(r,o){if(r&1){let e=x();i(0,"div",66),g("click",function(){let a=v(e).$implicit,d=m(3);return u(d.selectPatient(a))}),c(1),n()}if(r&2){let e=o.$implicit;s(),L(" ",e.fullName||e.firstName+" "+e.lastName," - ",e.age||"N/A"," months ")}}function ke(r,o){if(r&1&&(i(0,"div",64),h(1,Te,2,2,"div",65),n()),r&2){let e=m(2);s(),l("ngForOf",e.patientSearchResults)}}function Ae(r,o){if(r&1&&(i(0,"div",67),c(1," Selected: "),i(2,"strong"),c(3),n()()),r&2){let e=m(2);s(3),_(e.selectedPatient.fullName||e.selectedPatient.firstName+" "+e.selectedPatient.lastName)}}function Re(r,o){if(r&1&&(i(0,"span",68),c(1),n()),r&2){let e=m(2);s(),b(" ",e.getFieldError("patientId")," ")}}function Le(r,o){if(r&1&&(i(0,"option",69),c(1),n()),r&2){let e=o.$implicit;l("value",e.id),s(),b(" ",e.name," ")}}function Be(r,o){if(r&1&&(i(0,"span",68),c(1),n()),r&2){let e=m(2);s(),b(" ",e.getFieldError("vaccineId")," ")}}function ze(r,o){if(r&1&&(i(0,"small",70),c(1),n()),r&2){let e=m(2);s(),b(" Suggested: Dose ",e.suggestedDose," (based on patient history) ")}}function je(r,o){if(r&1&&(i(0,"span",68),c(1),n()),r&2){let e=m(2);s(),b(" ",e.getFieldError("doseNumber")," ")}}function qe(r,o){if(r&1&&(i(0,"option",69),c(1),V(2,"date"),n()),r&2){let e=o.$implicit;l("value",e.batchNumber),s(),j(" ",e.batchNumber," (",e.quantity," doses, expires ",N(2,4,e.expiryDate,"shortDate"),") ")}}function We(r,o){if(r&1&&(i(0,"span",68),c(1),n()),r&2){let e=m(2);s(),b(" ",e.getFieldError("batchNumber")," ")}}function Je(r,o){r&1&&(i(0,"small",70),c(1," No batches available for this vaccine. Please receive stock first. "),n())}function Ye(r,o){if(r&1&&(i(0,"span",68),c(1),n()),r&2){let e=m(2);s(),b(" ",e.getFieldError("administeredDate")," ")}}function Ge(r,o){if(r&1&&(i(0,"span",68),c(1),n()),r&2){let e=m(2);s(),b(" ",e.getFieldError("administrationSite")," ")}}function He(r,o){r&1&&(i(0,"span",68),c(1," Severity is required "),n())}function Ue(r,o){r&1&&(i(0,"span",68),c(1," Description is required "),n())}function Qe(r,o){if(r&1&&(i(0,"div",71)(1,"div",35)(2,"label",36),c(3,"Severity"),n(),i(4,"select",72)(5,"option",43),c(6,"Select Severity"),n(),i(7,"option",73),c(8,"Mild"),n(),i(9,"option",74),c(10,"Moderate"),n(),i(11,"option",75),c(12,"Severe"),n()(),h(13,He,2,0,"span",40),n(),i(14,"div",35)(15,"label",36),c(16,"Description"),n(),i(17,"textarea",76),c(18,"              "),n(),h(19,Ue,2,0,"span",40),n(),i(20,"div",35)(21,"label"),c(22,"Action Taken"),n(),i(23,"textarea",77),c(24,"              "),n()()()),r&2){let e,t,a=m(2);s(4),l("required",a.showAdverseEventForm),s(9),l("ngIf",((e=a.adverseEventForm.get("severity"))==null?null:e.invalid)&&((e=a.adverseEventForm.get("severity"))==null?null:e.touched)),s(4),l("required",a.showAdverseEventForm),s(2),l("ngIf",((t=a.adverseEventForm.get("description"))==null?null:t.invalid)&&((t=a.adverseEventForm.get("description"))==null?null:t.touched))}}function $e(r,o){if(r&1){let e=x();i(0,"div",30),g("click",function(){v(e);let a=m();return u(a.closeRecordModal())}),i(1,"div",31),g("click",function(a){return v(e),u(a.stopPropagation())}),i(2,"div",32)(3,"h2"),c(4,"\u{1F489} Record Vaccination"),n(),i(5,"button",33),g("click",function(){v(e);let a=m();return u(a.closeRecordModal())}),c(6,"\xD7"),n()(),i(7,"form",34),g("ngSubmit",function(){v(e);let a=m();return u(a.onSubmit())}),i(8,"div",35)(9,"label",36),c(10,"Patient"),n(),i(11,"input",37),F("ngModelChange",function(a){v(e);let d=m();return E(d.patientSearchQuery,a)||(d.patientSearchQuery=a),u(a)}),g("input",function(){v(e);let a=m();return u(a.searchPatients())}),n(),h(12,ke,2,1,"div",38)(13,Ae,4,1,"div",39)(14,Re,2,1,"span",40),n(),i(15,"div",41)(16,"div",35)(17,"label",36),c(18,"Vaccine"),n(),i(19,"select",42),g("change",function(){v(e);let a=m();return u(a.onVaccineChange())}),i(20,"option",43),c(21,"Select Vaccine"),n(),h(22,Le,2,2,"option",44),n(),h(23,Be,2,1,"span",40),n(),i(24,"div",35)(25,"label",36),c(26,"Dose Number"),n(),y(27,"input",45),h(28,ze,2,1,"small",46)(29,je,2,1,"span",40),n()(),i(30,"div",41)(31,"div",35)(32,"label",36),c(33,"Batch Number"),n(),i(34,"select",47),g("change",function(){v(e);let a=m();return u(a.onBatchChange())}),i(35,"option",43),c(36),n(),h(37,qe,3,7,"option",44),n(),h(38,We,2,1,"span",40)(39,Je,2,0,"small",46),n(),i(40,"div",35)(41,"label",36),c(42,"Administered Date"),n(),y(43,"input",48),h(44,Ye,2,1,"span",40),n()(),i(45,"div",35)(46,"label",36),c(47,"Administration Site"),n(),i(48,"select",49),g("change",function(){v(e);let a=m();return u(a.onAdministrationSiteChange())}),i(49,"option",50),c(50,"Left Arm"),n(),i(51,"option",51),c(52,"Right Arm"),n(),i(53,"option",52),c(54,"Left Thigh"),n(),i(55,"option",53),c(56,"Right Thigh"),n()(),h(57,Ge,2,1,"span",40),n(),i(58,"div",54)(59,"div",55)(60,"label",56)(61,"input",57),F("ngModelChange",function(a){v(e);let d=m();return E(d.showAdverseEventForm,a)||(d.showAdverseEventForm=a),u(a)}),g("change",function(){v(e);let a=m();return u(a.toggleAdverseEventForm())}),n(),i(62,"span",58),c(63,"\u26A0\uFE0F Report Adverse Event"),n()()()(),h(64,Qe,25,4,"div",59),i(65,"div",35)(66,"label"),c(67,"Additional Notes (Optional)"),n(),y(68,"textarea",60),n(),i(69,"div",61)(70,"button",62),g("click",function(){v(e);let a=m();return u(a.closeRecordModal())}),c(71,"Cancel"),n(),i(72,"button",63),c(73),n()()()()()}if(r&2){let e,t=m();s(7),l("formGroup",t.vaccinationForm),s(4),I("ngModel",t.patientSearchQuery),l("ngModelOptions",D(24,A)),s(),l("ngIf",t.patientSearchResults.length>0),s(),l("ngIf",t.selectedPatient),s(),l("ngIf",t.isFieldInvalid("patientId")),s(8),l("ngForOf",t.availableVaccines),s(),l("ngIf",t.isFieldInvalid("vaccineId")),s(4),l("max",t.getMaxDoseForVaccine())("placeholder","Suggested: "+t.suggestedDose),s(),l("ngIf",t.suggestedDose>0),s(),l("ngIf",t.isFieldInvalid("doseNumber")),s(7),_(t.getBatchPlaceholderText()),s(),l("ngForOf",t.availableBatches),s(),l("ngIf",t.isFieldInvalid("batchNumber")),s(),l("ngIf",t.availableBatches.length===0&&!t.loadingBatches&&((e=t.vaccinationForm.get("vaccineId"))==null?null:e.value)),s(4),l("value",t.getTodayDate()),s(),l("ngIf",t.isFieldInvalid("administeredDate")),s(13),l("ngIf",t.isFieldInvalid("administrationSite")),s(4),I("ngModel",t.showAdverseEventForm),l("ngModelOptions",D(25,A)),s(3),l("ngIf",t.showAdverseEventForm),s(8),l("disabled",t.loading||t.vaccinationForm.invalid),s(),b(" ",t.loading?"Recording...":"Record Vaccination"," ")}}function Ke(r,o){if(r&1){let e=x();i(0,"div",30),g("click",function(){v(e);let a=m();return u(a.showStockWarning=!1)}),i(1,"div",78),g("click",function(a){return v(e),u(a.stopPropagation())}),i(2,"div",79),c(3,"\u26A0\uFE0F"),n(),i(4,"h3"),c(5,"Low Stock Warning"),n(),i(6,"p"),c(7),n(),i(8,"p"),c(9,"Contact facility manager for resupply."),n(),i(10,"div",80)(11,"button",81),g("click",function(){v(e);let a=m();return u(a.showStockWarning=!1)}),c(12,"Cancel Vaccination"),n(),i(13,"button",6),g("click",function(){v(e);let a=m();return u(a.confirmStockWarning())}),c(14,"Understood"),n()()()()}if(r&2){let e=m();s(7),_(e.stockWarningMessage)}}function Xe(r,o){if(r&1&&(i(0,"div",95)(1,"div",96),c(2,"\u{1F4E6}"),n(),i(3,"div",97)(4,"div",98),c(5,"Batch Number"),n(),i(6,"div",99),c(7),n()()()),r&2){let e=m(3);s(7),_(e.vaccinationForm.value.batchNumber)}}function Ze(r,o){if(r&1&&(i(0,"div",94)(1,"div",95)(2,"div",96),c(3,"\u{1F464}"),n(),i(4,"div",97)(5,"div",98),c(6,"Patient"),n(),i(7,"div",99),c(8),n()()(),i(9,"div",95)(10,"div",96),c(11,"\u{1F489}"),n(),i(12,"div",97)(13,"div",98),c(14,"Vaccine"),n(),i(15,"div",99),c(16),n()()(),i(17,"div",95)(18,"div",96),c(19,"\u{1F4C5}"),n(),i(20,"div",97)(21,"div",98),c(22,"Date Administered"),n(),i(23,"div",99),c(24),V(25,"date"),n()()(),h(26,Xe,8,1,"div",100),n()),r&2){let e=m(2);s(8),_(e.getPatientDisplayName()),s(8),L("",e.getVaccineName()," (Dose ",e.vaccinationForm.value.doseNumber,")"),s(8),_(N(25,5,e.vaccinationForm.value.administeredDate||e.vaccinationForm.value.administrationDate,"dd MMM yyyy")),s(2),l("ngIf",e.vaccinationForm.value.batchNumber)}}function et(r,o){if(r&1&&(i(0,"div",101)(1,"div",102)(2,"div",103),c(3,"\u{1F4C5}"),n(),i(4,"div",104)(5,"div",105),c(6,"Next Appointment Auto-Scheduled"),n(),i(7,"div",106),c(8),V(9,"date"),n(),i(10,"div",107)(11,"strong"),c(12),n(),c(13),y(14,"br"),c(15,"SMS reminder will be sent 3 days before "),n()()()()),r&2){let e=m(2);s(8),_(N(9,3,e.nextAppointmentDate,"dd MMM yyyy")),s(4),_(e.getVaccineName()),s(),b(" Dose ",(e.vaccinationForm.value.doseNumber||0)+1," ")}}function tt(r,o){if(r&1){let e=x();i(0,"div",30),g("click",function(){v(e);let a=m();return u(a.showSuccessModal=!1)}),i(1,"div",82),g("click",function(a){return v(e),u(a.stopPropagation())}),i(2,"div",83)(3,"div",84)(4,"div",85)(5,"span",86),c(6,"\u2713"),n()()(),i(7,"div",87)(8,"h2"),c(9,"\u{1F489} Vaccination Recorded Successfully!"),n(),i(10,"p",88),c(11,"The vaccination has been added to the patient's record"),n()(),i(12,"button",89),g("click",function(){v(e);let a=m();return u(a.showSuccessModal=!1)}),c(13,"\xD7"),n()(),i(14,"div",90),h(15,Ze,27,8,"div",91)(16,et,16,6,"div",92),n(),i(17,"div",93)(18,"button",81),g("click",function(){v(e);let a=m();return u(a.printCard())}),c(19,"\u{1F5A8}\uFE0F Print Vaccination Card"),n(),i(20,"button",6),g("click",function(){v(e);let a=m();return u(a.showSuccessModal=!1)}),i(21,"span"),c(22,"\u2713"),n(),c(23," Got it "),n()()()()}if(r&2){let e=m();s(15),l("ngIf",e.selectedPatient||e.patient),s(),l("ngIf",e.nextAppointmentDate)}}function nt(r,o){r&1&&y(0,"app-loader")}var we=class r{constructor(o,e,t,a,d,f,S,p,M,R){this.fb=o;this.route=e;this.router=t;this.patientService=a;this.vaccinationService=d;this.adverseEventService=f;this.stockService=S;this.toastService=p;this.authService=M;this.cdr=R;this.vaccinationForm=this.fb.group({patientId:["",[C.required]],vaccineId:["",[C.required]],vaccine:[""],doseNumber:[1,[C.required,C.min(1)]],batchNumber:["",[C.required]],administeredDate:[P(new Date,"yyyy-MM-dd"),[C.required]],administrationDate:[new Date().toISOString().split("T")[0]],administrationSite:["LEFT_ARM",[C.required]],site:[""],adverseEventNotes:[""],adverseEvents:[""],markAdverseEvent:[!1],adverseEvent:this.fb.group({severity:[""],description:[""],actionTaken:[""]})}),this.adverseEventForm=this.vaccinationForm.get("adverseEvent"),this.vaccinationForm.get("vaccineId")?.valueChanges.subscribe(()=>{let T=this.vaccinationForm.get("doseNumber"),w=this.getMaxDoseForVaccine();T?.setValidators([C.required,C.min(1),C.max(w)]),T?.updateValueAndValidity()})}vaccinationForm;patient=null;loading=!1;showSuccessModal=!1;showStockWarning=!1;stockWarningMessage="";errorMessage="";vaccinations=[];filteredVaccinations=[];searchQuery="";filterDate=P(new Date,"yyyy-MM-dd");showRecordModal=!1;showOfflineBanner=!1;isLoadingData=!1;availableVaccines=[];availableBatches=[];patientSearchQuery="";patientSearchResults=[];selectedPatient=null;loadingBatches=!1;administrationSites=[{value:"LEFT_ARM",label:"Left Arm"},{value:"RIGHT_ARM",label:"Right Arm"},{value:"LEFT_THIGH",label:"Left Thigh"},{value:"RIGHT_THIGH",label:"Right Thigh"}];suggestedDose=1;nextAppointmentDate=null;showAdverseEventForm=!1;adverseEventForm;ngOnInit(){console.log("\u{1F7E2} ngOnInit CALLED"),fetch("http://127.0.0.1:7243/ingest/beb0f3e8-0ff1-4b21-b2a4-519a994a184e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"record-vaccination.component.ts:114",message:"ngOnInit called",data:{showAdverseEventForm:this.showAdverseEventForm,hasAdverseEventForm:!!this.adverseEventForm,adverseEventFormType:typeof this.adverseEventForm},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"H2"})}).catch(()=>{}),this.checkOfflineStatus();let o=this.route.snapshot.paramMap.get("patientId"),e=this.route.snapshot.queryParamMap.get("patientId"),t=o||e;console.log("\u{1F7E1} Patient ID check:",{routePatientId:o,queryPatientId:e,patientId:t}),fetch("http://127.0.0.1:7243/ingest/beb0f3e8-0ff1-4b21-b2a4-519a994a184e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"record-vaccination.component.ts:123",message:"Patient ID check",data:{routePatientId:o,queryPatientId:e,patientId:t,hasPatientId:!!t},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"H4"})}).catch(()=>{}),t&&(this.loadPatient(t),this.selectedPatient={id:t},this.vaccinationForm.patchValue({patientId:t}),setTimeout(()=>{console.log("\u{1F7E1} Auto-opening modal for patientId:",t),fetch("http://127.0.0.1:7243/ingest/beb0f3e8-0ff1-4b21-b2a4-519a994a184e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"record-vaccination.component.ts:132",message:"Auto-opening modal",data:{patientId:t,showRecordModal:this.showRecordModal},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"H4"})}).catch(()=>{}),this.openRecordModal()},500)),this.loadVaccinations(),this.loadVaccines(),fetch("http://127.0.0.1:7243/ingest/beb0f3e8-0ff1-4b21-b2a4-519a994a184e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"record-vaccination.component.ts:141",message:"ngOnInit completed",data:{showAdverseEventForm:this.showAdverseEventForm,hasAdverseEventForm:!!this.adverseEventForm,hasAdverseEventInForm:!!this.vaccinationForm.get("adverseEvent"),showRecordModal:this.showRecordModal},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"H2"})}).catch(()=>{}),this.vaccinationForm.patchValue({administrationDate:new Date().toISOString().split("T")[0],administeredDate:P(new Date,"yyyy-MM-dd"),site:"LEFT_ARM"}),this.vaccinationForm.get("vaccineId")?.valueChanges.subscribe(a=>{if(fetch("http://127.0.0.1:7243/ingest/beb0f3e8-0ff1-4b21-b2a4-519a994a184e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"record-vaccination.component.ts:120",message:"Vaccine ID changed",data:{vaccineId:a,hasPatient:!!this.patient,hasSelectedPatient:!!this.selectedPatient,patientId:this.patient?.id||this.selectedPatient?.id},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"DOSE_ALWAYS_1"})}).catch(()=>{}),a){let d=this.availableVaccines.find(f=>f.id===a);d&&(this.vaccinationForm.patchValue({vaccine:d.name,site:this.vaccinationForm.get("administrationSite")?.value||"LEFT_ARM"}),this.loadBatches(d.name),this.suggestNextDose(d.name))}}),this.vaccinationForm.statusChanges.subscribe(a=>{let d={status:a,valid:this.vaccinationForm.valid,invalid:this.vaccinationForm.invalid,pending:this.vaccinationForm.pending,errors:Object.keys(this.vaccinationForm.controls).filter(f=>this.vaccinationForm.get(f)?.invalid).map(f=>({field:f,errors:this.vaccinationForm.get(f)?.errors,value:this.vaccinationForm.get(f)?.value})),values:{patientId:this.vaccinationForm.get("patientId")?.value,vaccineId:this.vaccinationForm.get("vaccineId")?.value,vaccine:this.vaccinationForm.get("vaccine")?.value,doseNumber:this.vaccinationForm.get("doseNumber")?.value,batchNumber:this.vaccinationForm.get("batchNumber")?.value,administeredDate:this.vaccinationForm.get("administeredDate")?.value,administrationDate:this.vaccinationForm.get("administrationDate")?.value,administrationSite:this.vaccinationForm.get("administrationSite")?.value,site:this.vaccinationForm.get("site")?.value}};fetch("http://127.0.0.1:7243/ingest/beb0f3e8-0ff1-4b21-b2a4-519a994a184e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"record-vaccination.component.ts:132",message:"Form status changed",data:d,timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"FORM_DISABLED"})}).catch(()=>{})}),this.vaccinationForm.get("vaccine")?.valueChanges.subscribe(a=>{a&&(this.loadBatches(a),this.suggestNextDose(a))})}loadVaccinations(){if(this.isLoadingData)return;this.isLoadingData=!0,this.loading=!0,this.errorMessage="";let o=Date.now(),e=this.authService.getCurrentUser(),t=e?.facilityId;if(console.log("Loading vaccinations - User:",e,"Facility ID:",t),!t){console.warn("No facility ID available for user:",e),this.errorMessage="No facility ID available. Please ensure you are assigned to a facility.",this.vaccinations=[],this.filteredVaccinations=[],k(o,()=>{this.loading=!1,this.isLoadingData=!1,this.cdr.detectChanges()});return}this.vaccinationService.getVaccinationsByFacility(t).subscribe({next:a=>{console.log("Loaded vaccinations:",a),this.vaccinations=a||[],this.applyFilters(),k(o,()=>{this.loading=!1,this.isLoadingData=!1,this.cdr.detectChanges()})},error:a=>{console.error("Failed to load vaccinations:",a),this.errorMessage=a?.error?.message||"Failed to load vaccinations. Please try again.",this.vaccinations=[],this.filteredVaccinations=[],k(o,()=>{this.loading=!1,this.isLoadingData=!1,this.cdr.detectChanges()})}})}loadVaccines(){let e=this.authService.getCurrentUser()?.facilityId;if(!e){console.warn("No facility ID available for loading vaccines"),this.availableVaccines=[];return}this.vaccinationService.getAllVaccines().subscribe({next:t=>{let a=[],d=t.map(f=>this.stockService.getBatchesByVaccine(f.name,e).toPromise().then(S=>{(S?.filter(M=>(M.quantity||0)>0&&!M.isDepleted)||[]).length>0&&a.push(f)}).catch(()=>{a.push(f)}));Promise.all(d).then(()=>{this.availableVaccines=a.length>0?a:t,this.cdr.detectChanges()})},error:t=>{console.warn("Failed to load vaccines:",t),this.availableVaccines=[]}})}applyFilters(){let o=[...this.vaccinations];if(this.searchQuery.trim()){let e=this.searchQuery.toLowerCase();o=o.filter(t=>t.patientName?.toLowerCase().includes(e)||t.vaccineName?.toLowerCase().includes(e)||t.batchNumber?.toLowerCase().includes(e))}this.filterDate&&(o=o.filter(e=>(e.administeredDate?P(new Date(e.administeredDate),"yyyy-MM-dd"):"")===this.filterDate)),this.filteredVaccinations=o}onSearch(){this.applyFilters()}onDateChange(){this.applyFilters()}openRecordModal(){console.log("\u{1F534} openRecordModal CALLED - showAdverseEventForm:",this.showAdverseEventForm,"hasAdverseEventForm:",!!this.adverseEventForm),fetch("http://127.0.0.1:7243/ingest/beb0f3e8-0ff1-4b21-b2a4-519a994a184e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"record-vaccination.component.ts:320",message:"openRecordModal called",data:{showAdverseEventForm:this.showAdverseEventForm,hasAdverseEventForm:!!this.adverseEventForm,showRecordModal:this.showRecordModal},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"H1"})}).catch(()=>{});let o=this.route.snapshot.queryParamMap.get("patientId");o&&(this.loadPatient(o),this.selectedPatient={id:o},this.vaccinationForm.patchValue({patientId:o})),this.vaccinationForm.reset({patientId:o||"",doseNumber:1,administeredDate:P(new Date,"yyyy-MM-dd"),administrationDate:new Date().toISOString().split("T")[0],administrationSite:"LEFT_ARM",site:"LEFT_ARM",adverseEvent:{severity:"",description:"",actionTaken:""}}),this.showAdverseEventForm=!1,this.selectedPatient=o?this.selectedPatient:null,this.patientSearchResults=[],this.availableBatches=[],this.loadingBatches=!1,this.vaccinationForm.get("batchNumber")?.disable(),this.showRecordModal=!0,this.adverseEventForm&&this.adverseEventForm.reset({severity:"",description:"",actionTaken:""}),fetch("http://127.0.0.1:7243/ingest/beb0f3e8-0ff1-4b21-b2a4-519a994a184e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"record-vaccination.component.ts:openRecordModal",message:"Modal opened - adverse event visibility check",data:{showRecordModal:this.showRecordModal,showAdverseEventForm:this.showAdverseEventForm,hasAdverseEventForm:!!this.adverseEventForm,hasAdverseEventInForm:!!this.vaccinationForm.get("adverseEvent"),patientId:o},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"ADVERSE_EVENT_VISIBILITY"})}).catch(()=>{}),fetch("http://127.0.0.1:7243/ingest/beb0f3e8-0ff1-4b21-b2a4-519a994a184e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"record-vaccination.component.ts:343",message:"openRecordModal completed",data:{showRecordModal:this.showRecordModal,showAdverseEventForm:this.showAdverseEventForm,hasAdverseEventForm:!!this.adverseEventForm,modalOpened:!0},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"H1"})}).catch(()=>{}),setTimeout(()=>{fetch("http://127.0.0.1:7243/ingest/beb0f3e8-0ff1-4b21-b2a4-519a994a184e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"record-vaccination.component.ts:348",message:"openRecordModal - after timeout",data:{showRecordModal:this.showRecordModal,showAdverseEventForm:this.showAdverseEventForm},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"H3"})}).catch(()=>{}),this.cdr.detectChanges()},100)}closeRecordModal(){this.showRecordModal=!1,this.showAdverseEventForm=!1,this.vaccinationForm.reset({doseNumber:1,administeredDate:P(new Date,"yyyy-MM-dd"),administrationDate:new Date().toISOString().split("T")[0],administrationSite:"LEFT_ARM",site:"LEFT_ARM",adverseEvent:{severity:"",description:"",actionTaken:""}}),this.adverseEventForm.get("severity")?.clearValidators(),this.adverseEventForm.get("description")?.clearValidators(),this.adverseEventForm.get("severity")?.updateValueAndValidity(),this.adverseEventForm.get("description")?.updateValueAndValidity(),this.selectedPatient=null,this.patientSearchResults=[],this.availableBatches=[]}toggleAdverseEventForm(){this.showAdverseEventForm=!this.showAdverseEventForm,this.showAdverseEventForm?(this.adverseEventForm.get("severity")?.setValidators([C.required]),this.adverseEventForm.get("description")?.setValidators([C.required]),this.adverseEventForm.get("severity")?.updateValueAndValidity(),this.adverseEventForm.get("description")?.updateValueAndValidity()):(this.adverseEventForm.get("severity")?.clearValidators(),this.adverseEventForm.get("description")?.clearValidators(),this.adverseEventForm.get("severity")?.updateValueAndValidity(),this.adverseEventForm.get("description")?.updateValueAndValidity(),this.adverseEventForm.reset())}searchPatients(){let o=this.patientSearchQuery.trim();if(o.length<2){this.patientSearchResults=[];return}this.patientService.searchPatients(o).subscribe({next:e=>{this.patientSearchResults=e.patients?.slice(0,10)||[]},error:e=>{console.warn("Failed to search patients:",e),this.patientSearchResults=[]}})}selectPatient(o){fetch("http://127.0.0.1:7243/ingest/beb0f3e8-0ff1-4b21-b2a4-519a994a184e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"record-vaccination.component.ts:314",message:"selectPatient called",data:{patientId:o.id,patientName:o.fullName||`${o.firstName} ${o.lastName}`,hasId:!!o.id},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"FORM_DISABLED"})}).catch(()=>{}),this.selectedPatient=o,this.patient=o,this.patientSearchQuery=o.fullName||`${o.firstName} ${o.lastName}`.trim(),this.patientSearchResults=[],this.vaccinationForm.patchValue({patientId:o.id||o.patientId});let e={patientId:this.vaccinationForm.get("patientId")?.value,vaccineId:this.vaccinationForm.get("vaccineId")?.value,vaccine:this.vaccinationForm.get("vaccine")?.value,doseNumber:this.vaccinationForm.get("doseNumber")?.value,batchNumber:this.vaccinationForm.get("batchNumber")?.value,administeredDate:this.vaccinationForm.get("administeredDate")?.value,administrationDate:this.vaccinationForm.get("administrationDate")?.value,administrationSite:this.vaccinationForm.get("administrationSite")?.value,site:this.vaccinationForm.get("site")?.value,formValid:this.vaccinationForm.valid,formErrors:Object.keys(this.vaccinationForm.controls).filter(a=>this.vaccinationForm.get(a)?.invalid).map(a=>({field:a,errors:this.vaccinationForm.get(a)?.errors}))};fetch("http://127.0.0.1:7243/ingest/beb0f3e8-0ff1-4b21-b2a4-519a994a184e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"record-vaccination.component.ts:320",message:"Form state after patient selection",data:e,timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"FORM_DISABLED"})}).catch(()=>{});let t=this.vaccinationForm.get("vaccineId")?.value;if(t){let a=this.availableVaccines.find(d=>d.id===t);a&&this.suggestNextDose(a.name)}}onVaccineChange(){let o=this.vaccinationForm.get("vaccineId")?.value,e=this.vaccinationForm.get("batchNumber");if(o){let t=this.availableVaccines.find(a=>a.id===o);t?(this.vaccinationForm.patchValue({vaccine:t.name}),console.log("Loading batches for vaccine:",t.name),e?.disable(),this.loadBatches(t.name)):(console.warn("Vaccine not found in availableVaccines:",o),this.availableBatches=[],e?.disable())}else this.availableBatches=[],e?.disable();this.vaccinationForm.patchValue({batchNumber:""})}loadPatient(o){this.patientService.getPatientById(o).subscribe({next:e=>{this.patient=e},error:e=>{console.error("Failed to load patient:",e),this.patient=null,this.errorMessage=e.error?.message||"Failed to load patient details. Please try again."}})}loadBatches(o){let t=this.authService.getCurrentUser()?.facilityId,a=this.vaccinationForm.get("batchNumber");if(!t){console.warn("No facility ID available for loading batches"),this.availableBatches=[],a?.disable();return}this.loadingBatches=!0,this.availableBatches=[],console.log("Loading batches for:",{vaccineName:o,facilityId:t}),this.stockService.getBatchesByVaccine(o,t).subscribe({next:d=>{console.log("Batches received from backend:",d),setTimeout(()=>{this.availableBatches=d.map(f=>({id:f.id,vaccineId:f.vaccineId||"",vaccineName:f.vaccineName||o,batchNumber:f.batchNumber,quantity:f.quantity||0,expiryDate:f.expiryDate,receivedDate:f.receivedDate||f.expiryDate,facilityId:f.facilityId||t||"",isDepleted:f.isDepleted||!1})),console.log("Mapped batches:",this.availableBatches),this.loadingBatches=!1,this.availableBatches.length>0?a?.enable():a?.disable(),this.cdr.detectChanges()},0)},error:d=>{console.error("Failed to load batches:",d),console.error("Error details:",JSON.stringify(d,null,2)),setTimeout(()=>{this.availableBatches=[],this.loadingBatches=!1,a?.disable(),this.errorMessage="Failed to load batches. Please try again.",this.cdr.detectChanges()},0)}})}onBatchChange(){let o=this.vaccinationForm.get("batchNumber")?.value;if(o){let e=this.availableBatches.find(t=>t.batchNumber===o);e&&e.quantity<=0&&this.toastService.warning("Selected batch has no available doses")}}onAdministrationSiteChange(){let o=this.vaccinationForm.get("administrationSite")?.value;o&&(this.vaccinationForm.patchValue({site:o},{emitEvent:!1}),fetch("http://127.0.0.1:7243/ingest/beb0f3e8-0ff1-4b21-b2a4-519a994a184e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"record-vaccination.component.ts:494",message:"Administration site changed",data:{administrationSite:o,siteSynced:!0,formValid:this.vaccinationForm.valid},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"FORM_DISABLED"})}).catch(()=>{}))}getBatchPlaceholderText(){return this.loadingBatches?"Loading batches...":this.availableBatches.length===0&&this.vaccinationForm.get("vaccineId")?.value?"No batches available":"Select Batch"}suggestNextDose(o){if(fetch("http://127.0.0.1:7243/ingest/beb0f3e8-0ff1-4b21-b2a4-519a994a184e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"record-vaccination.component.ts:448",message:"suggestNextDose called",data:{vaccine:o,hasPatient:!!this.patient,hasSelectedPatient:!!this.selectedPatient,patientId:this.patient?.id||this.selectedPatient?.id},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"DOSE_ALWAYS_1"})}).catch(()=>{}),this.patient||this.selectedPatient){let e=this.patient?.id||this.selectedPatient?.id;fetch("http://127.0.0.1:7243/ingest/beb0f3e8-0ff1-4b21-b2a4-519a994a184e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"record-vaccination.component.ts:452",message:"Patient ID extracted",data:{patientId:e,patientHasId:!!this.patient?.id,selectedPatientHasId:!!this.selectedPatient?.id},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"DOSE_ALWAYS_1"})}).catch(()=>{}),e?(fetch("http://127.0.0.1:7243/ingest/beb0f3e8-0ff1-4b21-b2a4-519a994a184e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"record-vaccination.component.ts:455",message:"Calling getPatientVaccinations API",data:{patientId:e,vaccine:o},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"DOSE_ALWAYS_1"})}).catch(()=>{}),this.vaccinationService.getPatientVaccinations(e).subscribe({next:t=>{fetch("http://127.0.0.1:7243/ingest/beb0f3e8-0ff1-4b21-b2a4-519a994a184e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"record-vaccination.component.ts:457",message:"Vaccinations received",data:{vaccinationCount:t.length,vaccinations:t.map(d=>({vaccineName:d.vaccineName,doseNumber:d.doseNumber})),targetVaccine:o},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"DOSE_ALWAYS_1"})}).catch(()=>{});let a=t.filter(d=>d.vaccineName?.toLowerCase()===o.toLowerCase()).map(d=>d.doseNumber||0);if(fetch("http://127.0.0.1:7243/ingest/beb0f3e8-0ff1-4b21-b2a4-519a994a184e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"record-vaccination.component.ts:460",message:"Filtered vaccine doses",data:{vaccineDoses:a,filteredCount:a.length},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"DOSE_ALWAYS_1"})}).catch(()=>{}),a.length>0){let d=Math.max(...a);this.suggestedDose=d+1,fetch("http://127.0.0.1:7243/ingest/beb0f3e8-0ff1-4b21-b2a4-519a994a184e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"record-vaccination.component.ts:464",message:"Setting suggested dose",data:{maxDose:d,suggestedDose:this.suggestedDose},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"DOSE_ALWAYS_1"})}).catch(()=>{}),this.vaccinationForm.patchValue({doseNumber:this.suggestedDose})}else this.suggestedDose=1,fetch("http://127.0.0.1:7243/ingest/beb0f3e8-0ff1-4b21-b2a4-519a994a184e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"record-vaccination.component.ts:468",message:"No previous doses found, setting to 1",data:{},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"DOSE_ALWAYS_1"})}).catch(()=>{}),this.vaccinationForm.patchValue({doseNumber:1})},error:t=>{console.warn("Could not load vaccination history for dose suggestion:",t),fetch("http://127.0.0.1:7243/ingest/beb0f3e8-0ff1-4b21-b2a4-519a994a184e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"record-vaccination.component.ts:472",message:"Error loading vaccination history",data:{error:t.message||"Unknown error",status:t.status},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"DOSE_ALWAYS_1"})}).catch(()=>{}),this.suggestedDose=1,this.vaccinationForm.patchValue({doseNumber:1})}})):fetch("http://127.0.0.1:7243/ingest/beb0f3e8-0ff1-4b21-b2a4-519a994a184e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"record-vaccination.component.ts:478",message:"No patient ID available",data:{},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"DOSE_ALWAYS_1"})}).catch(()=>{})}else fetch("http://127.0.0.1:7243/ingest/beb0f3e8-0ff1-4b21-b2a4-519a994a184e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"record-vaccination.component.ts:481",message:"No patient selected, defaulting to dose 1",data:{},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"DOSE_ALWAYS_1"})}).catch(()=>{}),this.suggestedDose=1,this.vaccinationForm.patchValue({doseNumber:1})}onSubmit(){if(this.vaccinationForm.valid){let o=this.vaccinationForm.value.patientId||this.selectedPatient?.id||this.patient?.id;if(!o){this.toastService.error("Patient information is missing. Please select a patient.");return}let e=this.availableBatches.find(p=>p.batchNumber===this.vaccinationForm.value.batchNumber||p.id===this.vaccinationForm.value.batchNumber);if(e&&e.quantity<=15){this.stockWarningMessage=`Only ${e.quantity} doses remaining after this vaccination. Contact facility manager for resupply.`,this.showStockWarning=!0;return}this.loading=!0;let t=null;if(e?.id)t=typeof e.id=="number"?e.id:parseInt(e.id,10);else if(this.vaccinationForm.value.batchNumber){let p=parseInt(this.vaccinationForm.value.batchNumber,10);isNaN(p)||(t=p)}if(!t||isNaN(t)){this.toastService.error("Please select a valid batch number."),this.loading=!1;return}let a=this.authService.getCurrentUser(),d=this.selectedPatient?.facilityId||this.patient?.facilityId||a?.facilityId||"";if(!d){this.toastService.error("Facility ID is required. Please ensure you are assigned to a facility."),this.loading=!1;return}let f=this.vaccinationForm.value.vaccine||this.availableVaccines.find(p=>p.id===this.vaccinationForm.value.vaccineId)?.name||"",S={patientId:o,vaccineName:f,doseNumber:parseInt(this.vaccinationForm.value.doseNumber,10),batchId:t,dateAdministered:this.vaccinationForm.value.administeredDate||this.vaccinationForm.value.administrationDate,facilityId:d,administrationSite:this.vaccinationForm.value.administrationSite||"LEFT_ARM",notes:this.vaccinationForm.value.adverseEventNotes||this.vaccinationForm.value.adverseEvents||void 0};if(this.nextAppointmentDate=new Date,this.nextAppointmentDate.setDate(this.nextAppointmentDate.getDate()+28),X.useMockAuth){setTimeout(()=>{this.loading=!1,this.showSuccessModal=!0,this.toastService.success("Vaccination recorded successfully!"),this.closeRecordModal(),this.loadVaccinations()},500);return}fetch("http://127.0.0.1:7243/ingest/beb0f3e8-0ff1-4b21-b2a4-519a994a184e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"record-vaccination.component.ts:664",message:"Submitting vaccination record",data:{vaccinationData:S,formValid:this.vaccinationForm.valid,formErrors:Object.keys(this.vaccinationForm.controls).filter(p=>this.vaccinationForm.get(p)?.invalid).map(p=>({field:p,errors:this.vaccinationForm.get(p)?.errors}))},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"VACCINATION_ERROR"})}).catch(()=>{}),this.vaccinationService.recordVaccination(S).subscribe({next:p=>{fetch("http://127.0.0.1:7243/ingest/beb0f3e8-0ff1-4b21-b2a4-519a994a184e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"record-vaccination.component.ts:666",message:"Vaccination recorded successfully",data:{responseId:p.id,patientId:p.patientId},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"VACCINATION_ERROR"})}).catch(()=>{});let M=this.vaccinationForm.get("adverseEvent")?.value;if(this.showAdverseEventForm&&M&&M.severity&&M.description){let R;if(p.id){let w=String(p.id),B=parseInt(w,10);isNaN(B)||(R=B)}let T={patientId:o,vaccinationId:R,severity:M.severity,description:M.description,actionTaken:M.actionTaken||void 0};this.adverseEventService.createAdverseEvent(T).subscribe({next:()=>{this.toastService.success("Vaccination and adverse event recorded successfully!"),this.loading=!1,this.showSuccessModal=!0,this.closeRecordModal(),this.loadVaccinations()},error:w=>{console.error("Failed to record adverse event:",w),this.toastService.warning("Vaccination recorded but failed to record adverse event. Please report it separately."),this.loading=!1,this.showSuccessModal=!0,this.closeRecordModal(),this.loadVaccinations()}})}else this.loading=!1,this.showSuccessModal=!0,p.nextAppointmentDate?this.nextAppointmentDate=new Date(p.nextAppointmentDate):(this.nextAppointmentDate=new Date,this.nextAppointmentDate.setDate(this.nextAppointmentDate.getDate()+28)),this.toastService.success("Vaccination recorded successfully!"),this.closeRecordModal(),this.loadVaccinations()},error:p=>{let M={status:p.status,statusText:p.statusText,message:p.message,error:p.error,url:p.url,fullError:JSON.stringify(p,Object.getOwnPropertyNames(p))};fetch("http://127.0.0.1:7243/ingest/beb0f3e8-0ff1-4b21-b2a4-519a994a184e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"record-vaccination.component.ts:682",message:"Vaccination recording error",data:M,timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"VACCINATION_ERROR"})}).catch(()=>{}),this.loading=!1,this.toastService.error("Failed to record vaccination. Please try again."),console.error("Error:",p)}})}else this.vaccinationForm.markAllAsTouched()}onCancel(){let e=this.authService.getCurrentUser()?.role?.toUpperCase();this.patient?e==="FACILITY_MANAGER"?this.router.navigate(["/manager/patients",this.patient.id]):e==="GOVERNMENT_OFFICIAL"?this.router.navigate(["/admin/patients",this.patient.id]):this.router.navigate(["/vaccinator/patients",this.patient.id]):e==="FACILITY_MANAGER"?this.router.navigate(["/manager/dashboard"]):e==="GOVERNMENT_OFFICIAL"?this.router.navigate(["/admin/dashboard"]):this.router.navigate(["/vaccinator/dashboard"])}onSaveAndScheduleNext(){this.onSubmit()}confirmStockWarning(){this.showStockWarning=!1,this.onSubmit()}getVaccineName(){let o=this.vaccinationForm.get("vaccineId")?.value,e=this.vaccinationForm.get("vaccine")?.value;return e||o&&Array.isArray(this.availableVaccines)&&this.availableVaccines.length>0&&this.availableVaccines.find(a=>a&&a.id===o)?.name||"Unknown Vaccine"}getPatientDisplayName(){return this.patient&&(this.patient.fullName||`${this.patient.firstName||""} ${this.patient.lastName||""}`.trim())||"Patient"}getPatientAge(){if(!this.patient?.birthDate&&!this.patient?.dateOfBirth)return"N/A";let o=this.patient.birthDate||this.patient.dateOfBirth||"";if(!o)return"N/A";try{let e=new Date(o),t=Math.floor((new Date().getTime()-e.getTime())/(1e3*60*60*24*30));return t<12?`${t} months`:`${Math.floor(t/12)} years`}catch{return"N/A"}}getMaxDoseForVaccine(){let o=this.vaccinationForm.get("vaccineId")?.value;if(!o)return 10;let e=this.availableVaccines.find(a=>a.id===o);if(!e)return 10;switch(e.name.toUpperCase()){case"BCG":return 1;case"OPV":return 4;case"DTP":case"PENTA":return 3;case"MEASLES":return 2;case"HEPATITIS B":return 3;case"ROTAVIRUS":return 2;case"PNEUMOCOCCAL":return 3;case"COVID-19":return 3;case"TETANUS":return 5;case"YELLOW FEVER":return 1;case"MENINGITIS":return 1;default:return 1}}getFieldError(o){let e=this.vaccinationForm.get(o);if(e?.errors&&e.touched){if(e.errors.required)return`${o} is required`;if(e.errors.min)return"Invalid value";if(e.errors.max)return`Maximum dose for this vaccine is ${this.getMaxDoseForVaccine()}`}return""}isFieldInvalid(o){let e=this.vaccinationForm.get(o);return!!(e?.invalid&&e.touched)}format=P;printCard(){window.print()}getTodayDate(){return new Date().toISOString().split("T")[0]}checkOfflineStatus(){fetch("http://127.0.0.1:7243/ingest/beb0f3e8-0ff1-4b21-b2a4-519a994a184e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"record-vaccination.component.ts:571",message:"checkOfflineStatus entry",data:{hasNavigator:typeof window<"u"&&typeof window.navigator<"u"},timestamp:Date.now(),sessionId:"debug-session",runId:"pre-fix",hypothesisId:"A"})}).catch(()=>{}),this.showOfflineBanner=!(!(typeof window<"u"&&window.navigator)||window.navigator.onLine),fetch("http://127.0.0.1:7243/ingest/beb0f3e8-0ff1-4b21-b2a4-519a994a184e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"record-vaccination.component.ts:573",message:"checkOfflineStatus after setting showOfflineBanner",data:{showOfflineBanner:this.showOfflineBanner},timestamp:Date.now(),sessionId:"debug-session",runId:"pre-fix",hypothesisId:"A"})}).catch(()=>{}),typeof window<"u"&&(window.addEventListener("online",()=>{fetch("http://127.0.0.1:7243/ingest/beb0f3e8-0ff1-4b21-b2a4-519a994a184e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"record-vaccination.component.ts:577",message:"online event fired",data:{},timestamp:Date.now(),sessionId:"debug-session",runId:"pre-fix",hypothesisId:"A"})}).catch(()=>{}),this.showOfflineBanner=!1}),window.addEventListener("offline",()=>{fetch("http://127.0.0.1:7243/ingest/beb0f3e8-0ff1-4b21-b2a4-519a994a184e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"record-vaccination.component.ts:582",message:"offline event fired",data:{},timestamp:Date.now(),sessionId:"debug-session",runId:"pre-fix",hypothesisId:"A"})}).catch(()=>{}),this.showOfflineBanner=!0}))}static \u0275fac=function(e){return new(e||r)(O(he),O(U),O(Q),O(Pe),O(xe),O(ye),O(Se),O(Z),O(ee),O(W))};static \u0275cmp=z({type:r,selectors:[["app-record-vaccination"]],decls:26,vars:13,consts:[["pageTitle","Record Vaccination"],[1,"record-vaccination-page"],["class","offline-banner",4,"ngIf"],["type","error",3,"message","show","dismiss",4,"ngIf"],[1,"page-header"],[1,"subtitle"],[1,"btn","btn-primary",3,"click"],[1,"filters-card"],[1,"search-box"],[1,"search-icon"],["type","text","placeholder","Search by patient name, vaccine, or batch number...",1,"search-input",3,"ngModelChange","input","ngModel","ngModelOptions"],[1,"filter-group"],["type","date",1,"filter-select",3,"ngModelChange","change","ngModel","ngModelOptions"],["class","vaccinations-table-card",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[4,"ngIf"],[1,"offline-banner"],[1,"offline-icon"],["type","error",3,"dismiss","message","show"],[1,"vaccinations-table-card"],[1,"table-header"],[1,"table-container"],[1,"vaccinations-table"],[4,"ngFor","ngForOf"],[1,"dose-badge"],[1,"site-badge"],[1,"btn","btn-sm","btn-primary",3,"routerLink"],["colspan","7",1,"no-data"],[1,"empty-state"],[1,"empty-icon"],[1,"modal-overlay",3,"click"],[1,"modal-content","large",3,"click"],[1,"modal-header"],[1,"modal-close",3,"click"],[1,"modal-body",2,"max-height","80vh !important","overflow-y","auto !important","overflow-x","visible !important",3,"ngSubmit","formGroup"],[1,"form-group"],[1,"required"],["type","text","placeholder","Search patient by name or ID...",1,"form-input",3,"ngModelChange","input","ngModel","ngModelOptions"],["class","patient-results",4,"ngIf"],["class","selected-patient",4,"ngIf"],["class","error-text",4,"ngIf"],[1,"form-row"],["formControlName","vaccineId",1,"form-input",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","number","formControlName","doseNumber","min","1",1,"form-input",3,"max","placeholder"],["class","input-hint",4,"ngIf"],["formControlName","batchNumber",1,"form-input",3,"change"],["type","date","formControlName","administeredDate",1,"form-input",3,"value"],["formControlName","administrationSite",1,"form-input",3,"change"],["value","LEFT_ARM"],["value","RIGHT_ARM"],["value","LEFT_THIGH"],["value","RIGHT_THIGH"],[1,"form-group","adverse-event-toggle-section",2,"display","block !important","visibility","visible !important","position","relative !important","z-index","10 !important"],[1,"adverse-event-toggle",2,"display","block !important","visibility","visible !important"],[2,"display","flex !important","visibility","visible !important"],["type","checkbox","id","adverse-event-checkbox",2,"display","block !important","visibility","visible !important","opacity","1 !important",3,"ngModelChange","change","ngModel","ngModelOptions"],[2,"display","inline-block !important","visibility","visible !important"],["class","adverse-event-form","formGroupName","adverseEvent",4,"ngIf"],["formControlName","adverseEventNotes","rows","3","placeholder","Any additional notes or observations",1,"form-input"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"patient-results"],["class","patient-result-item",3,"click",4,"ngFor","ngForOf"],[1,"patient-result-item",3,"click"],[1,"selected-patient"],[1,"error-text"],[3,"value"],[1,"input-hint"],["formGroupName","adverseEvent",1,"adverse-event-form"],["formControlName","severity",1,"form-input",3,"required"],["value","MILD"],["value","MODERATE"],["value","SEVERE"],["formControlName","description","rows","4","placeholder","Describe the adverse event in detail...",1,"form-input",3,"required"],["formControlName","actionTaken","rows","3","placeholder","Describe any actions taken in response to the adverse event...",1,"form-input"],[1,"modal-content",3,"click"],[1,"warning-icon"],[1,"modal-actions"],[1,"btn","btn-secondary",3,"click"],[1,"modal-content","success-modal",3,"click"],[1,"modal-header","success-header"],[1,"success-icon-wrapper"],[1,"success-icon-circle"],[1,"success-checkmark"],[1,"modal-title-section"],[1,"success-subtitle"],["aria-label","Close",1,"modal-close",3,"click"],[1,"modal-body","success-body"],["class","success-details",4,"ngIf"],["class","next-appointment",4,"ngIf"],[1,"modal-footer","success-footer"],[1,"success-details"],[1,"detail-card"],[1,"detail-icon"],[1,"detail-content"],[1,"detail-label"],[1,"detail-value"],["class","detail-card",4,"ngIf"],[1,"next-appointment"],[1,"appointment-card"],[1,"appointment-icon"],[1,"appointment-content"],[1,"appointment-label"],[1,"appointment-date"],[1,"appointment-note"]],template:function(e,t){e&1&&(i(0,"app-layout",0)(1,"div",1),h(2,Ee,5,0,"div",2)(3,Fe,1,2,"app-alert",3),i(4,"div",4)(5,"div")(6,"h1"),c(7,"\u{1F489} Vaccination Records"),n(),i(8,"p",5),c(9,"Manage and record patient vaccinations"),n()(),i(10,"button",6),g("click",function(){return t.openRecordModal()}),c(11,"+ Record Vaccination"),n()(),i(12,"div",7)(13,"div",8)(14,"span",9),c(15,"\u{1F50D}"),n(),i(16,"input",10),F("ngModelChange",function(d){return E(t.searchQuery,d)||(t.searchQuery=d),d}),g("input",function(){return t.onSearch()}),n()(),i(17,"div",11)(18,"label"),c(19,"Date:"),n(),i(20,"input",12),F("ngModelChange",function(d){return E(t.filterDate,d)||(t.filterDate=d),d}),g("change",function(){return t.onDateChange()}),n()()(),h(21,Ne,25,3,"div",13)(22,$e,74,26,"div",14)(23,Ke,15,1,"div",14)(24,tt,24,2,"div",14)(25,nt,1,0,"app-loader",15),n()()),e&2&&(s(2),l("ngIf",t.showOfflineBanner),s(),l("ngIf",t.errorMessage),s(13),I("ngModel",t.searchQuery),l("ngModelOptions",D(11,A)),s(4),I("ngModel",t.filterDate),l("ngModelOptions",D(12,A)),s(),l("ngIf",!t.isLoadingData),s(),l("ngIf",t.showRecordModal),s(),l("ngIf",t.showStockWarning),s(),l("ngIf",t.showSuccessModal),s(),l("ngIf",t.isLoadingData))},dependencies:[H,J,Y,be,ce,pe,ge,ne,re,te,me,ie,oe,ue,ve,fe,le,de,se,_e,ae,K,$,Oe,Me,Ce,G],styles:['.record-vaccination-page[_ngcontent-%COMP%]{padding:clamp(1.5rem,4vw,3rem);max-width:1920px;margin:0 auto;background:linear-gradient(135deg,#f8fafc,#f1f5f9);min-height:100vh}.record-vaccination-page[_ngcontent-%COMP%]   .offline-banner[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#fbbf24);color:#fff;padding:clamp(.75rem,2vw,1rem) clamp(1rem,3vw,1.5rem);border-radius:12px;margin-bottom:clamp(1rem,2vw,1.5rem);display:flex;align-items:center;gap:.75rem;font-weight:500;box-shadow:0 4px 12px #f59e0b33;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.record-vaccination-page[_ngcontent-%COMP%]   .offline-banner[_ngcontent-%COMP%]   .offline-icon[_ngcontent-%COMP%]{font-size:1.25rem}.record-vaccination-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:1.5rem;margin-bottom:2rem;padding-bottom:1.5rem;border-bottom:2px solid #e2e8f0;flex-wrap:wrap}.record-vaccination-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{flex:1;min-width:200px;display:flex;flex-direction:column;gap:.5rem}.record-vaccination-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.25rem;font-weight:700;color:#1e293b;margin:0}.record-vaccination-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#64748b;font-size:1rem;margin:0}.record-vaccination-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex-shrink:0}.record-vaccination-page[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:inline-flex!important;align-items:center!important;justify-content:center!important;padding:12px 24px!important;font-size:.875rem!important;font-weight:600!important;border-radius:10px!important;border:none!important;cursor:pointer!important;transition:all .3s cubic-bezier(.4,0,.2,1)!important;text-decoration:none!important;min-width:120px!important;gap:.5rem!important;box-sizing:border-box!important}.record-vaccination-page[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.6!important;cursor:not-allowed!important;transform:none!important}.record-vaccination-page[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb)!important;color:#fff!important;box-shadow:0 4px 12px #3b82f64d!important}.record-vaccination-page[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px)!important;box-shadow:0 6px 20px #3b82f666!important;background:linear-gradient(135deg,#2563eb,#1d4ed8)!important}.record-vaccination-page[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)!important}.record-vaccination-page[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]{background:#fff!important;color:#475569!important;border:2px solid #cbd5e1!important;box-shadow:0 2px 4px #0000000d!important}.record-vaccination-page[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#f1f5f9!important;border-color:#94a3b8!important;transform:translateY(-1px)!important;box-shadow:0 4px 8px #0000001a!important}.record-vaccination-page[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)!important}.record-vaccination-page[_ngcontent-%COMP%]   .btn.btn-sm[_ngcontent-%COMP%]{padding:8px 16px!important;font-size:.8125rem!important;min-width:80px!important}.record-vaccination-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#fafbfc);padding:clamp(1.25rem,3vw,1.75rem);border-radius:24px;box-shadow:0 4px 20px #0000000f;margin-bottom:2rem;display:flex;gap:1.5rem;align-items:center;flex-wrap:wrap;border:1px solid rgba(226,232,240,.8)}.record-vaccination-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]{flex:1;min-width:300px;position:relative}.record-vaccination-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#64748b;font-size:1.125rem}.record-vaccination-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px 12px 44px;border:2px solid #cbd5e1;border-radius:10px;font-size:.875rem;transition:all .2s}.record-vaccination-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 4px #3b82f61a}.record-vaccination-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.record-vaccination-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#475569;font-size:.9375rem}.record-vaccination-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%]{padding:12px 16px;border:2px solid #cbd5e1;border-radius:10px;font-size:.875rem;background:#fff;cursor:pointer}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#fafbfc);border-radius:24px;box-shadow:0 4px 20px #0000000f;overflow:hidden;border:1px solid rgba(226,232,240,.8)}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{padding:clamp(1.25rem,3vw,1.75rem);border-bottom:3px solid #e2e8f0;background:linear-gradient(135deg,#f8fafc,#f1f5f9)}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:800;background:linear-gradient(135deg,#1e293b,#475569);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow-x:auto}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]   .vaccinations-table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]   .vaccinations-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9)}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]   .vaccinations-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1.25rem 1.5rem;text-align:left;font-weight:800;color:#1e293b;font-size:.875rem;text-transform:uppercase;letter-spacing:.075em;border-bottom:3px solid #3b82f6}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]   .vaccinations-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .3s ease;background:#fff}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]   .vaccinations-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background:#fafbfc}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]   .vaccinations-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#eff6ff,#dbeafe);transform:scale(1.01)}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]   .vaccinations-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1.25rem 1.5rem;color:#475569;font-weight:600;vertical-align:middle;border-bottom:1px solid #e2e8f0;font-size:.9375rem}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]   .vaccinations-table[_ngcontent-%COMP%]   .dose-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;border-radius:12px;font-size:.75rem;font-weight:500;background:#3b82f61a;color:#3b82f6}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]   .vaccinations-table[_ngcontent-%COMP%]   .site-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;border-radius:12px;font-size:.75rem;font-weight:500;background:#10b9811a;color:#10b981;text-transform:capitalize}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]   .vaccinations-table[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{text-align:center;padding:3rem}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]   .vaccinations-table[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:3rem;display:block;margin-bottom:.5rem}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]   .vaccinations-table[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:1rem;margin:0}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#fafbfc);border-radius:20px;padding:clamp(1.5rem,4vw,3rem);box-shadow:0 4px 20px #0000000f,0 1px 4px #0000000a;border:2px solid rgba(59,130,246,.1);transition:all .3s cubic-bezier(.4,0,.2,1)}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]:hover{box-shadow:0 8px 30px #00000014,0 2px 8px #0000000f}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{margin-bottom:clamp(1.5rem,3vw,2.5rem)}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:clamp(1.25rem,3vw,1.75rem);font-weight:700;color:#1e293b;margin-bottom:clamp(1rem,2vw,1.5rem);padding-bottom:.75rem;border-bottom:3px solid #3b82f6;position:relative}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-3px;left:0;width:60px;height:3px;background:linear-gradient(90deg,#3b82f6,#60a5fa);border-radius:2px}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:clamp(1rem,2vw,1.5rem)}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.5rem;color:#334155;font-size:.875rem;letter-spacing:.3px}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label.required[_ngcontent-%COMP%]:after{content:" *";color:#ef4444;font-weight:700}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .dose-selector[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .dose-selector[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.25rem;border:2px solid #e2e8f0;border-radius:10px;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);background:#fff;font-weight:500;color:#475569}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .dose-selector[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]:hover{border-color:#cbd5e1;background:#f1f5f9}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .dose-selector[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked ~ span[_ngcontent-%COMP%], .record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .dose-selector[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]:has(input[type=radio]:checked){border-color:#3b82f6;background:linear-gradient(135deg,#eff6ff,#dbeafe);color:#1e293b;font-weight:600;box-shadow:0 2px 8px #3b82f633}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .dose-selector[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer;accent-color:#3b82f6}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1rem}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1rem;border:2px solid #e2e8f0;border-radius:10px;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);background:#fff;font-weight:500;color:#475569}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]:hover{border-color:#cbd5e1;background:#f1f5f9}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]:has(input[type=radio]:checked){border-color:#3b82f6;background:linear-gradient(135deg,#eff6ff,#dbeafe);color:#1e293b;font-weight:600;box-shadow:0 2px 8px #3b82f633}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer;accent-color:#3b82f6}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%], .record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #e2e8f0;border-radius:10px;font-size:1rem;transition:all .3s cubic-bezier(.4,0,.2,1);background:#fff;color:#1e293b}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:focus, .record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 4px #3b82f61a;transform:translateY(-1px)}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:hover:not(:focus), .record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover:not(:focus), .record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:hover:not(:focus){border-color:#cbd5e1}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input.error[_ngcontent-%COMP%], .record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select.error[_ngcontent-%COMP%], .record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea.error[_ngcontent-%COMP%]{border-color:#ef4444;box-shadow:0 0 0 4px #ef44441a}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:100px;resize:vertical}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-hint[_ngcontent-%COMP%]{display:block;margin-top:.5rem;font-size:.75rem;color:#64748b;font-style:italic}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-error[_ngcontent-%COMP%]{display:block;margin-top:.5rem;font-size:.875rem;color:#ef4444;font-weight:500;animation:_ngcontent-%COMP%_shake .3s ease-in-out}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-top:.75rem;cursor:pointer;padding:.5rem;border-radius:8px;transition:background .2s}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]:hover{background:#f1f5f9}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer;accent-color:#3b82f6}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;margin-top:clamp(1.5rem,3vw,2.5rem);padding-top:clamp(1rem,2vw,1.5rem);border-top:2px solid #e2e8f0}@media(max-width:768px){.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{flex-direction:column}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:12px 24px;border-radius:10px;font-weight:600;font-size:.875rem;transition:all .3s cubic-bezier(.4,0,.2,1);border:none;cursor:pointer;display:inline-flex;align-items:center;gap:.5rem}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff;box-shadow:0 4px 12px #3b82f64d}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #3b82f666}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:active{transform:translateY(0)}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#64748b,#475569);color:#fff;box-shadow:0 4px 12px #64748b33}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #64748b4d}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important}.modal-overlay[_ngcontent-%COMP%]{position:fixed!important;inset:0!important;background:#0009!important;-webkit-backdrop-filter:blur(4px)!important;backdrop-filter:blur(4px)!important;display:flex!important;align-items:center!important;justify-content:center!important;z-index:10000!important;animation:_ngcontent-%COMP%_fadeIn .3s ease-out!important}.modal-content[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#fafbfc)!important;border-radius:20px!important;padding:0!important;max-width:600px!important;width:90%!important;max-height:90vh!important;overflow:hidden!important;box-shadow:0 20px 60px #0000004d!important;border:2px solid rgba(59,130,246,.2)!important;animation:_ngcontent-%COMP%_slideUp .3s ease-out!important;position:relative!important;display:flex!important;flex-direction:column!important}.modal-content.large[_ngcontent-%COMP%]{max-width:800px!important}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:2px solid #e2e8f0;background:linear-gradient(135deg,#f8fafc,#fff);border-radius:20px 20px 0 0}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:700;color:#1e293b;display:flex;align-items:center;gap:.5rem}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:clamp(1.25rem,3vw,1.75rem);font-weight:700;color:#1e293b;margin:0}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]{background:none;border:none;font-size:2rem;color:#64748b;cursor:pointer;width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:8px;transition:all .2s}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]:hover{background:#f1f5f9;color:#1e293b;transform:rotate(90deg)}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:1.5rem!important;background:#fff!important;overflow-y:auto!important;overflow-x:visible!important;flex:1!important}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .patient-results[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;background:#fff;border:2px solid #e2e8f0;border-radius:10px;margin-top:.5rem;max-height:200px;overflow-y:auto;box-shadow:0 4px 12px #0000001a;z-index:10}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .patient-results[_ngcontent-%COMP%]   .patient-result-item[_ngcontent-%COMP%]{padding:.75rem 1rem;cursor:pointer;transition:all .2s;border-bottom:1px solid #f1f5f9}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .patient-results[_ngcontent-%COMP%]   .patient-result-item[_ngcontent-%COMP%]:hover{background:#f1f5f9}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .patient-results[_ngcontent-%COMP%]   .patient-result-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .selected-patient[_ngcontent-%COMP%]{margin-top:.5rem;padding:.75rem;background:#eff6ff;border-radius:8px;color:#1e40af;font-size:.875rem}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;margin-bottom:1.5rem}@media(max-width:768px){.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem;position:relative}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.5rem;color:#334155;font-size:.875rem}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label.required[_ngcontent-%COMP%]:after{content:" *";color:#ef4444;font-weight:700}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #e2e8f0;border-radius:10px;font-size:.875rem;transition:all .3s cubic-bezier(.4,0,.2,1);background:#fff;color:#1e293b;box-sizing:border-box}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 4px #3b82f61a;transform:translateY(-1px)}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:hover:not(:focus){border-color:#cbd5e1}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input.error[_ngcontent-%COMP%]{border-color:#ef4444;box-shadow:0 0 0 4px #ef44441a}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]::placeholder{color:#94a3b8}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-text[_ngcontent-%COMP%]{display:block;color:#ef4444;font-size:.75rem;margin-top:.25rem;font-weight:500}.modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{display:flex!important;justify-content:flex-end!important;gap:1rem!important;padding:1.5rem!important;border-top:2px solid #e2e8f0!important;background:linear-gradient(135deg,#f8fafc,#f1f5f9)!important;margin-top:1.5rem!important;border-radius:0 0 20px 20px!important;flex-shrink:0!important}.modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:120px!important}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-5px)}75%{transform:translate(5px)}}.modal-content.success-modal[_ngcontent-%COMP%]{max-width:550px!important;border:2px solid rgba(76,175,80,.3)!important}.modal-content.success-modal[_ngcontent-%COMP%]   .success-header[_ngcontent-%COMP%]{position:relative!important;background:linear-gradient(135deg,#d1fae5,#a7f3d0)!important;padding:2rem 1.5rem!important;border-bottom:3px solid #4caf50!important}.modal-content.success-modal[_ngcontent-%COMP%]   .success-header[_ngcontent-%COMP%]   .success-icon-wrapper[_ngcontent-%COMP%]{position:absolute;top:-30px;left:50%;transform:translate(-50%);z-index:1}.modal-content.success-modal[_ngcontent-%COMP%]   .success-header[_ngcontent-%COMP%]   .success-icon-circle[_ngcontent-%COMP%]{width:80px;height:80px;background:linear-gradient(135deg,#4caf50,#388e3c);border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 8px 24px #4caf5066;animation:_ngcontent-%COMP%_scaleIn .4s cubic-bezier(.34,1.56,.64,1)}.modal-content.success-modal[_ngcontent-%COMP%]   .success-header[_ngcontent-%COMP%]   .success-icon-circle[_ngcontent-%COMP%]   .success-checkmark[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;font-weight:700;line-height:1}.modal-content.success-modal[_ngcontent-%COMP%]   .success-header[_ngcontent-%COMP%]   .modal-title-section[_ngcontent-%COMP%]{text-align:center;width:100%;margin-top:2rem}.modal-content.success-modal[_ngcontent-%COMP%]   .success-header[_ngcontent-%COMP%]   .modal-title-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#1e293b;margin:0 0 .5rem;display:block}.modal-content.success-modal[_ngcontent-%COMP%]   .success-header[_ngcontent-%COMP%]   .modal-title-section[_ngcontent-%COMP%]   .success-subtitle[_ngcontent-%COMP%]{color:#64748b;font-size:.875rem;margin:0;font-weight:500}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-body.success-body[_ngcontent-%COMP%]{padding:2rem 1.5rem!important;background:#fff!important}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-body.success-body[_ngcontent-%COMP%]   .success-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-body.success-body[_ngcontent-%COMP%]   .success-details[_ngcontent-%COMP%]   .detail-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem;background:linear-gradient(135deg,#f8fafc,#f1f5f9);border-radius:12px;border:1px solid #e2e8f0;transition:all .3s ease}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-body.success-body[_ngcontent-%COMP%]   .success-details[_ngcontent-%COMP%]   .detail-card[_ngcontent-%COMP%]:hover{transform:translate(4px);box-shadow:0 4px 12px #00000014}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-body.success-body[_ngcontent-%COMP%]   .success-details[_ngcontent-%COMP%]   .detail-card[_ngcontent-%COMP%]   .detail-icon[_ngcontent-%COMP%]{font-size:2rem;width:50px;height:50px;display:flex;align-items:center;justify-content:center;background:#fff;border-radius:12px;flex-shrink:0}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-body.success-body[_ngcontent-%COMP%]   .success-details[_ngcontent-%COMP%]   .detail-card[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]{flex:1}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-body.success-body[_ngcontent-%COMP%]   .success-details[_ngcontent-%COMP%]   .detail-card[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b;font-weight:600;text-transform:uppercase;letter-spacing:.05em;margin-bottom:.25rem}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-body.success-body[_ngcontent-%COMP%]   .success-details[_ngcontent-%COMP%]   .detail-card[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{font-size:1rem;color:#1e293b;font-weight:700}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-body.success-body[_ngcontent-%COMP%]   .next-appointment[_ngcontent-%COMP%]{margin-top:1.5rem}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-body.success-body[_ngcontent-%COMP%]   .next-appointment[_ngcontent-%COMP%]   .appointment-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1.25rem;background:linear-gradient(135deg,#eff6ff,#dbeafe);border-radius:12px;border:2px solid #3b82f6}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-body.success-body[_ngcontent-%COMP%]   .next-appointment[_ngcontent-%COMP%]   .appointment-card[_ngcontent-%COMP%]   .appointment-icon[_ngcontent-%COMP%]{font-size:2.5rem;width:60px;height:60px;display:flex;align-items:center;justify-content:center;background:#fff;border-radius:12px;flex-shrink:0}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-body.success-body[_ngcontent-%COMP%]   .next-appointment[_ngcontent-%COMP%]   .appointment-card[_ngcontent-%COMP%]   .appointment-content[_ngcontent-%COMP%]{flex:1}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-body.success-body[_ngcontent-%COMP%]   .next-appointment[_ngcontent-%COMP%]   .appointment-card[_ngcontent-%COMP%]   .appointment-content[_ngcontent-%COMP%]   .appointment-label[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b;font-weight:600;text-transform:uppercase;letter-spacing:.05em;margin-bottom:.5rem}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-body.success-body[_ngcontent-%COMP%]   .next-appointment[_ngcontent-%COMP%]   .appointment-card[_ngcontent-%COMP%]   .appointment-content[_ngcontent-%COMP%]   .appointment-date[_ngcontent-%COMP%]{font-size:1.25rem;color:#1e40af;font-weight:700;margin-bottom:.25rem}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-body.success-body[_ngcontent-%COMP%]   .next-appointment[_ngcontent-%COMP%]   .appointment-card[_ngcontent-%COMP%]   .appointment-content[_ngcontent-%COMP%]   .appointment-note[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b;font-style:italic}.modal-content.success-modal[_ngcontent-%COMP%]   .success-footer[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9)!important;border-top:2px solid #e2e8f0!important;padding:1.5rem!important;justify-content:flex-end!important;gap:1rem!important}.modal-content.success-modal[_ngcontent-%COMP%]   .success-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:150px!important;font-size:1rem!important;padding:14px 28px!important}.modal-content.success-modal[_ngcontent-%COMP%]   .success-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:.5rem;font-size:1.2rem}.modal-content.success-modal[_ngcontent-%COMP%]   .adverse-event-toggle-section[_ngcontent-%COMP%]{margin:1.5rem 0;position:relative;z-index:1;display:block!important;visibility:visible!important}.modal-content.success-modal[_ngcontent-%COMP%]   .adverse-event-toggle[_ngcontent-%COMP%]{position:relative;z-index:1;display:block!important;visibility:visible!important}.modal-content.success-modal[_ngcontent-%COMP%]   .adverse-event-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex!important;align-items:center;gap:.75rem;cursor:pointer;font-weight:600;color:#334155;font-size:.9375rem;padding:.75rem;background:linear-gradient(135deg,#fef2f2,#fee2e2);border-radius:10px;border:2px solid #fecaca;transition:all .3s ease;visibility:visible!important;opacity:1!important}.modal-content.success-modal[_ngcontent-%COMP%]   .adverse-event-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#fee2e2,#fecaca);border-color:#f87171}.modal-content.success-modal[_ngcontent-%COMP%]   .adverse-event-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer;accent-color:#dc2626;display:block!important;visibility:visible!important;opacity:1!important}.modal-content.success-modal[_ngcontent-%COMP%]   .adverse-event-form[_ngcontent-%COMP%]{margin-top:1.5rem;padding:1.5rem;background:linear-gradient(135deg,#fef2f2,#fee2e2);border-radius:12px;border:2px solid #fecaca;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.modal-content.success-modal[_ngcontent-%COMP%]   .adverse-event-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.modal-content.success-modal[_ngcontent-%COMP%]   .adverse-event-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}.modal-content.success-modal[_ngcontent-%COMP%]   .adverse-event-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#991b1b;font-weight:600}.modal-content.success-modal[_ngcontent-%COMP%]   .adverse-event-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{background:#fff;border-color:#fca5a5}.modal-content.success-modal[_ngcontent-%COMP%]   .adverse-event-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:focus{border-color:#dc2626;box-shadow:0 0 0 3px #dc26261a}.modal-content.success-modal[_ngcontent-%COMP%]   .adverse-event-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea.form-input[_ngcontent-%COMP%]{resize:vertical;min-height:100px}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:translate(-50%) scale(0)}to{opacity:1;transform:translate(-50%) scale(1)}}']})};export{we as RecordVaccinationComponent};
