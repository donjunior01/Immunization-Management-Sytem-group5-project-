import{a as ye}from"./chunk-NBW3Q2KQ.js";import{a as x}from"./chunk-DS5JRME6.js";import{a as Oe}from"./chunk-E62IOWU4.js";import{a as we}from"./chunk-Z3ZPAFT5.js";import"./chunk-JMDA2KYA.js";import"./chunk-FP7EL6KI.js";import{a as xe}from"./chunk-YTZ64FHX.js";import{a as N}from"./chunk-Y7V3HG6R.js";import{a as be}from"./chunk-QHILUX33.js";import{a as Me}from"./chunk-RB2IKARN.js";import"./chunk-7UZYWCAJ.js";import"./chunk-MLMGL4QO.js";import{a as Pe}from"./chunk-4G3G25LR.js";import{a as te,b as ne,c as b,d as ie,e as oe,f as ae,g as re,h as ce,j as se,k as de,l as le,m as me,n as pe,o as ge,p as fe,q as ve,r as _e,t as ue,u as he,v as Ce}from"./chunk-VLP6GBL3.js";import{b as X,c as Z,e as ee}from"./chunk-K3XQKY74.js";import{A as g,Aa as S,B as f,Ba as V,Ca as E,Ea as F,Fa as G,Ia as k,Ka as D,Oa as W,P as s,Sa as j,Ta as Y,U as M,V as L,Xa as U,Z as _,_a as H,ba as d,ca as i,da as n,ea as y,gb as Q,ib as $,jb as J,ka as O,la as p,ma as l,mb as K,va as r,wa as h,xa as C,ya as B,za as q}from"./chunk-T4RMSDZY.js";var T=()=>({standalone:!0}),Ve=c=>["/vaccinator/patients",c];function Ee(c,a){c&1&&(i(0,"div",16)(1,"span",17),r(2,"\u26A0\uFE0F"),n(),i(3,"span"),r(4,"You are currently offline. Changes will be synced when connection is restored."),n()())}function Fe(c,a){if(c&1){let e=O();i(0,"app-alert",18),p("dismiss",function(){g(e);let o=l();return f(o.errorMessage="")}),n()}if(c&2){let e=l();d("message",e.errorMessage)("show",!!e.errorMessage)}}function ke(c,a){if(c&1&&(i(0,"tr")(1,"td")(2,"strong"),r(3),n()(),i(4,"td"),r(5),n(),i(6,"td")(7,"span",24),r(8),n()(),i(9,"td"),r(10),n(),i(11,"td"),r(12),k(13,"date"),n(),i(14,"td")(15,"span",25),r(16),n()(),i(17,"td")(18,"button",26),r(19," View Patient "),n()()()),c&2){let e=a.$implicit;s(3),h(e.patientName||"N/A"),s(2),h(e.vaccineName||"N/A"),s(3),C("Dose ",e.doseNumber),s(2),h(e.batchNumber||"N/A"),s(2),h(D(13,7,e.administeredDate||e.date,"dd MMM yyyy")),s(4),h(e.administrationSite||e.site||"N/A"),s(2),d("routerLink",G(10,Ve,e.patientId))}}function De(c,a){if(c&1){let e=O();i(0,"tr")(1,"td",27)(2,"div",28)(3,"span",29),r(4,"\u{1F489}"),n(),i(5,"p"),r(6,"No vaccinations found"),n(),i(7,"button",6),p("click",function(){g(e);let o=l(2);return f(o.openRecordModal())}),r(8,"Record First Vaccination"),n()()()()}}function Ie(c,a){if(c&1&&(i(0,"div",19)(1,"div",20)(2,"h3"),r(3),n()(),i(4,"div",21)(5,"table",22)(6,"thead")(7,"tr")(8,"th"),r(9,"Patient"),n(),i(10,"th"),r(11,"Vaccine"),n(),i(12,"th"),r(13,"Dose"),n(),i(14,"th"),r(15,"Batch"),n(),i(16,"th"),r(17,"Date"),n(),i(18,"th"),r(19,"Site"),n(),i(20,"th"),r(21,"Actions"),n()()(),i(22,"tbody"),_(23,ke,20,12,"tr",23)(24,De,9,0,"tr",15),n()()()()),c&2){let e=l();s(3),C("Vaccination Records (",e.filteredVaccinations.length,")"),s(20),d("ngForOf",e.filteredVaccinations),s(),d("ngIf",e.filteredVaccinations.length===0&&!e.isLoadingData)}}function Re(c,a){if(c&1){let e=O();i(0,"div",66),p("click",function(){let o=g(e).$implicit,m=l(3);return f(m.selectPatient(o))}),r(1),n()}if(c&2){let e=a.$implicit;s(),B(" ",e.fullName||e.firstName+" "+e.lastName," - ",e.age||"N/A"," months ")}}function Ne(c,a){if(c&1&&(i(0,"div",64),_(1,Re,2,2,"div",65),n()),c&2){let e=l(2);s(),d("ngForOf",e.patientSearchResults)}}function Te(c,a){if(c&1&&(i(0,"div",67),r(1," Selected: "),i(2,"strong"),r(3),n()()),c&2){let e=l(2);s(3),h(e.selectedPatient.fullName||e.selectedPatient.firstName+" "+e.selectedPatient.lastName)}}function Ae(c,a){if(c&1&&(i(0,"span",68),r(1),n()),c&2){let e=l(2);s(),C(" ",e.getFieldError("patientId")," ")}}function Be(c,a){if(c&1&&(i(0,"option",69),r(1),n()),c&2){let e=a.$implicit;d("value",e.id),s(),C(" ",e.name," ")}}function ze(c,a){if(c&1&&(i(0,"span",68),r(1),n()),c&2){let e=l(2);s(),C(" ",e.getFieldError("vaccineId")," ")}}function Le(c,a){if(c&1&&(i(0,"small",70),r(1),n()),c&2){let e=l(2);s(),C(" Suggested: Dose ",e.suggestedDose," (based on patient history) ")}}function qe(c,a){if(c&1&&(i(0,"span",68),r(1),n()),c&2){let e=l(2);s(),C(" ",e.getFieldError("doseNumber")," ")}}function Ge(c,a){if(c&1&&(i(0,"option",69),r(1),k(2,"date"),n()),c&2){let e=a.$implicit;d("value",e.batchNumber),s(),q(" ",e.batchNumber," (",e.quantity," doses, expires ",D(2,4,e.expiryDate,"shortDate"),") ")}}function We(c,a){if(c&1&&(i(0,"span",68),r(1),n()),c&2){let e=l(2);s(),C(" ",e.getFieldError("batchNumber")," ")}}function je(c,a){c&1&&(i(0,"small",70),r(1," No batches available for this vaccine. Please receive stock first. "),n())}function Ye(c,a){if(c&1&&(i(0,"span",68),r(1),n()),c&2){let e=l(2);s(),C(" ",e.getFieldError("administeredDate")," ")}}function Ue(c,a){if(c&1&&(i(0,"span",68),r(1),n()),c&2){let e=l(2);s(),C(" ",e.getFieldError("administrationSite")," ")}}function He(c,a){c&1&&(i(0,"span",68),r(1," Severity is required "),n())}function Qe(c,a){c&1&&(i(0,"span",68),r(1," Description is required "),n())}function $e(c,a){if(c&1&&(i(0,"div",71)(1,"div",35)(2,"label",36),r(3,"Severity"),n(),i(4,"select",72)(5,"option",43),r(6,"Select Severity"),n(),i(7,"option",73),r(8,"Mild"),n(),i(9,"option",74),r(10,"Moderate"),n(),i(11,"option",75),r(12,"Severe"),n()(),_(13,He,2,0,"span",40),n(),i(14,"div",35)(15,"label",36),r(16,"Description"),n(),i(17,"textarea",76),r(18,"              "),n(),_(19,Qe,2,0,"span",40),n(),i(20,"div",35)(21,"label"),r(22,"Action Taken"),n(),i(23,"textarea",77),r(24,"              "),n()()()),c&2){let e,t,o=l(2);s(4),d("required",o.showAdverseEventForm),s(9),d("ngIf",((e=o.adverseEventForm.get("severity"))==null?null:e.invalid)&&((e=o.adverseEventForm.get("severity"))==null?null:e.touched)),s(4),d("required",o.showAdverseEventForm),s(2),d("ngIf",((t=o.adverseEventForm.get("description"))==null?null:t.invalid)&&((t=o.adverseEventForm.get("description"))==null?null:t.touched))}}function Je(c,a){if(c&1){let e=O();i(0,"div",30),p("click",function(){g(e);let o=l();return f(o.closeRecordModal())}),i(1,"div",31),p("click",function(o){return g(e),f(o.stopPropagation())}),i(2,"div",32)(3,"h2"),r(4,"\u{1F489} Record Vaccination"),n(),i(5,"button",33),p("click",function(){g(e);let o=l();return f(o.closeRecordModal())}),r(6,"\xD7"),n()(),i(7,"form",34),p("ngSubmit",function(){g(e);let o=l();return f(o.onSubmit())}),i(8,"div",35)(9,"label",36),r(10,"Patient"),n(),i(11,"input",37),E("ngModelChange",function(o){g(e);let m=l();return V(m.patientSearchQuery,o)||(m.patientSearchQuery=o),f(o)}),p("input",function(){g(e);let o=l();return f(o.searchPatients())}),n(),_(12,Ne,2,1,"div",38)(13,Te,4,1,"div",39)(14,Ae,2,1,"span",40),n(),i(15,"div",41)(16,"div",35)(17,"label",36),r(18,"Vaccine"),n(),i(19,"select",42),p("change",function(){g(e);let o=l();return f(o.onVaccineChange())}),i(20,"option",43),r(21,"Select Vaccine"),n(),_(22,Be,2,2,"option",44),n(),_(23,ze,2,1,"span",40),n(),i(24,"div",35)(25,"label",36),r(26,"Dose Number"),n(),y(27,"input",45),_(28,Le,2,1,"small",46)(29,qe,2,1,"span",40),n()(),i(30,"div",41)(31,"div",35)(32,"label",36),r(33,"Batch Number"),n(),i(34,"select",47),p("change",function(){g(e);let o=l();return f(o.onBatchChange())}),i(35,"option",43),r(36),n(),_(37,Ge,3,7,"option",44),n(),_(38,We,2,1,"span",40)(39,je,2,0,"small",46),n(),i(40,"div",35)(41,"label",36),r(42,"Administered Date"),n(),y(43,"input",48),_(44,Ye,2,1,"span",40),n()(),i(45,"div",35)(46,"label",36),r(47,"Administration Site"),n(),i(48,"select",49),p("change",function(){g(e);let o=l();return f(o.onAdministrationSiteChange())}),i(49,"option",50),r(50,"Left Arm"),n(),i(51,"option",51),r(52,"Right Arm"),n(),i(53,"option",52),r(54,"Left Thigh"),n(),i(55,"option",53),r(56,"Right Thigh"),n()(),_(57,Ue,2,1,"span",40),n(),i(58,"div",54)(59,"div",55)(60,"label",56)(61,"input",57),E("ngModelChange",function(o){g(e);let m=l();return V(m.showAdverseEventForm,o)||(m.showAdverseEventForm=o),f(o)}),p("change",function(){g(e);let o=l();return f(o.toggleAdverseEventForm())}),n(),i(62,"span",58),r(63,"\u26A0\uFE0F Report Adverse Event"),n()()()(),_(64,$e,25,4,"div",59),i(65,"div",35)(66,"label"),r(67,"Additional Notes (Optional)"),n(),y(68,"textarea",60),n(),i(69,"div",61)(70,"button",62),p("click",function(){g(e);let o=l();return f(o.closeRecordModal())}),r(71,"Cancel"),n(),i(72,"button",63),r(73),n()()()()()}if(c&2){let e,t=l();s(7),d("formGroup",t.vaccinationForm),s(4),S("ngModel",t.patientSearchQuery),d("ngModelOptions",F(24,T)),s(),d("ngIf",t.patientSearchResults.length>0),s(),d("ngIf",t.selectedPatient),s(),d("ngIf",t.isFieldInvalid("patientId")),s(8),d("ngForOf",t.availableVaccines),s(),d("ngIf",t.isFieldInvalid("vaccineId")),s(4),d("max",t.getMaxDoseForVaccine())("placeholder","Suggested: "+t.suggestedDose),s(),d("ngIf",t.suggestedDose>0),s(),d("ngIf",t.isFieldInvalid("doseNumber")),s(7),h(t.getBatchPlaceholderText()),s(),d("ngForOf",t.availableBatches),s(),d("ngIf",t.isFieldInvalid("batchNumber")),s(),d("ngIf",t.availableBatches.length===0&&!t.loadingBatches&&((e=t.vaccinationForm.get("vaccineId"))==null?null:e.value)),s(4),d("value",t.getTodayDate()),s(),d("ngIf",t.isFieldInvalid("administeredDate")),s(13),d("ngIf",t.isFieldInvalid("administrationSite")),s(4),S("ngModel",t.showAdverseEventForm),d("ngModelOptions",F(25,T)),s(3),d("ngIf",t.showAdverseEventForm),s(8),d("disabled",t.loading||t.vaccinationForm.invalid),s(),C(" ",t.loading?"Recording...":"Record Vaccination"," ")}}function Ke(c,a){if(c&1){let e=O();i(0,"div",30),p("click",function(){g(e);let o=l();return f(o.showStockWarning=!1)}),i(1,"div",78),p("click",function(o){return g(e),f(o.stopPropagation())}),i(2,"div",79),r(3,"\u26A0\uFE0F"),n(),i(4,"h3"),r(5,"Low Stock Warning"),n(),i(6,"p"),r(7),n(),i(8,"p"),r(9,"Contact facility manager for resupply."),n(),i(10,"div",80)(11,"button",81),p("click",function(){g(e);let o=l();return f(o.showStockWarning=!1)}),r(12,"Cancel Vaccination"),n(),i(13,"button",6),p("click",function(){g(e);let o=l();return f(o.confirmStockWarning())}),r(14,"Understood"),n()()()()}if(c&2){let e=l();s(7),h(e.stockWarningMessage)}}function Xe(c,a){if(c&1&&(i(0,"div",95)(1,"div",96),r(2,"\u{1F4E6}"),n(),i(3,"div",97)(4,"div",98),r(5,"Batch Number"),n(),i(6,"div",99),r(7),n()()()),c&2){let e=l(3);s(7),h(e.vaccinationForm.value.batchNumber)}}function Ze(c,a){if(c&1&&(i(0,"div",94)(1,"div",95)(2,"div",96),r(3,"\u{1F464}"),n(),i(4,"div",97)(5,"div",98),r(6,"Patient"),n(),i(7,"div",99),r(8),n()()(),i(9,"div",95)(10,"div",96),r(11,"\u{1F489}"),n(),i(12,"div",97)(13,"div",98),r(14,"Vaccine"),n(),i(15,"div",99),r(16),n()()(),i(17,"div",95)(18,"div",96),r(19,"\u{1F4C5}"),n(),i(20,"div",97)(21,"div",98),r(22,"Date Administered"),n(),i(23,"div",99),r(24),k(25,"date"),n()()(),_(26,Xe,8,1,"div",100),n()),c&2){let e=l(2);s(8),h(e.getPatientDisplayName()),s(8),B("",e.getVaccineName()," (Dose ",e.vaccinationForm.value.doseNumber,")"),s(8),h(D(25,5,e.vaccinationForm.value.administeredDate||e.vaccinationForm.value.administrationDate,"dd MMM yyyy")),s(2),d("ngIf",e.vaccinationForm.value.batchNumber)}}function et(c,a){if(c&1&&(i(0,"div",101)(1,"div",102)(2,"div",103),r(3,"\u{1F4C5}"),n(),i(4,"div",104)(5,"div",105),r(6,"Next Appointment Auto-Scheduled"),n(),i(7,"div",106),r(8),k(9,"date"),n(),i(10,"div",107)(11,"strong"),r(12),n(),r(13),y(14,"br"),r(15,"SMS reminder will be sent 3 days before "),n()()()()),c&2){let e=l(2);s(8),h(D(9,3,e.nextAppointmentDate,"dd MMM yyyy")),s(4),h(e.getVaccineName()),s(),C(" Dose ",(e.vaccinationForm.value.doseNumber||0)+1," ")}}function tt(c,a){if(c&1){let e=O();i(0,"div",30),p("click",function(){g(e);let o=l();return f(o.showSuccessModal=!1)}),i(1,"div",82),p("click",function(o){return g(e),f(o.stopPropagation())}),i(2,"div",83)(3,"div",84)(4,"div",85)(5,"span",86),r(6,"\u2713"),n()()(),i(7,"div",87)(8,"h2"),r(9,"\u{1F489} Vaccination Recorded Successfully!"),n(),i(10,"p",88),r(11,"The vaccination has been added to the patient's record"),n()(),i(12,"button",89),p("click",function(){g(e);let o=l();return f(o.showSuccessModal=!1)}),r(13,"\xD7"),n()(),i(14,"div",90),_(15,Ze,27,8,"div",91)(16,et,16,6,"div",92),n(),i(17,"div",93)(18,"button",81),p("click",function(){g(e);let o=l();return f(o.printCard())}),r(19,"\u{1F5A8}\uFE0F Print Vaccination Card"),n(),i(20,"button",6),p("click",function(){g(e);let o=l();return f(o.showSuccessModal=!1)}),i(21,"span"),r(22,"\u2713"),n(),r(23," Got it "),n()()()()}if(c&2){let e=l();s(15),d("ngIf",e.selectedPatient||e.patient),s(),d("ngIf",e.nextAppointmentDate)}}function nt(c,a){c&1&&y(0,"app-loader")}var Se=class c{constructor(a,e,t,o,m,v,I,u,P,A){this.fb=a;this.route=e;this.router=t;this.patientService=o;this.vaccinationService=m;this.adverseEventService=v;this.stockService=I;this.toastService=u;this.authService=P;this.cdr=A;this.vaccinationForm=this.fb.group({patientId:["",[b.required]],vaccineId:["",[b.required]],vaccine:[""],doseNumber:[1,[b.required,b.min(1)]],batchNumber:["",[b.required]],administeredDate:[x(new Date,"yyyy-MM-dd"),[b.required]],administrationDate:[new Date().toISOString().split("T")[0]],administrationSite:["LEFT_ARM",[b.required]],site:[""],adverseEventNotes:[""],adverseEvents:[""],markAdverseEvent:[!1],adverseEvent:this.fb.group({severity:[""],description:[""],actionTaken:[""]})}),this.adverseEventForm=this.vaccinationForm.get("adverseEvent"),this.vaccinationForm.get("vaccineId")?.valueChanges.subscribe(()=>{let R=this.vaccinationForm.get("doseNumber"),w=this.getMaxDoseForVaccine();R?.setValidators([b.required,b.min(1),b.max(w)]),R?.updateValueAndValidity()})}vaccinationForm;patient=null;loading=!1;showSuccessModal=!1;showStockWarning=!1;stockWarningMessage="";errorMessage="";vaccinations=[];filteredVaccinations=[];searchQuery="";filterDate=x(new Date,"yyyy-MM-dd");showRecordModal=!1;showOfflineBanner=!1;isLoadingData=!1;availableVaccines=[];availableBatches=[];patientSearchQuery="";patientSearchResults=[];selectedPatient=null;loadingBatches=!1;administrationSites=[{value:"LEFT_ARM",label:"Left Arm"},{value:"RIGHT_ARM",label:"Right Arm"},{value:"LEFT_THIGH",label:"Left Thigh"},{value:"RIGHT_THIGH",label:"Right Thigh"}];suggestedDose=1;nextAppointmentDate=null;showAdverseEventForm=!1;adverseEventForm;ngOnInit(){this.checkOfflineStatus();let a=this.route.snapshot.paramMap.get("patientId"),e=this.route.snapshot.queryParamMap.get("patientId"),t=a||e;t&&(this.loadPatient(t),this.selectedPatient={id:t},this.vaccinationForm.patchValue({patientId:t}),setTimeout(()=>{this.openRecordModal()},500)),this.loadVaccinations(),this.loadVaccines(),this.vaccinationForm.patchValue({administrationDate:new Date().toISOString().split("T")[0],administeredDate:x(new Date,"yyyy-MM-dd"),site:"LEFT_ARM"}),this.vaccinationForm.get("vaccineId")?.valueChanges.subscribe(o=>{if(o){let m=this.availableVaccines.find(v=>v.id===o);m&&(this.vaccinationForm.patchValue({vaccine:m.name,site:this.vaccinationForm.get("administrationSite")?.value||"LEFT_ARM"}),this.loadBatches(m.name),this.suggestNextDose(m.name))}}),this.vaccinationForm.statusChanges.subscribe(o=>{}),this.vaccinationForm.get("vaccine")?.valueChanges.subscribe(o=>{o&&(this.loadBatches(o),this.suggestNextDose(o))})}loadVaccinations(){if(this.isLoadingData)return;this.isLoadingData=!0,this.loading=!0,this.errorMessage="";let a=Date.now(),e=this.authService.getCurrentUser(),t=e?.facilityId;if(console.log("Loading vaccinations - User:",e,"Facility ID:",t),!t){console.warn("No facility ID available for user:",e),this.errorMessage="No facility ID available. Please ensure you are assigned to a facility.",this.vaccinations=[],this.filteredVaccinations=[],N(a,()=>{this.loading=!1,this.isLoadingData=!1,this.cdr.detectChanges()});return}this.vaccinationService.getVaccinationsByFacility(t).subscribe({next:o=>{console.log("Loaded vaccinations:",o),this.vaccinations=o||[],this.applyFilters(),N(a,()=>{this.loading=!1,this.isLoadingData=!1,this.cdr.detectChanges()})},error:o=>{console.error("Failed to load vaccinations:",o),this.errorMessage=o?.error?.message||"Failed to load vaccinations. Please try again.",this.vaccinations=[],this.filteredVaccinations=[],N(a,()=>{this.loading=!1,this.isLoadingData=!1,this.cdr.detectChanges()})}})}loadVaccines(){let e=this.authService.getCurrentUser()?.facilityId;if(!e){console.warn("No facility ID available for loading vaccines"),this.availableVaccines=[];return}this.vaccinationService.getAllVaccines().subscribe({next:t=>{let o=[],m=t.map(v=>this.stockService.getBatchesByVaccine(v.name,e).toPromise().then(I=>{(I?.filter(P=>(P.quantity||0)>0&&!P.isDepleted)||[]).length>0&&o.push(v)}).catch(()=>{o.push(v)}));Promise.all(m).then(()=>{this.availableVaccines=o.length>0?o:t,this.cdr.detectChanges()})},error:t=>{console.warn("Failed to load vaccines:",t),this.availableVaccines=[]}})}applyFilters(){let a=[...this.vaccinations];if(this.searchQuery.trim()){let e=this.searchQuery.toLowerCase();a=a.filter(t=>t.patientName?.toLowerCase().includes(e)||t.vaccineName?.toLowerCase().includes(e)||t.batchNumber?.toLowerCase().includes(e))}this.filterDate&&(a=a.filter(e=>(e.administeredDate?x(new Date(e.administeredDate),"yyyy-MM-dd"):"")===this.filterDate)),this.filteredVaccinations=a}onSearch(){this.applyFilters()}onDateChange(){this.applyFilters()}openRecordModal(){let a=this.route.snapshot.queryParamMap.get("patientId");a&&(this.loadPatient(a),this.selectedPatient={id:a},this.vaccinationForm.patchValue({patientId:a})),this.vaccinationForm.reset({patientId:a||"",doseNumber:1,administeredDate:x(new Date,"yyyy-MM-dd"),administrationDate:new Date().toISOString().split("T")[0],administrationSite:"LEFT_ARM",site:"LEFT_ARM",adverseEvent:{severity:"",description:"",actionTaken:""}}),this.showAdverseEventForm=!1,this.selectedPatient=a?this.selectedPatient:null,this.patientSearchResults=[],this.availableBatches=[],this.loadingBatches=!1,this.vaccinationForm.get("batchNumber")?.disable(),this.showRecordModal=!0,this.adverseEventForm&&this.adverseEventForm.reset({severity:"",description:"",actionTaken:""}),setTimeout(()=>{this.cdr.detectChanges()},100)}closeRecordModal(){this.showRecordModal=!1,this.showAdverseEventForm=!1,this.vaccinationForm.reset({doseNumber:1,administeredDate:x(new Date,"yyyy-MM-dd"),administrationDate:new Date().toISOString().split("T")[0],administrationSite:"LEFT_ARM",site:"LEFT_ARM",adverseEvent:{severity:"",description:"",actionTaken:""}}),this.adverseEventForm.get("severity")?.clearValidators(),this.adverseEventForm.get("description")?.clearValidators(),this.adverseEventForm.get("severity")?.updateValueAndValidity(),this.adverseEventForm.get("description")?.updateValueAndValidity(),this.selectedPatient=null,this.patientSearchResults=[],this.availableBatches=[]}toggleAdverseEventForm(){this.showAdverseEventForm=!this.showAdverseEventForm,this.showAdverseEventForm?(this.adverseEventForm.get("severity")?.setValidators([b.required]),this.adverseEventForm.get("description")?.setValidators([b.required]),this.adverseEventForm.get("severity")?.updateValueAndValidity(),this.adverseEventForm.get("description")?.updateValueAndValidity()):(this.adverseEventForm.get("severity")?.clearValidators(),this.adverseEventForm.get("description")?.clearValidators(),this.adverseEventForm.get("severity")?.updateValueAndValidity(),this.adverseEventForm.get("description")?.updateValueAndValidity(),this.adverseEventForm.reset())}searchPatients(){let a=this.patientSearchQuery.trim();if(a.length<2){this.patientSearchResults=[];return}this.patientService.searchPatients(a).subscribe({next:e=>{this.patientSearchResults=e.patients?.slice(0,10)||[]},error:e=>{console.warn("Failed to search patients:",e),this.patientSearchResults=[]}})}selectPatient(a){this.selectedPatient=a,this.patient=a,this.patientSearchQuery=a.fullName||`${a.firstName} ${a.lastName}`.trim(),this.patientSearchResults=[],this.vaccinationForm.patchValue({patientId:a.id||a.patientId});let e=this.vaccinationForm.get("vaccineId")?.value;if(e){let t=this.availableVaccines.find(o=>o.id===e);t&&this.suggestNextDose(t.name)}}onVaccineChange(){let a=this.vaccinationForm.get("vaccineId")?.value,e=this.vaccinationForm.get("batchNumber");if(a){let t=this.availableVaccines.find(o=>o.id===a);t?(this.vaccinationForm.patchValue({vaccine:t.name}),console.log("Loading batches for vaccine:",t.name),e?.disable(),this.loadBatches(t.name)):(console.warn("Vaccine not found in availableVaccines:",a),this.availableBatches=[],e?.disable())}else this.availableBatches=[],e?.disable();this.vaccinationForm.patchValue({batchNumber:""})}loadPatient(a){this.patientService.getPatientById(a).subscribe({next:e=>{this.patient=e},error:e=>{console.error("Failed to load patient:",e),this.patient=null,this.errorMessage=e.error?.message||"Failed to load patient details. Please try again."}})}loadBatches(a){let t=this.authService.getCurrentUser()?.facilityId,o=this.vaccinationForm.get("batchNumber");if(!t){console.warn("No facility ID available for loading batches"),this.availableBatches=[],o?.disable();return}this.loadingBatches=!0,this.availableBatches=[],console.log("Loading batches for:",{vaccineName:a,facilityId:t}),this.stockService.getBatchesByVaccine(a,t).subscribe({next:m=>{console.log("Batches received from backend:",m),setTimeout(()=>{this.availableBatches=m.map(v=>({id:v.id,vaccineId:v.vaccineId||"",vaccineName:v.vaccineName||a,batchNumber:v.batchNumber,quantity:v.quantity||0,expiryDate:v.expiryDate,receivedDate:v.receivedDate||v.expiryDate,facilityId:v.facilityId||t||"",isDepleted:v.isDepleted||!1})),console.log("Mapped batches:",this.availableBatches),this.loadingBatches=!1,this.availableBatches.length>0?o?.enable():o?.disable(),this.cdr.detectChanges()},0)},error:m=>{console.error("Failed to load batches:",m),console.error("Error details:",JSON.stringify(m,null,2)),setTimeout(()=>{this.availableBatches=[],this.loadingBatches=!1,o?.disable(),this.errorMessage="Failed to load batches. Please try again.",this.cdr.detectChanges()},0)}})}onBatchChange(){let a=this.vaccinationForm.get("batchNumber")?.value;if(a){let e=this.availableBatches.find(t=>t.batchNumber===a);e&&e.quantity<=0&&this.toastService.warning("Selected batch has no available doses")}}onAdministrationSiteChange(){let a=this.vaccinationForm.get("administrationSite")?.value;a&&this.vaccinationForm.patchValue({site:a},{emitEvent:!1})}getBatchPlaceholderText(){return this.loadingBatches?"Loading batches...":this.availableBatches.length===0&&this.vaccinationForm.get("vaccineId")?.value?"No batches available":"Select Batch"}suggestNextDose(a){if(this.patient||this.selectedPatient){let e=this.patient?.id||this.selectedPatient?.id;e&&this.vaccinationService.getPatientVaccinations(e).subscribe({next:t=>{let o=t.filter(m=>m.vaccineName?.toLowerCase()===a.toLowerCase()).map(m=>m.doseNumber||0);if(o.length>0){let m=Math.max(...o);this.suggestedDose=m+1,this.vaccinationForm.patchValue({doseNumber:this.suggestedDose})}else this.suggestedDose=1,this.vaccinationForm.patchValue({doseNumber:1})},error:t=>{console.warn("Could not load vaccination history for dose suggestion:",t),this.suggestedDose=1,this.vaccinationForm.patchValue({doseNumber:1})}})}else this.suggestedDose=1,this.vaccinationForm.patchValue({doseNumber:1})}onSubmit(){if(this.vaccinationForm.valid){let a=this.vaccinationForm.value.patientId||this.selectedPatient?.id||this.patient?.id;if(!a){this.toastService.error("Patient information is missing. Please select a patient.");return}let e=this.availableBatches.find(u=>u.batchNumber===this.vaccinationForm.value.batchNumber||u.id===this.vaccinationForm.value.batchNumber);if(e&&e.quantity<=15){this.stockWarningMessage=`Only ${e.quantity} doses remaining after this vaccination. Contact facility manager for resupply.`,this.showStockWarning=!0;return}this.loading=!0;let t=null;if(e?.id)t=typeof e.id=="number"?e.id:parseInt(e.id,10);else if(this.vaccinationForm.value.batchNumber){let u=parseInt(this.vaccinationForm.value.batchNumber,10);isNaN(u)||(t=u)}if(!t||isNaN(t)){this.toastService.error("Please select a valid batch number."),this.loading=!1;return}let o=this.authService.getCurrentUser(),m=this.selectedPatient?.facilityId||this.patient?.facilityId||o?.facilityId||"";if(!m){this.toastService.error("Facility ID is required. Please ensure you are assigned to a facility."),this.loading=!1;return}let v=this.vaccinationForm.value.vaccine||this.availableVaccines.find(u=>u.id===this.vaccinationForm.value.vaccineId)?.name||"",I={patientId:a,vaccineName:v,doseNumber:parseInt(this.vaccinationForm.value.doseNumber,10),batchId:t,dateAdministered:this.vaccinationForm.value.administeredDate||this.vaccinationForm.value.administrationDate,facilityId:m,administrationSite:this.vaccinationForm.value.administrationSite||"LEFT_ARM",notes:this.vaccinationForm.value.adverseEventNotes||this.vaccinationForm.value.adverseEvents||void 0};if(this.nextAppointmentDate=new Date,this.nextAppointmentDate.setDate(this.nextAppointmentDate.getDate()+28),X.useMockAuth){setTimeout(()=>{this.loading=!1,this.showSuccessModal=!0,this.toastService.success("Vaccination recorded successfully!"),this.closeRecordModal(),this.loadVaccinations()},500);return}this.vaccinationService.recordVaccination(I).subscribe({next:u=>{let P=this.vaccinationForm.get("adverseEvent")?.value;if(this.showAdverseEventForm&&P&&P.severity&&P.description){let A;if(u.id){let w=String(u.id),z=parseInt(w,10);isNaN(z)||(A=z)}let R={patientId:a,vaccinationId:A,severity:P.severity,description:P.description,actionTaken:P.actionTaken||void 0};this.adverseEventService.createAdverseEvent(R).subscribe({next:()=>{this.toastService.success("Vaccination and adverse event recorded successfully!"),this.loading=!1,this.showSuccessModal=!0,this.closeRecordModal(),this.loadVaccinations()},error:w=>{console.error("Failed to record adverse event:",w),this.toastService.warning("Vaccination recorded but failed to record adverse event. Please report it separately."),this.loading=!1,this.showSuccessModal=!0,this.closeRecordModal(),this.loadVaccinations()}})}else this.loading=!1,this.showSuccessModal=!0,u.nextAppointmentDate?this.nextAppointmentDate=new Date(u.nextAppointmentDate):(this.nextAppointmentDate=new Date,this.nextAppointmentDate.setDate(this.nextAppointmentDate.getDate()+28)),this.toastService.success("Vaccination recorded successfully!"),this.closeRecordModal(),this.loadVaccinations()},error:u=>{this.loading=!1,this.toastService.error("Failed to record vaccination. Please try again."),console.error("Error:",u)}})}else this.vaccinationForm.markAllAsTouched()}onCancel(){let e=this.authService.getCurrentUser()?.role?.toUpperCase();this.patient?e==="FACILITY_MANAGER"?this.router.navigate(["/manager/patients",this.patient.id]):e==="GOVERNMENT_OFFICIAL"?this.router.navigate(["/admin/patients",this.patient.id]):this.router.navigate(["/vaccinator/patients",this.patient.id]):e==="FACILITY_MANAGER"?this.router.navigate(["/manager/dashboard"]):e==="GOVERNMENT_OFFICIAL"?this.router.navigate(["/admin/dashboard"]):this.router.navigate(["/vaccinator/dashboard"])}onSaveAndScheduleNext(){this.onSubmit()}confirmStockWarning(){this.showStockWarning=!1,this.onSubmit()}getVaccineName(){let a=this.vaccinationForm.get("vaccineId")?.value,e=this.vaccinationForm.get("vaccine")?.value;return e||a&&Array.isArray(this.availableVaccines)&&this.availableVaccines.length>0&&this.availableVaccines.find(o=>o&&o.id===a)?.name||"Unknown Vaccine"}getPatientDisplayName(){return this.patient&&(this.patient.fullName||`${this.patient.firstName||""} ${this.patient.lastName||""}`.trim())||"Patient"}getPatientAge(){if(!this.patient?.birthDate&&!this.patient?.dateOfBirth)return"N/A";let a=this.patient.birthDate||this.patient.dateOfBirth||"";if(!a)return"N/A";try{let e=new Date(a),t=Math.floor((new Date().getTime()-e.getTime())/(1e3*60*60*24*30));return t<12?`${t} months`:`${Math.floor(t/12)} years`}catch{return"N/A"}}getMaxDoseForVaccine(){let a=this.vaccinationForm.get("vaccineId")?.value;if(!a)return 10;let e=this.availableVaccines.find(o=>o.id===a);if(!e)return 10;switch(e.name.toUpperCase()){case"BCG":return 1;case"OPV":return 4;case"DTP":case"PENTA":return 3;case"MEASLES":return 2;case"HEPATITIS B":return 3;case"ROTAVIRUS":return 2;case"PNEUMOCOCCAL":return 3;case"COVID-19":return 3;case"TETANUS":return 5;case"YELLOW FEVER":return 1;case"MENINGITIS":return 1;default:return 1}}getFieldError(a){let e=this.vaccinationForm.get(a);if(e?.errors&&e.touched){if(e.errors.required)return`${a} is required`;if(e.errors.min)return"Invalid value";if(e.errors.max)return`Maximum dose for this vaccine is ${this.getMaxDoseForVaccine()}`}return""}isFieldInvalid(a){let e=this.vaccinationForm.get(a);return!!(e?.invalid&&e.touched)}format=x;printCard(){window.print()}getTodayDate(){return new Date().toISOString().split("T")[0]}checkOfflineStatus(){this.showOfflineBanner=!(!(typeof window<"u"&&window.navigator)||window.navigator.onLine),typeof window<"u"&&(window.addEventListener("online",()=>{this.showOfflineBanner=!1}),window.addEventListener("offline",()=>{this.showOfflineBanner=!0}))}static \u0275fac=function(e){return new(e||c)(M(ue),M(Q),M($),M(xe),M(Oe),M(ye),M(we),M(Z),M(ee),M(W))};static \u0275cmp=L({type:c,selectors:[["app-record-vaccination"]],decls:26,vars:13,consts:[["pageTitle","Record Vaccination"],[1,"record-vaccination-page"],["class","offline-banner",4,"ngIf"],["type","error",3,"message","show","dismiss",4,"ngIf"],[1,"page-header"],[1,"subtitle"],[1,"btn","btn-primary",3,"click"],[1,"filters-card"],[1,"search-box"],[1,"search-icon"],["type","text","placeholder","Search by patient name, vaccine, or batch number...",1,"search-input",3,"ngModelChange","input","ngModel","ngModelOptions"],[1,"filter-group"],["type","date",1,"filter-select",3,"ngModelChange","change","ngModel","ngModelOptions"],["class","vaccinations-table-card",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[4,"ngIf"],[1,"offline-banner"],[1,"offline-icon"],["type","error",3,"dismiss","message","show"],[1,"vaccinations-table-card"],[1,"table-header"],[1,"table-container"],[1,"vaccinations-table"],[4,"ngFor","ngForOf"],[1,"dose-badge"],[1,"site-badge"],[1,"btn","btn-sm","btn-primary",3,"routerLink"],["colspan","7",1,"no-data"],[1,"empty-state"],[1,"empty-icon"],[1,"modal-overlay",3,"click"],[1,"modal-content","large",3,"click"],[1,"modal-header"],[1,"modal-close",3,"click"],[1,"modal-body",2,"max-height","80vh !important","overflow-y","auto !important","overflow-x","visible !important",3,"ngSubmit","formGroup"],[1,"form-group"],[1,"required"],["type","text","placeholder","Search patient by name or ID...",1,"form-input",3,"ngModelChange","input","ngModel","ngModelOptions"],["class","patient-results",4,"ngIf"],["class","selected-patient",4,"ngIf"],["class","error-text",4,"ngIf"],[1,"form-row"],["formControlName","vaccineId",1,"form-input",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","number","formControlName","doseNumber","min","1",1,"form-input",3,"max","placeholder"],["class","input-hint",4,"ngIf"],["formControlName","batchNumber",1,"form-input",3,"change"],["type","date","formControlName","administeredDate",1,"form-input",3,"value"],["formControlName","administrationSite",1,"form-input",3,"change"],["value","LEFT_ARM"],["value","RIGHT_ARM"],["value","LEFT_THIGH"],["value","RIGHT_THIGH"],[1,"form-group","adverse-event-toggle-section",2,"display","block !important","visibility","visible !important","position","relative !important","z-index","10 !important"],[1,"adverse-event-toggle",2,"display","block !important","visibility","visible !important"],[2,"display","flex !important","visibility","visible !important"],["type","checkbox","id","adverse-event-checkbox",2,"display","block !important","visibility","visible !important","opacity","1 !important",3,"ngModelChange","change","ngModel","ngModelOptions"],[2,"display","inline-block !important","visibility","visible !important"],["class","adverse-event-form","formGroupName","adverseEvent",4,"ngIf"],["formControlName","adverseEventNotes","rows","3","placeholder","Any additional notes or observations",1,"form-input"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"patient-results"],["class","patient-result-item",3,"click",4,"ngFor","ngForOf"],[1,"patient-result-item",3,"click"],[1,"selected-patient"],[1,"error-text"],[3,"value"],[1,"input-hint"],["formGroupName","adverseEvent",1,"adverse-event-form"],["formControlName","severity",1,"form-input",3,"required"],["value","MILD"],["value","MODERATE"],["value","SEVERE"],["formControlName","description","rows","4","placeholder","Describe the adverse event in detail...",1,"form-input",3,"required"],["formControlName","actionTaken","rows","3","placeholder","Describe any actions taken in response to the adverse event...",1,"form-input"],[1,"modal-content",3,"click"],[1,"warning-icon"],[1,"modal-actions"],[1,"btn","btn-secondary",3,"click"],[1,"modal-content","success-modal",3,"click"],[1,"modal-header","success-header"],[1,"success-icon-wrapper"],[1,"success-icon-circle"],[1,"success-checkmark"],[1,"modal-title-section"],[1,"success-subtitle"],["aria-label","Close",1,"modal-close",3,"click"],[1,"modal-body","success-body"],["class","success-details",4,"ngIf"],["class","next-appointment",4,"ngIf"],[1,"modal-footer","success-footer"],[1,"success-details"],[1,"detail-card"],[1,"detail-icon"],[1,"detail-content"],[1,"detail-label"],[1,"detail-value"],["class","detail-card",4,"ngIf"],[1,"next-appointment"],[1,"appointment-card"],[1,"appointment-icon"],[1,"appointment-content"],[1,"appointment-label"],[1,"appointment-date"],[1,"appointment-note"]],template:function(e,t){e&1&&(i(0,"app-layout",0)(1,"div",1),_(2,Ee,5,0,"div",2)(3,Fe,1,2,"app-alert",3),i(4,"div",4)(5,"div")(6,"h1"),r(7,"\u{1F489} Vaccination Records"),n(),i(8,"p",5),r(9,"Manage and record patient vaccinations"),n()(),i(10,"button",6),p("click",function(){return t.openRecordModal()}),r(11,"+ Record Vaccination"),n()(),i(12,"div",7)(13,"div",8)(14,"span",9),r(15,"\u{1F50D}"),n(),i(16,"input",10),E("ngModelChange",function(m){return V(t.searchQuery,m)||(t.searchQuery=m),m}),p("input",function(){return t.onSearch()}),n()(),i(17,"div",11)(18,"label"),r(19,"Date:"),n(),i(20,"input",12),E("ngModelChange",function(m){return V(t.filterDate,m)||(t.filterDate=m),m}),p("change",function(){return t.onDateChange()}),n()()(),_(21,Ie,25,3,"div",13)(22,Je,74,26,"div",14)(23,Ke,15,1,"div",14)(24,tt,24,2,"div",14)(25,nt,1,0,"app-loader",15),n()()),e&2&&(s(2),d("ngIf",t.showOfflineBanner),s(),d("ngIf",t.errorMessage),s(13),S("ngModel",t.searchQuery),d("ngModelOptions",F(11,T)),s(4),S("ngModel",t.filterDate),d("ngModelOptions",F(12,T)),s(),d("ngIf",!t.isLoadingData),s(),d("ngIf",t.showRecordModal),s(),d("ngIf",t.showStockWarning),s(),d("ngIf",t.showSuccessModal),s(),d("ngIf",t.isLoadingData))},dependencies:[H,j,Y,Ce,re,pe,ge,ne,ce,te,me,ie,oe,_e,ve,fe,le,de,se,he,ae,K,J,Pe,Me,be,U],styles:['.record-vaccination-page[_ngcontent-%COMP%]{padding:clamp(1.5rem,4vw,3rem);max-width:1920px;margin:0 auto;background:linear-gradient(135deg,#f8fafc,#f1f5f9);min-height:100vh}.record-vaccination-page[_ngcontent-%COMP%]   .offline-banner[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#fbbf24);color:#fff;padding:clamp(.75rem,2vw,1rem) clamp(1rem,3vw,1.5rem);border-radius:12px;margin-bottom:clamp(1rem,2vw,1.5rem);display:flex;align-items:center;gap:.75rem;font-weight:500;box-shadow:0 4px 12px #f59e0b33;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.record-vaccination-page[_ngcontent-%COMP%]   .offline-banner[_ngcontent-%COMP%]   .offline-icon[_ngcontent-%COMP%]{font-size:1.25rem}.record-vaccination-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:1.5rem;margin-bottom:2rem;padding-bottom:1.5rem;border-bottom:2px solid #e2e8f0;flex-wrap:wrap}.record-vaccination-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{flex:1;min-width:200px;display:flex;flex-direction:column;gap:.5rem}.record-vaccination-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.25rem;font-weight:700;color:#1e293b;margin:0}.record-vaccination-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#64748b;font-size:1rem;margin:0}.record-vaccination-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex-shrink:0}.record-vaccination-page[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:inline-flex!important;align-items:center!important;justify-content:center!important;padding:12px 24px!important;font-size:.875rem!important;font-weight:600!important;border-radius:10px!important;border:none!important;cursor:pointer!important;transition:all .3s cubic-bezier(.4,0,.2,1)!important;text-decoration:none!important;min-width:120px!important;gap:.5rem!important;box-sizing:border-box!important}.record-vaccination-page[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.6!important;cursor:not-allowed!important;transform:none!important}.record-vaccination-page[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb)!important;color:#fff!important;box-shadow:0 4px 12px #3b82f64d!important}.record-vaccination-page[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px)!important;box-shadow:0 6px 20px #3b82f666!important;background:linear-gradient(135deg,#2563eb,#1d4ed8)!important}.record-vaccination-page[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)!important}.record-vaccination-page[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]{background:#fff!important;color:#475569!important;border:2px solid #cbd5e1!important;box-shadow:0 2px 4px #0000000d!important}.record-vaccination-page[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#f1f5f9!important;border-color:#94a3b8!important;transform:translateY(-1px)!important;box-shadow:0 4px 8px #0000001a!important}.record-vaccination-page[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)!important}.record-vaccination-page[_ngcontent-%COMP%]   .btn.btn-sm[_ngcontent-%COMP%]{padding:8px 16px!important;font-size:.8125rem!important;min-width:80px!important}.record-vaccination-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#fafbfc);padding:clamp(1.25rem,3vw,1.75rem);border-radius:24px;box-shadow:0 4px 20px #0000000f;margin-bottom:2rem;display:flex;gap:1.5rem;align-items:center;flex-wrap:wrap;border:1px solid rgba(226,232,240,.8)}.record-vaccination-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]{flex:1;min-width:300px;position:relative}.record-vaccination-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#64748b;font-size:1.125rem}.record-vaccination-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px 12px 44px;border:2px solid #cbd5e1;border-radius:10px;font-size:.875rem;transition:all .2s}.record-vaccination-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 4px #3b82f61a}.record-vaccination-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.record-vaccination-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#475569;font-size:.9375rem}.record-vaccination-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%]{padding:12px 16px;border:2px solid #cbd5e1;border-radius:10px;font-size:.875rem;background:#fff;cursor:pointer}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#fafbfc);border-radius:24px;box-shadow:0 4px 20px #0000000f;overflow:hidden;border:1px solid rgba(226,232,240,.8)}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{padding:clamp(1.25rem,3vw,1.75rem);border-bottom:3px solid #e2e8f0;background:linear-gradient(135deg,#f8fafc,#f1f5f9)}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:800;background:linear-gradient(135deg,#1e293b,#475569);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow-x:auto}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]   .vaccinations-table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]   .vaccinations-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9)}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]   .vaccinations-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1.25rem 1.5rem;text-align:left;font-weight:800;color:#1e293b;font-size:.875rem;text-transform:uppercase;letter-spacing:.075em;border-bottom:3px solid #3b82f6}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]   .vaccinations-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .3s ease;background:#fff}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]   .vaccinations-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background:#fafbfc}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]   .vaccinations-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#eff6ff,#dbeafe);transform:scale(1.01)}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]   .vaccinations-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1.25rem 1.5rem;color:#475569;font-weight:600;vertical-align:middle;border-bottom:1px solid #e2e8f0;font-size:.9375rem}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]   .vaccinations-table[_ngcontent-%COMP%]   .dose-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;border-radius:12px;font-size:.75rem;font-weight:500;background:#3b82f61a;color:#3b82f6}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]   .vaccinations-table[_ngcontent-%COMP%]   .site-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;border-radius:12px;font-size:.75rem;font-weight:500;background:#10b9811a;color:#10b981;text-transform:capitalize}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]   .vaccinations-table[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{text-align:center;padding:3rem}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]   .vaccinations-table[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:3rem;display:block;margin-bottom:.5rem}.record-vaccination-page[_ngcontent-%COMP%]   .vaccinations-table-card[_ngcontent-%COMP%]   .vaccinations-table[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:1rem;margin:0}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#fafbfc);border-radius:20px;padding:clamp(1.5rem,4vw,3rem);box-shadow:0 4px 20px #0000000f,0 1px 4px #0000000a;border:2px solid rgba(59,130,246,.1);transition:all .3s cubic-bezier(.4,0,.2,1)}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]:hover{box-shadow:0 8px 30px #00000014,0 2px 8px #0000000f}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{margin-bottom:clamp(1.5rem,3vw,2.5rem)}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:clamp(1.25rem,3vw,1.75rem);font-weight:700;color:#1e293b;margin-bottom:clamp(1rem,2vw,1.5rem);padding-bottom:.75rem;border-bottom:3px solid #3b82f6;position:relative}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-3px;left:0;width:60px;height:3px;background:linear-gradient(90deg,#3b82f6,#60a5fa);border-radius:2px}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:clamp(1rem,2vw,1.5rem)}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.5rem;color:#334155;font-size:.875rem;letter-spacing:.3px}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label.required[_ngcontent-%COMP%]:after{content:" *";color:#ef4444;font-weight:700}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .dose-selector[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .dose-selector[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.25rem;border:2px solid #e2e8f0;border-radius:10px;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);background:#fff;font-weight:500;color:#475569}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .dose-selector[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]:hover{border-color:#cbd5e1;background:#f1f5f9}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .dose-selector[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked ~ span[_ngcontent-%COMP%], .record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .dose-selector[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]:has(input[type=radio]:checked){border-color:#3b82f6;background:linear-gradient(135deg,#eff6ff,#dbeafe);color:#1e293b;font-weight:600;box-shadow:0 2px 8px #3b82f633}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .dose-selector[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer;accent-color:#3b82f6}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1rem}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1rem;border:2px solid #e2e8f0;border-radius:10px;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);background:#fff;font-weight:500;color:#475569}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]:hover{border-color:#cbd5e1;background:#f1f5f9}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]:has(input[type=radio]:checked){border-color:#3b82f6;background:linear-gradient(135deg,#eff6ff,#dbeafe);color:#1e293b;font-weight:600;box-shadow:0 2px 8px #3b82f633}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer;accent-color:#3b82f6}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%], .record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #e2e8f0;border-radius:10px;font-size:1rem;transition:all .3s cubic-bezier(.4,0,.2,1);background:#fff;color:#1e293b}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:focus, .record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 4px #3b82f61a;transform:translateY(-1px)}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:hover:not(:focus), .record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover:not(:focus), .record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:hover:not(:focus){border-color:#cbd5e1}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input.error[_ngcontent-%COMP%], .record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select.error[_ngcontent-%COMP%], .record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea.error[_ngcontent-%COMP%]{border-color:#ef4444;box-shadow:0 0 0 4px #ef44441a}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:100px;resize:vertical}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-hint[_ngcontent-%COMP%]{display:block;margin-top:.5rem;font-size:.75rem;color:#64748b;font-style:italic}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-error[_ngcontent-%COMP%]{display:block;margin-top:.5rem;font-size:.875rem;color:#ef4444;font-weight:500;animation:_ngcontent-%COMP%_shake .3s ease-in-out}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-top:.75rem;cursor:pointer;padding:.5rem;border-radius:8px;transition:background .2s}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]:hover{background:#f1f5f9}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer;accent-color:#3b82f6}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;margin-top:clamp(1.5rem,3vw,2.5rem);padding-top:clamp(1rem,2vw,1.5rem);border-top:2px solid #e2e8f0}@media(max-width:768px){.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{flex-direction:column}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:12px 24px;border-radius:10px;font-weight:600;font-size:.875rem;transition:all .3s cubic-bezier(.4,0,.2,1);border:none;cursor:pointer;display:inline-flex;align-items:center;gap:.5rem}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff;box-shadow:0 4px 12px #3b82f64d}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #3b82f666}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:active{transform:translateY(0)}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#64748b,#475569);color:#fff;box-shadow:0 4px 12px #64748b33}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #64748b4d}.record-vaccination-page[_ngcontent-%COMP%]   .vaccination-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important}.modal-overlay[_ngcontent-%COMP%]{position:fixed!important;inset:0!important;background:#0009!important;-webkit-backdrop-filter:blur(4px)!important;backdrop-filter:blur(4px)!important;display:flex!important;align-items:center!important;justify-content:center!important;z-index:10000!important;animation:_ngcontent-%COMP%_fadeIn .3s ease-out!important}.modal-content[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#fafbfc)!important;border-radius:20px!important;padding:0!important;max-width:600px!important;width:90%!important;max-height:90vh!important;overflow:hidden!important;box-shadow:0 20px 60px #0000004d!important;border:2px solid rgba(59,130,246,.2)!important;animation:_ngcontent-%COMP%_slideUp .3s ease-out!important;position:relative!important;display:flex!important;flex-direction:column!important}.modal-content.large[_ngcontent-%COMP%]{max-width:800px!important}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:2px solid #e2e8f0;background:linear-gradient(135deg,#f8fafc,#fff);border-radius:20px 20px 0 0}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:700;color:#1e293b;display:flex;align-items:center;gap:.5rem}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:clamp(1.25rem,3vw,1.75rem);font-weight:700;color:#1e293b;margin:0}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]{background:none;border:none;font-size:2rem;color:#64748b;cursor:pointer;width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:8px;transition:all .2s}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]:hover{background:#f1f5f9;color:#1e293b;transform:rotate(90deg)}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:1.5rem!important;background:#fff!important;overflow-y:auto!important;overflow-x:visible!important;flex:1!important}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .patient-results[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;background:#fff;border:2px solid #e2e8f0;border-radius:10px;margin-top:.5rem;max-height:200px;overflow-y:auto;box-shadow:0 4px 12px #0000001a;z-index:10}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .patient-results[_ngcontent-%COMP%]   .patient-result-item[_ngcontent-%COMP%]{padding:.75rem 1rem;cursor:pointer;transition:all .2s;border-bottom:1px solid #f1f5f9}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .patient-results[_ngcontent-%COMP%]   .patient-result-item[_ngcontent-%COMP%]:hover{background:#f1f5f9}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .patient-results[_ngcontent-%COMP%]   .patient-result-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .selected-patient[_ngcontent-%COMP%]{margin-top:.5rem;padding:.75rem;background:#eff6ff;border-radius:8px;color:#1e40af;font-size:.875rem}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;margin-bottom:1.5rem}@media(max-width:768px){.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem;position:relative}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.5rem;color:#334155;font-size:.875rem}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label.required[_ngcontent-%COMP%]:after{content:" *";color:#ef4444;font-weight:700}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #e2e8f0;border-radius:10px;font-size:.875rem;transition:all .3s cubic-bezier(.4,0,.2,1);background:#fff;color:#1e293b;box-sizing:border-box}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 4px #3b82f61a;transform:translateY(-1px)}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:hover:not(:focus){border-color:#cbd5e1}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input.error[_ngcontent-%COMP%]{border-color:#ef4444;box-shadow:0 0 0 4px #ef44441a}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]::placeholder{color:#94a3b8}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-text[_ngcontent-%COMP%]{display:block;color:#ef4444;font-size:.75rem;margin-top:.25rem;font-weight:500}.modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{display:flex!important;justify-content:flex-end!important;gap:1rem!important;padding:1.5rem!important;border-top:2px solid #e2e8f0!important;background:linear-gradient(135deg,#f8fafc,#f1f5f9)!important;margin-top:1.5rem!important;border-radius:0 0 20px 20px!important;flex-shrink:0!important}.modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:120px!important}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-5px)}75%{transform:translate(5px)}}.modal-content.success-modal[_ngcontent-%COMP%]{max-width:550px!important;border:2px solid rgba(76,175,80,.3)!important}.modal-content.success-modal[_ngcontent-%COMP%]   .success-header[_ngcontent-%COMP%]{position:relative!important;background:linear-gradient(135deg,#d1fae5,#a7f3d0)!important;padding:2rem 1.5rem!important;border-bottom:3px solid #4caf50!important}.modal-content.success-modal[_ngcontent-%COMP%]   .success-header[_ngcontent-%COMP%]   .success-icon-wrapper[_ngcontent-%COMP%]{position:absolute;top:-30px;left:50%;transform:translate(-50%);z-index:1}.modal-content.success-modal[_ngcontent-%COMP%]   .success-header[_ngcontent-%COMP%]   .success-icon-circle[_ngcontent-%COMP%]{width:80px;height:80px;background:linear-gradient(135deg,#4caf50,#388e3c);border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 8px 24px #4caf5066;animation:_ngcontent-%COMP%_scaleIn .4s cubic-bezier(.34,1.56,.64,1)}.modal-content.success-modal[_ngcontent-%COMP%]   .success-header[_ngcontent-%COMP%]   .success-icon-circle[_ngcontent-%COMP%]   .success-checkmark[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;font-weight:700;line-height:1}.modal-content.success-modal[_ngcontent-%COMP%]   .success-header[_ngcontent-%COMP%]   .modal-title-section[_ngcontent-%COMP%]{text-align:center;width:100%;margin-top:2rem}.modal-content.success-modal[_ngcontent-%COMP%]   .success-header[_ngcontent-%COMP%]   .modal-title-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#1e293b;margin:0 0 .5rem;display:block}.modal-content.success-modal[_ngcontent-%COMP%]   .success-header[_ngcontent-%COMP%]   .modal-title-section[_ngcontent-%COMP%]   .success-subtitle[_ngcontent-%COMP%]{color:#64748b;font-size:.875rem;margin:0;font-weight:500}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-body.success-body[_ngcontent-%COMP%]{padding:2rem 1.5rem!important;background:#fff!important}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-body.success-body[_ngcontent-%COMP%]   .success-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-body.success-body[_ngcontent-%COMP%]   .success-details[_ngcontent-%COMP%]   .detail-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem;background:linear-gradient(135deg,#f8fafc,#f1f5f9);border-radius:12px;border:1px solid #e2e8f0;transition:all .3s ease}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-body.success-body[_ngcontent-%COMP%]   .success-details[_ngcontent-%COMP%]   .detail-card[_ngcontent-%COMP%]:hover{transform:translate(4px);box-shadow:0 4px 12px #00000014}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-body.success-body[_ngcontent-%COMP%]   .success-details[_ngcontent-%COMP%]   .detail-card[_ngcontent-%COMP%]   .detail-icon[_ngcontent-%COMP%]{font-size:2rem;width:50px;height:50px;display:flex;align-items:center;justify-content:center;background:#fff;border-radius:12px;flex-shrink:0}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-body.success-body[_ngcontent-%COMP%]   .success-details[_ngcontent-%COMP%]   .detail-card[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]{flex:1}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-body.success-body[_ngcontent-%COMP%]   .success-details[_ngcontent-%COMP%]   .detail-card[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b;font-weight:600;text-transform:uppercase;letter-spacing:.05em;margin-bottom:.25rem}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-body.success-body[_ngcontent-%COMP%]   .success-details[_ngcontent-%COMP%]   .detail-card[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{font-size:1rem;color:#1e293b;font-weight:700}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-body.success-body[_ngcontent-%COMP%]   .next-appointment[_ngcontent-%COMP%]{margin-top:1.5rem}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-body.success-body[_ngcontent-%COMP%]   .next-appointment[_ngcontent-%COMP%]   .appointment-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1.25rem;background:linear-gradient(135deg,#eff6ff,#dbeafe);border-radius:12px;border:2px solid #3b82f6}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-body.success-body[_ngcontent-%COMP%]   .next-appointment[_ngcontent-%COMP%]   .appointment-card[_ngcontent-%COMP%]   .appointment-icon[_ngcontent-%COMP%]{font-size:2.5rem;width:60px;height:60px;display:flex;align-items:center;justify-content:center;background:#fff;border-radius:12px;flex-shrink:0}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-body.success-body[_ngcontent-%COMP%]   .next-appointment[_ngcontent-%COMP%]   .appointment-card[_ngcontent-%COMP%]   .appointment-content[_ngcontent-%COMP%]{flex:1}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-body.success-body[_ngcontent-%COMP%]   .next-appointment[_ngcontent-%COMP%]   .appointment-card[_ngcontent-%COMP%]   .appointment-content[_ngcontent-%COMP%]   .appointment-label[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b;font-weight:600;text-transform:uppercase;letter-spacing:.05em;margin-bottom:.5rem}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-body.success-body[_ngcontent-%COMP%]   .next-appointment[_ngcontent-%COMP%]   .appointment-card[_ngcontent-%COMP%]   .appointment-content[_ngcontent-%COMP%]   .appointment-date[_ngcontent-%COMP%]{font-size:1.25rem;color:#1e40af;font-weight:700;margin-bottom:.25rem}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-body.success-body[_ngcontent-%COMP%]   .next-appointment[_ngcontent-%COMP%]   .appointment-card[_ngcontent-%COMP%]   .appointment-content[_ngcontent-%COMP%]   .appointment-note[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b;font-style:italic}.modal-content.success-modal[_ngcontent-%COMP%]   .success-footer[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9)!important;border-top:2px solid #e2e8f0!important;padding:1.5rem!important;justify-content:flex-end!important;gap:1rem!important}.modal-content.success-modal[_ngcontent-%COMP%]   .success-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:150px!important;font-size:1rem!important;padding:14px 28px!important}.modal-content.success-modal[_ngcontent-%COMP%]   .success-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:.5rem;font-size:1.2rem}.modal-content.success-modal[_ngcontent-%COMP%]   .adverse-event-toggle-section[_ngcontent-%COMP%]{margin:1.5rem 0;position:relative;z-index:1;display:block!important;visibility:visible!important}.modal-content.success-modal[_ngcontent-%COMP%]   .adverse-event-toggle[_ngcontent-%COMP%]{position:relative;z-index:1;display:block!important;visibility:visible!important}.modal-content.success-modal[_ngcontent-%COMP%]   .adverse-event-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex!important;align-items:center;gap:.75rem;cursor:pointer;font-weight:600;color:#334155;font-size:.9375rem;padding:.75rem;background:linear-gradient(135deg,#fef2f2,#fee2e2);border-radius:10px;border:2px solid #fecaca;transition:all .3s ease;visibility:visible!important;opacity:1!important}.modal-content.success-modal[_ngcontent-%COMP%]   .adverse-event-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#fee2e2,#fecaca);border-color:#f87171}.modal-content.success-modal[_ngcontent-%COMP%]   .adverse-event-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer;accent-color:#dc2626;display:block!important;visibility:visible!important;opacity:1!important}.modal-content.success-modal[_ngcontent-%COMP%]   .adverse-event-form[_ngcontent-%COMP%]{margin-top:1.5rem;padding:1.5rem;background:linear-gradient(135deg,#fef2f2,#fee2e2);border-radius:12px;border:2px solid #fecaca;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.modal-content.success-modal[_ngcontent-%COMP%]   .adverse-event-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.modal-content.success-modal[_ngcontent-%COMP%]   .adverse-event-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}.modal-content.success-modal[_ngcontent-%COMP%]   .adverse-event-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#991b1b;font-weight:600}.modal-content.success-modal[_ngcontent-%COMP%]   .adverse-event-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{background:#fff;border-color:#fca5a5}.modal-content.success-modal[_ngcontent-%COMP%]   .adverse-event-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:focus{border-color:#dc2626;box-shadow:0 0 0 3px #dc26261a}.modal-content.success-modal[_ngcontent-%COMP%]   .adverse-event-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea.form-input[_ngcontent-%COMP%]{resize:vertical;min-height:100px}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:translate(-50%) scale(0)}to{opacity:1;transform:translate(-50%) scale(1)}}']})};export{Se as RecordVaccinationComponent};
