2025-12-05 05:48:22 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=6h45m11s409ms542Âµs100ns).
2025-12-05 05:48:29 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /auth/logout
2025-12-05 05:48:29 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/logout
2025-12-05 05:48:29 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /auth/logout, Auth header present: true
2025-12-05 05:48:29 [http-nio-8080-exec-10] ERROR c.i.a.s.JwtAuthenticationFilter - Cannot set user authentication: JWT expired at 2025-12-04T22:13:58Z. Current time: 2025-12-05T04:48:29Z, a difference of 23671678 milliseconds.  Allowed clock skew: 0 milliseconds.
io.jsonwebtoken.ExpiredJwtException: JWT expired at 2025-12-04T22:13:58Z. Current time: 2025-12-05T04:48:29Z, a difference of 23671678 milliseconds.  Allowed clock skew: 0 milliseconds.
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:427)
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:529)
	at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:589)
	at com.immunizationdb.auth.security.JwtService.extractAllClaims(JwtService.java:113)
	at com.immunizationdb.auth.security.JwtService.extractClaim(JwtService.java:41)
	at com.immunizationdb.auth.security.JwtService.extractUsername(JwtService.java:34)
	at com.immunizationdb.auth.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713)
	at com.immunizationdb.auth.security.JwtAuthenticationFilter$$SpringCGLIB$$0.doFilterInternal(<generated>)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-05 05:48:29 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-05 05:48:29 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-12-05 05:48:29 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /error
2025-12-05 05:48:29 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-05 05:48:29 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-12-05 05:48:32 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /auth/login
2025-12-05 05:48:32 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2025-12-05 05:48:32 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-05 05:48:32 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-05 05:48:32 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-12-05 05:48:32 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.auth.controller.AuthController#login(LoginRequest)
2025-12-05 05:48:32 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(username=facility.manager, password=Password123!)]
2025-12-05 05:48:32 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:48:32 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:48:34 [http-nio-8080-exec-8] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-12-05 05:48:34 [http-nio-8080-exec-8] INFO  c.i.auth.service.AuthService - User facility.manager logged in successfully
2025-12-05 05:48:34 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:48:34 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [LoginResponse(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJmYWNpbGl0eS5tYW5hZ2VyIiwiaWF0IjoxNzY0OTEwMTE0LCJ (truncated)...]
2025-12-05 05:48:34 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:48:34 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /reports/dashboard/FAC001
2025-12-05 05:48:34 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /inventory/batches/available/FAC001
2025-12-05 05:48:34 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /campaigns/active?facilityId=FAC001
2025-12-05 05:48:34 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /inventory/batches/available/FAC001
2025-12-05 05:48:34 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /reports/dashboard/FAC001
2025-12-05 05:48:34 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /campaigns/active?facilityId=FAC001
2025-12-05 05:48:34 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /inventory/batches/available/FAC001, Auth header present: true
2025-12-05 05:48:34 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /reports/dashboard/FAC001, Auth header present: true
2025-12-05 05:48:34 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /campaigns/active, Auth header present: true
2025-12-05 05:48:34 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2025-12-05 05:48:34 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2025-12-05 05:48:34 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:48:34 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2025-12-05 05:48:34 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:48:34 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2025-12-05 05:48:34 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:48:34 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2025-12-05 05:48:34 [http-nio-8080-exec-1] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2025-12-05 05:48:34 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2025-12-05 05:48:34 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /inventory/batches/available/FAC001
2025-12-05 05:48:34 [http-nio-8080-exec-6] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2025-12-05 05:48:34 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/inventory/batches/available/FAC001", parameters={}
2025-12-05 05:48:35 [http-nio-8080-exec-2] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2025-12-05 05:48:35 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.InventoryController#getAvailableBatches(String)
2025-12-05 05:48:35 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /campaigns/active?facilityId=FAC001
2025-12-05 05:48:35 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getAvailableBatches(java.lang.String); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2025-12-05 05:48:35 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/campaigns/active?facilityId=FAC001", parameters={masked}
2025-12-05 05:48:35 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.campaign.controller.CampaignController#getActiveCampaigns(String)
2025-12-05 05:48:35 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /reports/dashboard/FAC001
2025-12-05 05:48:35 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/dashboard/FAC001", parameters={}
2025-12-05 05:48:35 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getAvailableBatches(java.lang.String); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2025-12-05 05:48:35 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.campaign.controller.CampaignController.getActiveCampaigns(java.lang.String); target is of class [com.immunizationdb.campaign.controller.CampaignController]
2025-12-05 05:48:35 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.reporting.controller.ReportingController#getDashboardStats(String)
2025-12-05 05:48:35 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.quantity_remaining>0 
        and vb1_0.expiry_date>? 
    order by
        vb1_0.expiry_date
2025-12-05 05:48:35 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.campaign.controller.CampaignController.getActiveCampaigns(java.lang.String); target is of class [com.immunizationdb.campaign.controller.CampaignController]
2025-12-05 05:48:35 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.reporting.controller.ReportingController.getDashboardStats(java.lang.String); target is of class [com.immunizationdb.reporting.controller.ReportingController]
2025-12-05 05:48:35 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.reporting.controller.ReportingController.getDashboardStats(java.lang.String); target is of class [com.immunizationdb.reporting.controller.ReportingController]
2025-12-05 05:48:35 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:48:35 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.description,
        c1_0.district_id,
        c1_0.end_date,
        c1_0.facility_id,
        c1_0.name,
        c1_0.national_id,
        c1_0.start_date,
        c1_0.status,
        c1_0.target_age_group,
        c1_0.target_population,
        c1_0.updated_at,
        c1_0.vaccinated_count,
        c1_0.vaccine_name 
    from
        campaigns c1_0 
    where
        c1_0.facility_id=? 
        and ? between c1_0.start_date and c1_0.end_date 
        and c1_0.status='ACTIVE'
2025-12-05 05:48:35 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccineBatchResponse(id=17, batchNumber=BATCH-ROT-0017, vaccineName=Rotavirus, manufacturer=Merck,  (truncated)...]
2025-12-05 05:48:35 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(p1_0.id) 
    from
        patients p1_0 
    where
        p1_0.facility_id=? 
        and p1_0.deleted=false
2025-12-05 05:48:35 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(v1_0.id) 
    from
        vaccinations v1_0 
    where
        v1_0.facility_id=? 
        and v1_0.date_administered between ? and ?
2025-12-05 05:48:35 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:48:35 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CampaignResponse(id=8, name=Rotavirus Immunization Drive, description=Campaign targeting School-age (truncated)...]
2025-12-05 05:48:35 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:48:35 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.quantity_remaining>0 
        and vb1_0.expiry_date>? 
    order by
        vb1_0.expiry_date
2025-12-05 05:48:35 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:48:35 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.expiry_date between ? and ? 
        and vb1_0.quantity_remaining>0
2025-12-05 05:48:35 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.description,
        c1_0.district_id,
        c1_0.end_date,
        c1_0.facility_id,
        c1_0.name,
        c1_0.national_id,
        c1_0.start_date,
        c1_0.status,
        c1_0.target_age_group,
        c1_0.target_population,
        c1_0.updated_at,
        c1_0.vaccinated_count,
        c1_0.vaccine_name 
    from
        campaigns c1_0 
    where
        c1_0.facility_id=? 
        and ? between c1_0.start_date and c1_0.end_date 
        and c1_0.status='ACTIVE'
2025-12-05 05:48:35 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:48:35 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [DashboardStatsResponse(totalPatients=35, totalVaccinations=null, vaccinationsThisMonth=18, activeCam (truncated)...]
2025-12-05 05:48:35 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:49:26 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /auth/logout
2025-12-05 05:49:26 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/logout
2025-12-05 05:49:26 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /auth/logout, Auth header present: true
2025-12-05 05:49:26 [http-nio-8080-exec-8] ERROR c.i.a.s.JwtAuthenticationFilter - Cannot set user authentication: JWT expired at 2025-12-04T22:18:46Z. Current time: 2025-12-05T04:49:26Z, a difference of 23440369 milliseconds.  Allowed clock skew: 0 milliseconds.
io.jsonwebtoken.ExpiredJwtException: JWT expired at 2025-12-04T22:18:46Z. Current time: 2025-12-05T04:49:26Z, a difference of 23440369 milliseconds.  Allowed clock skew: 0 milliseconds.
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:427)
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:529)
	at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:589)
	at com.immunizationdb.auth.security.JwtService.extractAllClaims(JwtService.java:113)
	at com.immunizationdb.auth.security.JwtService.extractClaim(JwtService.java:41)
	at com.immunizationdb.auth.security.JwtService.extractUsername(JwtService.java:34)
	at com.immunizationdb.auth.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713)
	at com.immunizationdb.auth.security.JwtAuthenticationFilter$$SpringCGLIB$$0.doFilterInternal(<generated>)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-05 05:49:26 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-05 05:49:26 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-12-05 05:49:26 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /error
2025-12-05 05:49:26 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-05 05:49:26 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-12-05 05:49:28 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /auth/login
2025-12-05 05:49:29 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2025-12-05 05:49:29 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-05 05:49:29 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-05 05:49:29 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-12-05 05:49:29 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.auth.controller.AuthController#login(LoginRequest)
2025-12-05 05:49:29 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(username=gov.official, password=Password123!)]
2025-12-05 05:49:29 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:49:29 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:49:30 [http-nio-8080-exec-5] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-12-05 05:49:30 [http-nio-8080-exec-5] INFO  c.i.auth.service.AuthService - User gov.official logged in successfully
2025-12-05 05:49:30 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:49:30 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [LoginResponse(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJnb3Yub2ZmaWNpYWwiLCJpYXQiOjE3NjQ5MTAxNzAsImV4cCI (truncated)...]
2025-12-05 05:49:30 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:49:30 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /reports/national-stats
2025-12-05 05:49:30 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /campaigns/active
2025-12-05 05:49:30 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /reports/national-stats
2025-12-05 05:49:30 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /campaigns/active
2025-12-05 05:49:30 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /reports/national-stats, Auth header present: true
2025-12-05 05:49:30 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /campaigns/active, Auth header present: true
2025-12-05 05:49:30 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: gov.official
2025-12-05 05:49:30 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: gov.official
2025-12-05 05:49:30 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:49:30 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:49:30 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: gov.official, authorities: [ROLE_GOVERNMENT_OFFICIAL]
2025-12-05 05:49:30 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: gov.official, authorities: [ROLE_GOVERNMENT_OFFICIAL]
2025-12-05 05:49:31 [http-nio-8080-exec-10] INFO  c.i.a.s.JwtAuthenticationFilter - User gov.official authenticated successfully with authorities: [ROLE_GOVERNMENT_OFFICIAL]
2025-12-05 05:49:31 [http-nio-8080-exec-2] INFO  c.i.a.s.JwtAuthenticationFilter - User gov.official authenticated successfully with authorities: [ROLE_GOVERNMENT_OFFICIAL]
2025-12-05 05:49:31 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /reports/national-stats
2025-12-05 05:49:31 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /campaigns/active
2025-12-05 05:49:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/national-stats", parameters={}
2025-12-05 05:49:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.reporting.controller.ReportingController#getNationalStatistics()
2025-12-05 05:49:31 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/campaigns/active", parameters={}
2025-12-05 05:49:31 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.reporting.controller.ReportingController.getNationalStatistics(); target is of class [com.immunizationdb.reporting.controller.ReportingController]
2025-12-05 05:49:31 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.campaign.controller.CampaignController#getActiveCampaigns(String)
2025-12-05 05:49:31 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.reporting.controller.ReportingController.getNationalStatistics(); target is of class [com.immunizationdb.reporting.controller.ReportingController]
2025-12-05 05:49:31 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.campaign.controller.CampaignController.getActiveCampaigns(java.lang.String); target is of class [com.immunizationdb.campaign.controller.CampaignController]
2025-12-05 05:49:31 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.campaign.controller.CampaignController.getActiveCampaigns(java.lang.String); target is of class [com.immunizationdb.campaign.controller.CampaignController]
2025-12-05 05:49:31 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.description,
        c1_0.district_id,
        c1_0.end_date,
        c1_0.facility_id,
        c1_0.name,
        c1_0.national_id,
        c1_0.start_date,
        c1_0.status,
        c1_0.target_age_group,
        c1_0.target_population,
        c1_0.updated_at,
        c1_0.vaccinated_count,
        c1_0.vaccine_name 
    from
        campaigns c1_0 
    where
        ? between c1_0.start_date and c1_0.end_date 
        and c1_0.status='ACTIVE'
2025-12-05 05:49:31 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:49:31 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CampaignResponse(id=8, name=Rotavirus Immunization Drive, description=Campaign targeting School-age (truncated)...]
2025-12-05 05:49:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0
2025-12-05 05:49:31 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:49:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        patients p1_0
2025-12-05 05:49:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        vaccinations v1_0
2025-12-05 05:49:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.description,
        c1_0.district_id,
        c1_0.end_date,
        c1_0.facility_id,
        c1_0.name,
        c1_0.national_id,
        c1_0.start_date,
        c1_0.status,
        c1_0.target_age_group,
        c1_0.target_population,
        c1_0.updated_at,
        c1_0.vaccinated_count,
        c1_0.vaccine_name 
    from
        campaigns c1_0 
    where
        ? between c1_0.start_date and c1_0.end_date 
        and c1_0.status='ACTIVE'
2025-12-05 05:49:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0
2025-12-05 05:49:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0
2025-12-05 05:49:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=?
2025-12-05 05:49:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=?
2025-12-05 05:49:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=?
2025-12-05 05:49:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:49:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [NationalStatisticsResponse(totalFacilities=3, totalVaccineTypes=8, totalDosesAvailable=32768, totalP (truncated)...]
2025-12-05 05:49:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:50:36 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /auth/health
2025-12-05 05:50:36 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-05 05:50:36 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /auth/health
2025-12-05 05:50:36 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/health", parameters={}
2025-12-05 05:50:36 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.auth.controller.AuthController#health()
2025-12-05 05:50:36 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-05 05:50:36 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [MessageResponse[message=Authentication service is running]]
2025-12-05 05:50:36 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:51:11 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /reports/national-stats
2025-12-05 05:51:11 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /campaigns/active
2025-12-05 05:51:11 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /reports/national-stats, Auth header present: true
2025-12-05 05:51:11 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /campaigns/active, Auth header present: true
2025-12-05 05:51:11 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: gov.official
2025-12-05 05:51:11 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: gov.official
2025-12-05 05:51:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:51:11 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:51:11 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: gov.official, authorities: [ROLE_GOVERNMENT_OFFICIAL]
2025-12-05 05:51:11 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: gov.official, authorities: [ROLE_GOVERNMENT_OFFICIAL]
2025-12-05 05:51:11 [http-nio-8080-exec-8] INFO  c.i.a.s.JwtAuthenticationFilter - User gov.official authenticated successfully with authorities: [ROLE_GOVERNMENT_OFFICIAL]
2025-12-05 05:51:11 [http-nio-8080-exec-4] INFO  c.i.a.s.JwtAuthenticationFilter - User gov.official authenticated successfully with authorities: [ROLE_GOVERNMENT_OFFICIAL]
2025-12-05 05:51:11 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /reports/national-stats
2025-12-05 05:51:11 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/national-stats", parameters={}
2025-12-05 05:51:11 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /campaigns/active
2025-12-05 05:51:11 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/campaigns/active", parameters={}
2025-12-05 05:51:11 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.reporting.controller.ReportingController#getNationalStatistics()
2025-12-05 05:51:11 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.campaign.controller.CampaignController#getActiveCampaigns(String)
2025-12-05 05:51:11 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.reporting.controller.ReportingController.getNationalStatistics(); target is of class [com.immunizationdb.reporting.controller.ReportingController]
2025-12-05 05:51:11 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.campaign.controller.CampaignController.getActiveCampaigns(java.lang.String); target is of class [com.immunizationdb.campaign.controller.CampaignController]
2025-12-05 05:51:11 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.reporting.controller.ReportingController.getNationalStatistics(); target is of class [com.immunizationdb.reporting.controller.ReportingController]
2025-12-05 05:51:11 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.campaign.controller.CampaignController.getActiveCampaigns(java.lang.String); target is of class [com.immunizationdb.campaign.controller.CampaignController]
2025-12-05 05:51:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0
2025-12-05 05:51:11 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.description,
        c1_0.district_id,
        c1_0.end_date,
        c1_0.facility_id,
        c1_0.name,
        c1_0.national_id,
        c1_0.start_date,
        c1_0.status,
        c1_0.target_age_group,
        c1_0.target_population,
        c1_0.updated_at,
        c1_0.vaccinated_count,
        c1_0.vaccine_name 
    from
        campaigns c1_0 
    where
        ? between c1_0.start_date and c1_0.end_date 
        and c1_0.status='ACTIVE'
2025-12-05 05:51:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        patients p1_0
2025-12-05 05:51:11 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:51:11 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CampaignResponse(id=8, name=Rotavirus Immunization Drive, description=Campaign targeting School-age (truncated)...]
2025-12-05 05:51:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        vaccinations v1_0
2025-12-05 05:51:11 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:51:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.description,
        c1_0.district_id,
        c1_0.end_date,
        c1_0.facility_id,
        c1_0.name,
        c1_0.national_id,
        c1_0.start_date,
        c1_0.status,
        c1_0.target_age_group,
        c1_0.target_population,
        c1_0.updated_at,
        c1_0.vaccinated_count,
        c1_0.vaccine_name 
    from
        campaigns c1_0 
    where
        ? between c1_0.start_date and c1_0.end_date 
        and c1_0.status='ACTIVE'
2025-12-05 05:51:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0
2025-12-05 05:51:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0
2025-12-05 05:51:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=?
2025-12-05 05:51:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=?
2025-12-05 05:51:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=?
2025-12-05 05:51:11 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:51:11 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [NationalStatisticsResponse(totalFacilities=3, totalVaccineTypes=8, totalDosesAvailable=32768, totalP (truncated)...]
2025-12-05 05:51:11 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:51:15 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /campaigns/active
2025-12-05 05:51:15 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /campaigns/active, Auth header present: true
2025-12-05 05:51:15 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /reports/national-stats
2025-12-05 05:51:15 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /reports/national-stats, Auth header present: true
2025-12-05 05:51:15 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: gov.official
2025-12-05 05:51:15 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: gov.official
2025-12-05 05:51:15 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:51:15 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:51:15 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: gov.official, authorities: [ROLE_GOVERNMENT_OFFICIAL]
2025-12-05 05:51:15 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: gov.official, authorities: [ROLE_GOVERNMENT_OFFICIAL]
2025-12-05 05:51:15 [http-nio-8080-exec-1] INFO  c.i.a.s.JwtAuthenticationFilter - User gov.official authenticated successfully with authorities: [ROLE_GOVERNMENT_OFFICIAL]
2025-12-05 05:51:15 [http-nio-8080-exec-5] INFO  c.i.a.s.JwtAuthenticationFilter - User gov.official authenticated successfully with authorities: [ROLE_GOVERNMENT_OFFICIAL]
2025-12-05 05:51:15 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /campaigns/active
2025-12-05 05:51:15 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /reports/national-stats
2025-12-05 05:51:15 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/campaigns/active", parameters={}
2025-12-05 05:51:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/national-stats", parameters={}
2025-12-05 05:51:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.campaign.controller.CampaignController#getActiveCampaigns(String)
2025-12-05 05:51:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.reporting.controller.ReportingController#getNationalStatistics()
2025-12-05 05:51:15 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.campaign.controller.CampaignController.getActiveCampaigns(java.lang.String); target is of class [com.immunizationdb.campaign.controller.CampaignController]
2025-12-05 05:51:15 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.reporting.controller.ReportingController.getNationalStatistics(); target is of class [com.immunizationdb.reporting.controller.ReportingController]
2025-12-05 05:51:15 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.campaign.controller.CampaignController.getActiveCampaigns(java.lang.String); target is of class [com.immunizationdb.campaign.controller.CampaignController]
2025-12-05 05:51:15 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.reporting.controller.ReportingController.getNationalStatistics(); target is of class [com.immunizationdb.reporting.controller.ReportingController]
2025-12-05 05:51:15 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0
2025-12-05 05:51:15 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.description,
        c1_0.district_id,
        c1_0.end_date,
        c1_0.facility_id,
        c1_0.name,
        c1_0.national_id,
        c1_0.start_date,
        c1_0.status,
        c1_0.target_age_group,
        c1_0.target_population,
        c1_0.updated_at,
        c1_0.vaccinated_count,
        c1_0.vaccine_name 
    from
        campaigns c1_0 
    where
        ? between c1_0.start_date and c1_0.end_date 
        and c1_0.status='ACTIVE'
2025-12-05 05:51:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:51:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CampaignResponse(id=8, name=Rotavirus Immunization Drive, description=Campaign targeting School-age (truncated)...]
2025-12-05 05:51:15 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:51:15 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        patients p1_0
2025-12-05 05:51:15 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        vaccinations v1_0
2025-12-05 05:51:15 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.description,
        c1_0.district_id,
        c1_0.end_date,
        c1_0.facility_id,
        c1_0.name,
        c1_0.national_id,
        c1_0.start_date,
        c1_0.status,
        c1_0.target_age_group,
        c1_0.target_population,
        c1_0.updated_at,
        c1_0.vaccinated_count,
        c1_0.vaccine_name 
    from
        campaigns c1_0 
    where
        ? between c1_0.start_date and c1_0.end_date 
        and c1_0.status='ACTIVE'
2025-12-05 05:51:15 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0
2025-12-05 05:51:15 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0
2025-12-05 05:51:15 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=?
2025-12-05 05:51:15 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=?
2025-12-05 05:51:15 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=?
2025-12-05 05:51:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:51:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [NationalStatisticsResponse(totalFacilities=3, totalVaccineTypes=8, totalDosesAvailable=32768, totalP (truncated)...]
2025-12-05 05:51:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:51:23 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /reports/dashboard/FAC001
2025-12-05 05:51:23 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /campaigns/active?facilityId=FAC001
2025-12-05 05:51:23 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /inventory/batches/available/FAC001
2025-12-05 05:51:23 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /reports/dashboard/FAC001, Auth header present: true
2025-12-05 05:51:23 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /inventory/batches/available/FAC001, Auth header present: true
2025-12-05 05:51:23 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /campaigns/active, Auth header present: true
2025-12-05 05:51:23 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2025-12-05 05:51:23 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2025-12-05 05:51:23 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2025-12-05 05:51:23 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:51:23 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:51:23 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:51:23 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2025-12-05 05:51:23 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2025-12-05 05:51:23 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2025-12-05 05:51:23 [http-nio-8080-exec-6] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2025-12-05 05:51:23 [http-nio-8080-exec-10] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2025-12-05 05:51:23 [http-nio-8080-exec-2] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2025-12-05 05:51:23 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /inventory/batches/available/FAC001
2025-12-05 05:51:23 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /campaigns/active?facilityId=FAC001
2025-12-05 05:51:23 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/campaigns/active?facilityId=FAC001", parameters={masked}
2025-12-05 05:51:23 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /reports/dashboard/FAC001
2025-12-05 05:51:23 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/dashboard/FAC001", parameters={}
2025-12-05 05:51:23 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/inventory/batches/available/FAC001", parameters={}
2025-12-05 05:51:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.reporting.controller.ReportingController#getDashboardStats(String)
2025-12-05 05:51:23 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.campaign.controller.CampaignController#getActiveCampaigns(String)
2025-12-05 05:51:23 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.InventoryController#getAvailableBatches(String)
2025-12-05 05:51:23 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.reporting.controller.ReportingController.getDashboardStats(java.lang.String); target is of class [com.immunizationdb.reporting.controller.ReportingController]
2025-12-05 05:51:23 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.campaign.controller.CampaignController.getActiveCampaigns(java.lang.String); target is of class [com.immunizationdb.campaign.controller.CampaignController]
2025-12-05 05:51:23 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getAvailableBatches(java.lang.String); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2025-12-05 05:51:23 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.reporting.controller.ReportingController.getDashboardStats(java.lang.String); target is of class [com.immunizationdb.reporting.controller.ReportingController]
2025-12-05 05:51:23 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getAvailableBatches(java.lang.String); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2025-12-05 05:51:23 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.campaign.controller.CampaignController.getActiveCampaigns(java.lang.String); target is of class [com.immunizationdb.campaign.controller.CampaignController]
2025-12-05 05:51:23 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.description,
        c1_0.district_id,
        c1_0.end_date,
        c1_0.facility_id,
        c1_0.name,
        c1_0.national_id,
        c1_0.start_date,
        c1_0.status,
        c1_0.target_age_group,
        c1_0.target_population,
        c1_0.updated_at,
        c1_0.vaccinated_count,
        c1_0.vaccine_name 
    from
        campaigns c1_0 
    where
        c1_0.facility_id=? 
        and ? between c1_0.start_date and c1_0.end_date 
        and c1_0.status='ACTIVE'
2025-12-05 05:51:23 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(p1_0.id) 
    from
        patients p1_0 
    where
        p1_0.facility_id=? 
        and p1_0.deleted=false
2025-12-05 05:51:23 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.quantity_remaining>0 
        and vb1_0.expiry_date>? 
    order by
        vb1_0.expiry_date
2025-12-05 05:51:23 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:51:23 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CampaignResponse(id=8, name=Rotavirus Immunization Drive, description=Campaign targeting School-age (truncated)...]
2025-12-05 05:51:23 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:51:23 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:51:23 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(v1_0.id) 
    from
        vaccinations v1_0 
    where
        v1_0.facility_id=? 
        and v1_0.date_administered between ? and ?
2025-12-05 05:51:23 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccineBatchResponse(id=17, batchNumber=BATCH-ROT-0017, vaccineName=Rotavirus, manufacturer=Merck,  (truncated)...]
2025-12-05 05:51:23 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.quantity_remaining>0 
        and vb1_0.expiry_date>? 
    order by
        vb1_0.expiry_date
2025-12-05 05:51:23 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:51:23 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.expiry_date between ? and ? 
        and vb1_0.quantity_remaining>0
2025-12-05 05:51:23 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.description,
        c1_0.district_id,
        c1_0.end_date,
        c1_0.facility_id,
        c1_0.name,
        c1_0.national_id,
        c1_0.start_date,
        c1_0.status,
        c1_0.target_age_group,
        c1_0.target_population,
        c1_0.updated_at,
        c1_0.vaccinated_count,
        c1_0.vaccine_name 
    from
        campaigns c1_0 
    where
        c1_0.facility_id=? 
        and ? between c1_0.start_date and c1_0.end_date 
        and c1_0.status='ACTIVE'
2025-12-05 05:51:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:51:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [DashboardStatsResponse(totalPatients=35, totalVaccinations=null, vaccinationsThisMonth=18, activeCam (truncated)...]
2025-12-05 05:51:23 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:55:31 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /reports/dashboard/FAC001
2025-12-05 05:55:31 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /campaigns/active?facilityId=FAC001
2025-12-05 05:55:31 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /inventory/batches/available/FAC001
2025-12-05 05:55:31 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /reports/dashboard/FAC001, Auth header present: true
2025-12-05 05:55:31 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /campaigns/active, Auth header present: true
2025-12-05 05:55:31 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /inventory/batches/available/FAC001, Auth header present: true
2025-12-05 05:55:32 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2025-12-05 05:55:32 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2025-12-05 05:55:32 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:55:32 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2025-12-05 05:55:32 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:55:32 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2025-12-05 05:55:32 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:55:32 [http-nio-8080-exec-5] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2025-12-05 05:55:32 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2025-12-05 05:55:32 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /reports/dashboard/FAC001
2025-12-05 05:55:32 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/dashboard/FAC001", parameters={}
2025-12-05 05:55:32 [http-nio-8080-exec-10] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2025-12-05 05:55:32 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2025-12-05 05:55:32 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.reporting.controller.ReportingController#getDashboardStats(String)
2025-12-05 05:55:32 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /campaigns/active?facilityId=FAC001
2025-12-05 05:55:32 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.reporting.controller.ReportingController.getDashboardStats(java.lang.String); target is of class [com.immunizationdb.reporting.controller.ReportingController]
2025-12-05 05:55:32 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/campaigns/active?facilityId=FAC001", parameters={masked}
2025-12-05 05:55:32 [http-nio-8080-exec-2] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2025-12-05 05:55:32 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.reporting.controller.ReportingController.getDashboardStats(java.lang.String); target is of class [com.immunizationdb.reporting.controller.ReportingController]
2025-12-05 05:55:32 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.campaign.controller.CampaignController#getActiveCampaigns(String)
2025-12-05 05:55:32 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.campaign.controller.CampaignController.getActiveCampaigns(java.lang.String); target is of class [com.immunizationdb.campaign.controller.CampaignController]
2025-12-05 05:55:32 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(p1_0.id) 
    from
        patients p1_0 
    where
        p1_0.facility_id=? 
        and p1_0.deleted=false
2025-12-05 05:55:32 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /inventory/batches/available/FAC001
2025-12-05 05:55:32 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.campaign.controller.CampaignController.getActiveCampaigns(java.lang.String); target is of class [com.immunizationdb.campaign.controller.CampaignController]
2025-12-05 05:55:32 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(v1_0.id) 
    from
        vaccinations v1_0 
    where
        v1_0.facility_id=? 
        and v1_0.date_administered between ? and ?
2025-12-05 05:55:32 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/inventory/batches/available/FAC001", parameters={}
2025-12-05 05:55:32 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.description,
        c1_0.district_id,
        c1_0.end_date,
        c1_0.facility_id,
        c1_0.name,
        c1_0.national_id,
        c1_0.start_date,
        c1_0.status,
        c1_0.target_age_group,
        c1_0.target_population,
        c1_0.updated_at,
        c1_0.vaccinated_count,
        c1_0.vaccine_name 
    from
        campaigns c1_0 
    where
        c1_0.facility_id=? 
        and ? between c1_0.start_date and c1_0.end_date 
        and c1_0.status='ACTIVE'
2025-12-05 05:55:32 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.InventoryController#getAvailableBatches(String)
2025-12-05 05:55:32 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.quantity_remaining>0 
        and vb1_0.expiry_date>? 
    order by
        vb1_0.expiry_date
2025-12-05 05:55:32 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getAvailableBatches(java.lang.String); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2025-12-05 05:55:32 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:55:32 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getAvailableBatches(java.lang.String); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2025-12-05 05:55:32 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CampaignResponse(id=8, name=Rotavirus Immunization Drive, description=Campaign targeting School-age (truncated)...]
2025-12-05 05:55:32 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:55:32 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.expiry_date between ? and ? 
        and vb1_0.quantity_remaining>0
2025-12-05 05:55:32 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.quantity_remaining>0 
        and vb1_0.expiry_date>? 
    order by
        vb1_0.expiry_date
2025-12-05 05:55:32 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.description,
        c1_0.district_id,
        c1_0.end_date,
        c1_0.facility_id,
        c1_0.name,
        c1_0.national_id,
        c1_0.start_date,
        c1_0.status,
        c1_0.target_age_group,
        c1_0.target_population,
        c1_0.updated_at,
        c1_0.vaccinated_count,
        c1_0.vaccine_name 
    from
        campaigns c1_0 
    where
        c1_0.facility_id=? 
        and ? between c1_0.start_date and c1_0.end_date 
        and c1_0.status='ACTIVE'
2025-12-05 05:55:32 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:55:32 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccineBatchResponse(id=17, batchNumber=BATCH-ROT-0017, vaccineName=Rotavirus, manufacturer=Merck,  (truncated)...]
2025-12-05 05:55:33 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:55:33 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [DashboardStatsResponse(totalPatients=35, totalVaccinations=null, vaccinationsThisMonth=18, activeCam (truncated)...]
2025-12-05 05:55:33 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:55:33 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:55:44 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /reports/national-stats
2025-12-05 05:55:44 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /campaigns/active
2025-12-05 05:55:44 [http-nio-8080-exec-9] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /campaigns/active, Auth header present: true
2025-12-05 05:55:44 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /reports/national-stats, Auth header present: true
2025-12-05 05:55:44 [http-nio-8080-exec-9] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: gov.official
2025-12-05 05:55:44 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: gov.official
2025-12-05 05:55:44 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:55:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:55:44 [http-nio-8080-exec-9] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: gov.official, authorities: [ROLE_GOVERNMENT_OFFICIAL]
2025-12-05 05:55:44 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: gov.official, authorities: [ROLE_GOVERNMENT_OFFICIAL]
2025-12-05 05:55:44 [http-nio-8080-exec-9] INFO  c.i.a.s.JwtAuthenticationFilter - User gov.official authenticated successfully with authorities: [ROLE_GOVERNMENT_OFFICIAL]
2025-12-05 05:55:44 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /campaigns/active
2025-12-05 05:55:44 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/campaigns/active", parameters={}
2025-12-05 05:55:44 [http-nio-8080-exec-6] INFO  c.i.a.s.JwtAuthenticationFilter - User gov.official authenticated successfully with authorities: [ROLE_GOVERNMENT_OFFICIAL]
2025-12-05 05:55:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.campaign.controller.CampaignController#getActiveCampaigns(String)
2025-12-05 05:55:44 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.campaign.controller.CampaignController.getActiveCampaigns(java.lang.String); target is of class [com.immunizationdb.campaign.controller.CampaignController]
2025-12-05 05:55:44 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.campaign.controller.CampaignController.getActiveCampaigns(java.lang.String); target is of class [com.immunizationdb.campaign.controller.CampaignController]
2025-12-05 05:55:44 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /reports/national-stats
2025-12-05 05:55:44 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/national-stats", parameters={}
2025-12-05 05:55:44 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.reporting.controller.ReportingController#getNationalStatistics()
2025-12-05 05:55:44 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.reporting.controller.ReportingController.getNationalStatistics(); target is of class [com.immunizationdb.reporting.controller.ReportingController]
2025-12-05 05:55:44 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.reporting.controller.ReportingController.getNationalStatistics(); target is of class [com.immunizationdb.reporting.controller.ReportingController]
2025-12-05 05:55:44 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.description,
        c1_0.district_id,
        c1_0.end_date,
        c1_0.facility_id,
        c1_0.name,
        c1_0.national_id,
        c1_0.start_date,
        c1_0.status,
        c1_0.target_age_group,
        c1_0.target_population,
        c1_0.updated_at,
        c1_0.vaccinated_count,
        c1_0.vaccine_name 
    from
        campaigns c1_0 
    where
        ? between c1_0.start_date and c1_0.end_date 
        and c1_0.status='ACTIVE'
2025-12-05 05:55:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0
2025-12-05 05:55:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:55:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CampaignResponse(id=8, name=Rotavirus Immunization Drive, description=Campaign targeting School-age (truncated)...]
2025-12-05 05:55:44 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:55:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        patients p1_0
2025-12-05 05:55:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        vaccinations v1_0
2025-12-05 05:55:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.description,
        c1_0.district_id,
        c1_0.end_date,
        c1_0.facility_id,
        c1_0.name,
        c1_0.national_id,
        c1_0.start_date,
        c1_0.status,
        c1_0.target_age_group,
        c1_0.target_population,
        c1_0.updated_at,
        c1_0.vaccinated_count,
        c1_0.vaccine_name 
    from
        campaigns c1_0 
    where
        ? between c1_0.start_date and c1_0.end_date 
        and c1_0.status='ACTIVE'
2025-12-05 05:55:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0
2025-12-05 05:55:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0
2025-12-05 05:55:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=?
2025-12-05 05:55:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=?
2025-12-05 05:55:44 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=?
2025-12-05 05:55:44 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:55:44 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [NationalStatisticsResponse(totalFacilities=3, totalVaccineTypes=8, totalDosesAvailable=32768, totalP (truncated)...]
2025-12-05 05:55:44 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:55:47 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /reports/national-stats
2025-12-05 05:55:47 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /campaigns/active
2025-12-05 05:55:47 [http-nio-8080-exec-3] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /reports/national-stats, Auth header present: true
2025-12-05 05:55:47 [http-nio-8080-exec-7] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /campaigns/active, Auth header present: true
2025-12-05 05:55:47 [http-nio-8080-exec-3] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: gov.official
2025-12-05 05:55:47 [http-nio-8080-exec-7] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: gov.official
2025-12-05 05:55:47 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:55:47 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:55:47 [http-nio-8080-exec-7] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: gov.official, authorities: [ROLE_GOVERNMENT_OFFICIAL]
2025-12-05 05:55:47 [http-nio-8080-exec-3] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: gov.official, authorities: [ROLE_GOVERNMENT_OFFICIAL]
2025-12-05 05:55:47 [http-nio-8080-exec-3] INFO  c.i.a.s.JwtAuthenticationFilter - User gov.official authenticated successfully with authorities: [ROLE_GOVERNMENT_OFFICIAL]
2025-12-05 05:55:47 [http-nio-8080-exec-7] INFO  c.i.a.s.JwtAuthenticationFilter - User gov.official authenticated successfully with authorities: [ROLE_GOVERNMENT_OFFICIAL]
2025-12-05 05:55:47 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /reports/national-stats
2025-12-05 05:55:47 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /campaigns/active
2025-12-05 05:55:47 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/campaigns/active", parameters={}
2025-12-05 05:55:47 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.campaign.controller.CampaignController#getActiveCampaigns(String)
2025-12-05 05:55:47 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/national-stats", parameters={}
2025-12-05 05:55:47 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.campaign.controller.CampaignController.getActiveCampaigns(java.lang.String); target is of class [com.immunizationdb.campaign.controller.CampaignController]
2025-12-05 05:55:47 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.reporting.controller.ReportingController#getNationalStatistics()
2025-12-05 05:55:47 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.campaign.controller.CampaignController.getActiveCampaigns(java.lang.String); target is of class [com.immunizationdb.campaign.controller.CampaignController]
2025-12-05 05:55:47 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.reporting.controller.ReportingController.getNationalStatistics(); target is of class [com.immunizationdb.reporting.controller.ReportingController]
2025-12-05 05:55:47 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.reporting.controller.ReportingController.getNationalStatistics(); target is of class [com.immunizationdb.reporting.controller.ReportingController]
2025-12-05 05:55:47 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.description,
        c1_0.district_id,
        c1_0.end_date,
        c1_0.facility_id,
        c1_0.name,
        c1_0.national_id,
        c1_0.start_date,
        c1_0.status,
        c1_0.target_age_group,
        c1_0.target_population,
        c1_0.updated_at,
        c1_0.vaccinated_count,
        c1_0.vaccine_name 
    from
        campaigns c1_0 
    where
        ? between c1_0.start_date and c1_0.end_date 
        and c1_0.status='ACTIVE'
2025-12-05 05:55:47 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0
2025-12-05 05:55:47 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:55:47 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CampaignResponse(id=8, name=Rotavirus Immunization Drive, description=Campaign targeting School-age (truncated)...]
2025-12-05 05:55:47 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:55:47 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        patients p1_0
2025-12-05 05:55:47 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        vaccinations v1_0
2025-12-05 05:55:47 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.description,
        c1_0.district_id,
        c1_0.end_date,
        c1_0.facility_id,
        c1_0.name,
        c1_0.national_id,
        c1_0.start_date,
        c1_0.status,
        c1_0.target_age_group,
        c1_0.target_population,
        c1_0.updated_at,
        c1_0.vaccinated_count,
        c1_0.vaccine_name 
    from
        campaigns c1_0 
    where
        ? between c1_0.start_date and c1_0.end_date 
        and c1_0.status='ACTIVE'
2025-12-05 05:55:47 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0
2025-12-05 05:55:47 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0
2025-12-05 05:55:47 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=?
2025-12-05 05:55:47 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=?
2025-12-05 05:55:47 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=?
2025-12-05 05:55:47 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:55:47 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [NationalStatisticsResponse(totalFacilities=3, totalVaccineTypes=8, totalDosesAvailable=32768, totalP (truncated)...]
2025-12-05 05:55:47 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:55:58 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/logout
2025-12-05 05:55:58 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /auth/logout, Auth header present: true
2025-12-05 05:55:58 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: gov.official
2025-12-05 05:55:58 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:55:58 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: gov.official, authorities: [ROLE_GOVERNMENT_OFFICIAL]
2025-12-05 05:55:58 [http-nio-8080-exec-4] INFO  c.i.a.s.JwtAuthenticationFilter - User gov.official authenticated successfully with authorities: [ROLE_GOVERNMENT_OFFICIAL]
2025-12-05 05:55:58 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/logout
2025-12-05 05:55:58 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/logout", parameters={}
2025-12-05 05:55:58 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.auth.controller.AuthController#logout(Authentication)
2025-12-05 05:55:58 [http-nio-8080-exec-4] INFO  c.i.auth.controller.AuthController - User gov.official logged out
2025-12-05 05:55:58 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:55:58 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [MessageResponse[message=Logged out successfully]]
2025-12-05 05:55:58 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:56:09 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2025-12-05 05:56:09 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-05 05:56:09 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-05 05:56:09 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-12-05 05:56:09 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.auth.controller.AuthController#login(LoginRequest)
2025-12-05 05:56:09 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(username=healthe.worker, password=Password123!)]
2025-12-05 05:56:09 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:56:09 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:56:09 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:56:09 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(message=Invalid username or password, status=401, timestamp=2025-12-05T05:56:09.498987 (truncated)...]
2025-12-05 05:56:09 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-12-05 05:56:42 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2025-12-05 05:56:42 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-05 05:56:42 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-05 05:56:42 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-12-05 05:56:42 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.auth.controller.AuthController#login(LoginRequest)
2025-12-05 05:56:42 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(username=worker.fac002, password=Password123!)]
2025-12-05 05:56:42 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:56:42 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:56:43 [http-nio-8080-exec-5] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-12-05 05:56:43 [http-nio-8080-exec-5] INFO  c.i.auth.service.AuthService - User worker.fac002 logged in successfully
2025-12-05 05:56:43 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:56:43 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [LoginResponse(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ3b3JrZXIuZmFjMDAyIiwiaWF0IjoxNzY0OTEwNjAzLCJleHA (truncated)...]
2025-12-05 05:56:43 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:56:43 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /reports/dashboard/FAC002
2025-12-05 05:56:43 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /reports/dashboard/FAC002
2025-12-05 05:56:43 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /inventory/batches/expiring-soon/FAC002
2025-12-05 05:56:43 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /reports/dashboard/FAC002, Auth header present: true
2025-12-05 05:56:43 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:56:43 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /vaccinations/facility/FAC002/date-range?startDate=2025-12-04&endDate=2025-12-05
2025-12-05 05:56:43 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:56:43 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /inventory/batches/expiring-soon/FAC002
2025-12-05 05:56:43 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:56:43 [http-nio-8080-exec-7] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /inventory/batches/expiring-soon/FAC002, Auth header present: true
2025-12-05 05:56:43 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /vaccinations/facility/FAC002/date-range?startDate=2025-12-04&endDate=2025-12-05
2025-12-05 05:56:43 [http-nio-8080-exec-7] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:56:43 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /vaccinations/facility/FAC002/date-range, Auth header present: true
2025-12-05 05:56:43 [http-nio-8080-exec-6] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:56:43 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:56:43 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:56:43 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:56:43 [http-nio-8080-exec-7] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:56:43 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /reports/dashboard/FAC002
2025-12-05 05:56:43 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:56:43 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/dashboard/FAC002", parameters={}
2025-12-05 05:56:43 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.reporting.controller.ReportingController#getDashboardStats(String)
2025-12-05 05:56:43 [http-nio-8080-exec-7] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:56:43 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.reporting.controller.ReportingController.getDashboardStats(java.lang.String); target is of class [com.immunizationdb.reporting.controller.ReportingController]
2025-12-05 05:56:43 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.reporting.controller.ReportingController.getDashboardStats(java.lang.String); target is of class [com.immunizationdb.reporting.controller.ReportingController]
2025-12-05 05:56:43 [http-nio-8080-exec-4] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:56:43 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(p1_0.id) 
    from
        patients p1_0 
    where
        p1_0.facility_id=? 
        and p1_0.deleted=false
2025-12-05 05:56:43 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /inventory/batches/expiring-soon/FAC002
2025-12-05 05:56:43 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/inventory/batches/expiring-soon/FAC002", parameters={}
2025-12-05 05:56:43 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.InventoryController#getExpiringSoonBatches(String)
2025-12-05 05:56:43 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /vaccinations/facility/FAC002/date-range?startDate=2025-12-04&endDate=2025-12-05
2025-12-05 05:56:43 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/vaccinations/facility/FAC002/date-range?startDate=2025-12-04&endDate=2025-12-05", parameters={masked}
2025-12-05 05:56:43 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(v1_0.id) 
    from
        vaccinations v1_0 
    where
        v1_0.facility_id=? 
        and v1_0.date_administered between ? and ?
2025-12-05 05:56:43 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.vaccination.controller.VaccinationController#getVaccinationsByDateRange(String, LocalDate, LocalDate)
2025-12-05 05:56:43 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.quantity_remaining>0 
        and vb1_0.expiry_date>? 
    order by
        vb1_0.expiry_date
2025-12-05 05:56:43 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.expiry_date between ? and ? 
        and vb1_0.quantity_remaining>0
2025-12-05 05:56:43 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.description,
        c1_0.district_id,
        c1_0.end_date,
        c1_0.facility_id,
        c1_0.name,
        c1_0.national_id,
        c1_0.start_date,
        c1_0.status,
        c1_0.target_age_group,
        c1_0.target_population,
        c1_0.updated_at,
        c1_0.vaccinated_count,
        c1_0.vaccine_name 
    from
        campaigns c1_0 
    where
        c1_0.facility_id=? 
        and ? between c1_0.start_date and c1_0.end_date 
        and c1_0.status='ACTIVE'
2025-12-05 05:56:43 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getExpiringSoonBatches(java.lang.String); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2025-12-05 05:56:43 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:56:43 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [DashboardStatsResponse(totalPatients=23, totalVaccinations=null, vaccinationsThisMonth=0, activeCamp (truncated)...]
2025-12-05 05:56:43 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:56:44 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getExpiringSoonBatches(java.lang.String); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2025-12-05 05:56:44 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.expiry_date between ? and ? 
        and vb1_0.quantity_remaining>0
2025-12-05 05:56:44 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:56:44 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccineBatchResponse(id=23, batchNumber=BATCH-BCG-0023, vaccineName=BCG, manufacturer=Johnson & Joh (truncated)...]
2025-12-05 05:56:44 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:56:44 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByDateRange(java.lang.String,java.time.LocalDate,java.time.LocalDate); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2025-12-05 05:56:44 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByDateRange(java.lang.String,java.time.LocalDate,java.time.LocalDate); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2025-12-05 05:56:44 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        v1_0.id,
        v1_0.batch_id,
        v1_0.created_at,
        v1_0.date_administered,
        v1_0.dose_number,
        v1_0.facility_id,
        v1_0.notes,
        v1_0.nurse_id,
        v1_0.patient_id,
        v1_0.vaccine_name 
    from
        vaccinations v1_0 
    where
        v1_0.facility_id=? 
        and v1_0.date_administered between ? and ?
2025-12-05 05:56:44 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:56:44 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-12-05 05:56:44 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:56:48 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /inventory/batches/available/FAC002
2025-12-05 05:56:48 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /inventory/batches/available/FAC002
2025-12-05 05:56:48 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /inventory/batches/available/FAC002, Auth header present: true
2025-12-05 05:56:48 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:56:48 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:56:48 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:56:48 [http-nio-8080-exec-1] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:56:48 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /inventory/batches/available/FAC002
2025-12-05 05:56:48 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/inventory/batches/available/FAC002", parameters={}
2025-12-05 05:56:48 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.InventoryController#getAvailableBatches(String)
2025-12-05 05:56:48 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getAvailableBatches(java.lang.String); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2025-12-05 05:56:48 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getAvailableBatches(java.lang.String); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2025-12-05 05:56:48 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.quantity_remaining>0 
        and vb1_0.expiry_date>? 
    order by
        vb1_0.expiry_date
2025-12-05 05:56:48 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:56:48 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccineBatchResponse(id=39, batchNumber=BATCH-ROT-0039, vaccineName=Rotavirus, manufacturer=AstraZe (truncated)...]
2025-12-05 05:56:48 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:56:55 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /reports/dashboard/FAC002
2025-12-05 05:56:55 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /reports/dashboard/FAC002, Auth header present: true
2025-12-05 05:56:55 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /inventory/batches/expiring-soon/FAC002
2025-12-05 05:56:55 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /inventory/batches/expiring-soon/FAC002, Auth header present: true
2025-12-05 05:56:55 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:56:55 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /vaccinations/facility/FAC002/date-range?startDate=2025-12-04&endDate=2025-12-05
2025-12-05 05:56:55 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:56:55 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /vaccinations/facility/FAC002/date-range, Auth header present: true
2025-12-05 05:56:55 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:56:55 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:56:55 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:56:55 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:56:55 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:56:55 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:56:55 [http-nio-8080-exec-10] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:56:55 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:56:55 [http-nio-8080-exec-2] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:56:55 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /reports/dashboard/FAC002
2025-12-05 05:56:55 [http-nio-8080-exec-5] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:56:55 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/dashboard/FAC002", parameters={}
2025-12-05 05:56:55 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.reporting.controller.ReportingController#getDashboardStats(String)
2025-12-05 05:56:55 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.reporting.controller.ReportingController.getDashboardStats(java.lang.String); target is of class [com.immunizationdb.reporting.controller.ReportingController]
2025-12-05 05:56:55 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /inventory/batches/expiring-soon/FAC002
2025-12-05 05:56:55 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.reporting.controller.ReportingController.getDashboardStats(java.lang.String); target is of class [com.immunizationdb.reporting.controller.ReportingController]
2025-12-05 05:56:55 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/inventory/batches/expiring-soon/FAC002", parameters={}
2025-12-05 05:56:55 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.InventoryController#getExpiringSoonBatches(String)
2025-12-05 05:56:55 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(p1_0.id) 
    from
        patients p1_0 
    where
        p1_0.facility_id=? 
        and p1_0.deleted=false
2025-12-05 05:56:55 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getExpiringSoonBatches(java.lang.String); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2025-12-05 05:56:55 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /vaccinations/facility/FAC002/date-range?startDate=2025-12-04&endDate=2025-12-05
2025-12-05 05:56:55 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/vaccinations/facility/FAC002/date-range?startDate=2025-12-04&endDate=2025-12-05", parameters={masked}
2025-12-05 05:56:55 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getExpiringSoonBatches(java.lang.String); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2025-12-05 05:56:55 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.vaccination.controller.VaccinationController#getVaccinationsByDateRange(String, LocalDate, LocalDate)
2025-12-05 05:56:55 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.expiry_date between ? and ? 
        and vb1_0.quantity_remaining>0
2025-12-05 05:56:55 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByDateRange(java.lang.String,java.time.LocalDate,java.time.LocalDate); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2025-12-05 05:56:55 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByDateRange(java.lang.String,java.time.LocalDate,java.time.LocalDate); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2025-12-05 05:56:55 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(v1_0.id) 
    from
        vaccinations v1_0 
    where
        v1_0.facility_id=? 
        and v1_0.date_administered between ? and ?
2025-12-05 05:56:55 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        v1_0.id,
        v1_0.batch_id,
        v1_0.created_at,
        v1_0.date_administered,
        v1_0.dose_number,
        v1_0.facility_id,
        v1_0.notes,
        v1_0.nurse_id,
        v1_0.patient_id,
        v1_0.vaccine_name 
    from
        vaccinations v1_0 
    where
        v1_0.facility_id=? 
        and v1_0.date_administered between ? and ?
2025-12-05 05:56:55 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:56:55 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccineBatchResponse(id=23, batchNumber=BATCH-BCG-0023, vaccineName=BCG, manufacturer=Johnson & Joh (truncated)...]
2025-12-05 05:56:55 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.quantity_remaining>0 
        and vb1_0.expiry_date>? 
    order by
        vb1_0.expiry_date
2025-12-05 05:56:55 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:56:55 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-12-05 05:56:55 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:56:55 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:56:55 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.expiry_date between ? and ? 
        and vb1_0.quantity_remaining>0
2025-12-05 05:56:55 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.description,
        c1_0.district_id,
        c1_0.end_date,
        c1_0.facility_id,
        c1_0.name,
        c1_0.national_id,
        c1_0.start_date,
        c1_0.status,
        c1_0.target_age_group,
        c1_0.target_population,
        c1_0.updated_at,
        c1_0.vaccinated_count,
        c1_0.vaccine_name 
    from
        campaigns c1_0 
    where
        c1_0.facility_id=? 
        and ? between c1_0.start_date and c1_0.end_date 
        and c1_0.status='ACTIVE'
2025-12-05 05:56:55 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:56:55 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [DashboardStatsResponse(totalPatients=23, totalVaccinations=null, vaccinationsThisMonth=0, activeCamp (truncated)...]
2025-12-05 05:56:55 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:57:04 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /patients/facility/FAC002
2025-12-05 05:57:04 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients/facility/FAC002
2025-12-05 05:57:04 [http-nio-8080-exec-3] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /patients/facility/FAC002, Auth header present: true
2025-12-05 05:57:04 [http-nio-8080-exec-3] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:57:04 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:57:04 [http-nio-8080-exec-3] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:57:04 [http-nio-8080-exec-3] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:57:04 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients/facility/FAC002
2025-12-05 05:57:04 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/patients/facility/FAC002", parameters={}
2025-12-05 05:57:04 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.patient.controller.PatientController#getPatientsByFacility(String)
2025-12-05 05:57:04 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientsByFacility(java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2025-12-05 05:57:04 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientsByFacility(java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2025-12-05 05:57:04 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.facility_id=? 
        and not(p1_0.deleted)
2025-12-05 05:57:04 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:57:04 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[PatientResponse(id=07771c0f-41ad-4adb-8a58-75fdf286bd03, fullName=Linda Jones, dateOfBirth=2022-06- (truncated)...]
2025-12-05 05:57:04 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:57:12 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /reports/dashboard/FAC002
2025-12-05 05:57:12 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /reports/dashboard/FAC002, Auth header present: true
2025-12-05 05:57:12 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /inventory/batches/expiring-soon/FAC002
2025-12-05 05:57:12 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:57:12 [http-nio-8080-exec-7] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /inventory/batches/expiring-soon/FAC002, Auth header present: true
2025-12-05 05:57:12 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /vaccinations/facility/FAC002/date-range?startDate=2025-12-04&endDate=2025-12-05
2025-12-05 05:57:12 [http-nio-8080-exec-7] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:57:12 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /vaccinations/facility/FAC002/date-range, Auth header present: true
2025-12-05 05:57:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:57:12 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:57:12 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:57:12 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:57:12 [http-nio-8080-exec-7] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:57:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:57:12 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:57:12 [http-nio-8080-exec-7] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:57:12 [http-nio-8080-exec-6] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:57:12 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /inventory/batches/expiring-soon/FAC002
2025-12-05 05:57:12 [http-nio-8080-exec-4] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:57:12 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/inventory/batches/expiring-soon/FAC002", parameters={}
2025-12-05 05:57:12 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.InventoryController#getExpiringSoonBatches(String)
2025-12-05 05:57:12 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /reports/dashboard/FAC002
2025-12-05 05:57:12 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/dashboard/FAC002", parameters={}
2025-12-05 05:57:12 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getExpiringSoonBatches(java.lang.String); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2025-12-05 05:57:12 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.reporting.controller.ReportingController#getDashboardStats(String)
2025-12-05 05:57:12 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getExpiringSoonBatches(java.lang.String); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2025-12-05 05:57:12 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.reporting.controller.ReportingController.getDashboardStats(java.lang.String); target is of class [com.immunizationdb.reporting.controller.ReportingController]
2025-12-05 05:57:12 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.reporting.controller.ReportingController.getDashboardStats(java.lang.String); target is of class [com.immunizationdb.reporting.controller.ReportingController]
2025-12-05 05:57:12 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /vaccinations/facility/FAC002/date-range?startDate=2025-12-04&endDate=2025-12-05
2025-12-05 05:57:12 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/vaccinations/facility/FAC002/date-range?startDate=2025-12-04&endDate=2025-12-05", parameters={masked}
2025-12-05 05:57:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(p1_0.id) 
    from
        patients p1_0 
    where
        p1_0.facility_id=? 
        and p1_0.deleted=false
2025-12-05 05:57:12 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.vaccination.controller.VaccinationController#getVaccinationsByDateRange(String, LocalDate, LocalDate)
2025-12-05 05:57:12 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.expiry_date between ? and ? 
        and vb1_0.quantity_remaining>0
2025-12-05 05:57:12 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByDateRange(java.lang.String,java.time.LocalDate,java.time.LocalDate); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2025-12-05 05:57:12 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByDateRange(java.lang.String,java.time.LocalDate,java.time.LocalDate); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2025-12-05 05:57:12 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:57:12 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccineBatchResponse(id=23, batchNumber=BATCH-BCG-0023, vaccineName=BCG, manufacturer=Johnson & Joh (truncated)...]
2025-12-05 05:57:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(v1_0.id) 
    from
        vaccinations v1_0 
    where
        v1_0.facility_id=? 
        and v1_0.date_administered between ? and ?
2025-12-05 05:57:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        v1_0.id,
        v1_0.batch_id,
        v1_0.created_at,
        v1_0.date_administered,
        v1_0.dose_number,
        v1_0.facility_id,
        v1_0.notes,
        v1_0.nurse_id,
        v1_0.patient_id,
        v1_0.vaccine_name 
    from
        vaccinations v1_0 
    where
        v1_0.facility_id=? 
        and v1_0.date_administered between ? and ?
2025-12-05 05:57:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.quantity_remaining>0 
        and vb1_0.expiry_date>? 
    order by
        vb1_0.expiry_date
2025-12-05 05:57:12 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:57:12 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:57:12 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-12-05 05:57:12 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:57:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.expiry_date between ? and ? 
        and vb1_0.quantity_remaining>0
2025-12-05 05:57:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.description,
        c1_0.district_id,
        c1_0.end_date,
        c1_0.facility_id,
        c1_0.name,
        c1_0.national_id,
        c1_0.start_date,
        c1_0.status,
        c1_0.target_age_group,
        c1_0.target_population,
        c1_0.updated_at,
        c1_0.vaccinated_count,
        c1_0.vaccine_name 
    from
        campaigns c1_0 
    where
        c1_0.facility_id=? 
        and ? between c1_0.start_date and c1_0.end_date 
        and c1_0.status='ACTIVE'
2025-12-05 05:57:12 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:57:12 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [DashboardStatsResponse(totalPatients=23, totalVaccinations=null, vaccinationsThisMonth=0, activeCamp (truncated)...]
2025-12-05 05:57:12 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:57:24 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /inventory/batches/available/FAC002
2025-12-05 05:57:24 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /inventory/batches/available/FAC002, Auth header present: true
2025-12-05 05:57:24 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:57:24 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:57:24 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:57:24 [http-nio-8080-exec-8] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:57:24 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /inventory/batches/available/FAC002
2025-12-05 05:57:24 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/inventory/batches/available/FAC002", parameters={}
2025-12-05 05:57:24 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.InventoryController#getAvailableBatches(String)
2025-12-05 05:57:24 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getAvailableBatches(java.lang.String); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2025-12-05 05:57:24 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getAvailableBatches(java.lang.String); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2025-12-05 05:57:24 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.quantity_remaining>0 
        and vb1_0.expiry_date>? 
    order by
        vb1_0.expiry_date
2025-12-05 05:57:24 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:57:24 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccineBatchResponse(id=39, batchNumber=BATCH-ROT-0039, vaccineName=Rotavirus, manufacturer=AstraZe (truncated)...]
2025-12-05 05:57:24 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:57:31 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /patients/search?facilityId=FAC002&searchTerm=11
2025-12-05 05:57:31 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients/search?facilityId=FAC002&searchTerm=11
2025-12-05 05:57:31 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /patients/search, Auth header present: true
2025-12-05 05:57:31 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:57:31 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:57:31 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:57:31 [http-nio-8080-exec-5] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:57:31 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients/search?facilityId=FAC002&searchTerm=11
2025-12-05 05:57:31 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/patients/search?facilityId=FAC002&searchTerm=11", parameters={masked}
2025-12-05 05:57:31 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.patient.controller.PatientController#searchPatients(String, String)
2025-12-05 05:57:31 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.searchPatients(java.lang.String,java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2025-12-05 05:57:31 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.searchPatients(java.lang.String,java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2025-12-05 05:57:31 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.facility_id=? 
        and p1_0.deleted=false 
        and (
            lower(p1_0.full_name) like lower(('%'||?||'%')) escape '' 
            or lower(p1_0.guardian_name) like lower(('%'||?||'%')) escape '' 
            or p1_0.phone_number like ('%'||?||'%') escape ''
        )
2025-12-05 05:57:31 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:57:31 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-12-05 05:57:31 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:57:31 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /patients/search?facilityId=FAC002&searchTerm=112
2025-12-05 05:57:31 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients/search?facilityId=FAC002&searchTerm=112
2025-12-05 05:57:31 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /patients/search, Auth header present: true
2025-12-05 05:57:31 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:57:31 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:57:31 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:57:31 [http-nio-8080-exec-10] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:57:31 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients/search?facilityId=FAC002&searchTerm=112
2025-12-05 05:57:31 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/patients/search?facilityId=FAC002&searchTerm=112", parameters={masked}
2025-12-05 05:57:31 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.patient.controller.PatientController#searchPatients(String, String)
2025-12-05 05:57:31 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.searchPatients(java.lang.String,java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2025-12-05 05:57:31 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.searchPatients(java.lang.String,java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2025-12-05 05:57:31 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.facility_id=? 
        and p1_0.deleted=false 
        and (
            lower(p1_0.full_name) like lower(('%'||?||'%')) escape '' 
            or lower(p1_0.guardian_name) like lower(('%'||?||'%')) escape '' 
            or p1_0.phone_number like ('%'||?||'%') escape ''
        )
2025-12-05 05:57:31 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:57:31 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-12-05 05:57:31 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:57:37 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /patients/search?facilityId=FAC002&searchTerm=ri
2025-12-05 05:57:37 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients/search?facilityId=FAC002&searchTerm=ri
2025-12-05 05:57:37 [http-nio-8080-exec-3] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /patients/search, Auth header present: true
2025-12-05 05:57:37 [http-nio-8080-exec-3] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:57:37 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:57:37 [http-nio-8080-exec-3] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:57:37 [http-nio-8080-exec-3] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:57:37 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients/search?facilityId=FAC002&searchTerm=ri
2025-12-05 05:57:37 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/patients/search?facilityId=FAC002&searchTerm=ri", parameters={masked}
2025-12-05 05:57:37 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.patient.controller.PatientController#searchPatients(String, String)
2025-12-05 05:57:37 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.searchPatients(java.lang.String,java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2025-12-05 05:57:37 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.searchPatients(java.lang.String,java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2025-12-05 05:57:37 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.facility_id=? 
        and p1_0.deleted=false 
        and (
            lower(p1_0.full_name) like lower(('%'||?||'%')) escape '' 
            or lower(p1_0.guardian_name) like lower(('%'||?||'%')) escape '' 
            or p1_0.phone_number like ('%'||?||'%') escape ''
        )
2025-12-05 05:57:37 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:57:37 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[PatientResponse(id=39c327a7-084d-4909-9850-7c259363c3af, fullName=Patricia Garcia, dateOfBirth=2011 (truncated)...]
2025-12-05 05:57:37 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:57:40 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /patients/search?facilityId=FAC002&searchTerm=Patricia%20Garcia%20(ID:%2039c327a7-084d-4909-9850-7c259363c3af)
2025-12-05 05:57:40 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients/search?facilityId=FAC002&searchTerm=Patricia%20Garcia%20(ID:%2039c327a7-084d-4909-9850-7c259363c3af)
2025-12-05 05:57:40 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /patients/search, Auth header present: true
2025-12-05 05:57:40 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:57:40 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:57:40 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:57:40 [http-nio-8080-exec-4] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:57:40 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients/search?facilityId=FAC002&searchTerm=Patricia%20Garcia%20(ID:%2039c327a7-084d-4909-9850-7c259363c3af)
2025-12-05 05:57:40 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/patients/search?facilityId=FAC002&searchTerm=Patricia%20Garcia%20(ID:%2039c327a7-084d-4909-9850-7c259363c3af)", parameters={masked}
2025-12-05 05:57:40 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.patient.controller.PatientController#searchPatients(String, String)
2025-12-05 05:57:40 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.searchPatients(java.lang.String,java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2025-12-05 05:57:40 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.searchPatients(java.lang.String,java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2025-12-05 05:57:40 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.facility_id=? 
        and p1_0.deleted=false 
        and (
            lower(p1_0.full_name) like lower(('%'||?||'%')) escape '' 
            or lower(p1_0.guardian_name) like lower(('%'||?||'%')) escape '' 
            or p1_0.phone_number like ('%'||?||'%') escape ''
        )
2025-12-05 05:57:40 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:57:40 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-12-05 05:57:40 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:58:03 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /vaccinations
2025-12-05 05:58:03 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /vaccinations
2025-12-05 05:58:03 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /vaccinations, Auth header present: true
2025-12-05 05:58:03 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:58:03 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:58:03 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:58:03 [http-nio-8080-exec-8] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:58:03 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /vaccinations
2025-12-05 05:58:03 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/vaccinations", parameters={}
2025-12-05 05:58:03 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.vaccination.controller.VaccinationController#recordVaccination(RecordVaccinationRequest)
2025-12-05 05:58:03 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [RecordVaccinationRequest(patientId=39c327a7-084d-4909-9850-7c259363c3af, batchId=23, vaccineName=BCG (truncated)...]
2025-12-05 05:58:03 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.recordVaccination(com.immunizationdb.vaccination.dto.RecordVaccinationRequest); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2025-12-05 05:58:03 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.recordVaccination(com.immunizationdb.vaccination.dto.RecordVaccinationRequest); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2025-12-05 05:58:03 [http-nio-8080-exec-8] INFO  c.i.v.service.VaccinationService - Recording vaccination for patient: 39c327a7-084d-4909-9850-7c259363c3af
2025-12-05 05:58:03 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2025-12-05 05:58:03 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        v1_0.id 
    from
        vaccinations v1_0 
    where
        v1_0.patient_id=? 
        and v1_0.vaccine_name=? 
        and v1_0.dose_number=? 
    fetch
        first ? rows only
2025-12-05 05:58:03 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    insert 
    into
        vaccinations
        (batch_id, created_at, date_administered, dose_number, facility_id, notes, nurse_id, patient_id, vaccine_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-05 05:58:03 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2025-12-05 05:58:03 [http-nio-8080-exec-8] INFO  c.i.i.service.InventoryService - Stock deducted: 1 doses from batch 23
2025-12-05 05:58:03 [http-nio-8080-exec-8] INFO  c.i.v.service.VaccinationService - Stock automatically deducted for batch: 23
2025-12-05 05:58:03 [http-nio-8080-exec-8] INFO  c.i.v.service.VaccinationService - Vaccination recorded successfully with ID: 269
2025-12-05 05:58:03 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    update
        vaccine_batches 
    set
        batch_number=?,
        created_by=?,
        expiry_date=?,
        facility_id=?,
        manufacturer=?,
        quantity_received=?,
        quantity_remaining=?,
        receipt_date=?,
        vaccine_name=? 
    where
        id=?
2025-12-05 05:58:03 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:58:03 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [VaccinationResponse(id=269, patientId=39c327a7-084d-4909-9850-7c259363c3af, patientName=Patricia Gar (truncated)...]
2025-12-05 05:58:03 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-12-05 05:58:09 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /patients/39c327a7-084d-4909-9850-7c259363c3af
2025-12-05 05:58:09 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients/39c327a7-084d-4909-9850-7c259363c3af
2025-12-05 05:58:09 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /patients/39c327a7-084d-4909-9850-7c259363c3af, Auth header present: true
2025-12-05 05:58:09 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:58:09 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:58:09 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:58:09 [http-nio-8080-exec-5] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:58:09 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients/39c327a7-084d-4909-9850-7c259363c3af
2025-12-05 05:58:09 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/patients/39c327a7-084d-4909-9850-7c259363c3af", parameters={}
2025-12-05 05:58:09 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.patient.controller.PatientController#getPatientById(UUID)
2025-12-05 05:58:09 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientById(java.util.UUID); target is of class [com.immunizationdb.patient.controller.PatientController]
2025-12-05 05:58:09 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientById(java.util.UUID); target is of class [com.immunizationdb.patient.controller.PatientController]
2025-12-05 05:58:09 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2025-12-05 05:58:09 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:58:09 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [PatientResponse(id=39c327a7-084d-4909-9850-7c259363c3af, fullName=Patricia Garcia, dateOfBirth=2011- (truncated)...]
2025-12-05 05:58:09 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:58:09 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /vaccinations/patient/39c327a7-084d-4909-9850-7c259363c3af
2025-12-05 05:58:09 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /vaccinations/patient/39c327a7-084d-4909-9850-7c259363c3af
2025-12-05 05:58:09 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /vaccinations/patient/39c327a7-084d-4909-9850-7c259363c3af, Auth header present: true
2025-12-05 05:58:09 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:58:09 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:58:09 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:58:09 [http-nio-8080-exec-10] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:58:09 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /vaccinations/patient/39c327a7-084d-4909-9850-7c259363c3af
2025-12-05 05:58:09 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/vaccinations/patient/39c327a7-084d-4909-9850-7c259363c3af", parameters={}
2025-12-05 05:58:09 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.vaccination.controller.VaccinationController#getVaccinationHistory(UUID)
2025-12-05 05:58:09 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationHistory(java.util.UUID); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2025-12-05 05:58:09 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationHistory(java.util.UUID); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2025-12-05 05:58:09 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2025-12-05 05:58:09 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        v1_0.id,
        v1_0.batch_id,
        v1_0.created_at,
        v1_0.date_administered,
        v1_0.dose_number,
        v1_0.facility_id,
        v1_0.notes,
        v1_0.nurse_id,
        v1_0.patient_id,
        v1_0.vaccine_name 
    from
        vaccinations v1_0 
    where
        v1_0.patient_id=? 
    order by
        v1_0.date_administered desc
2025-12-05 05:58:09 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:58:09 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccinationResponse(id=269, patientId=39c327a7-084d-4909-9850-7c259363c3af, patientName=Patricia Ga (truncated)...]
2025-12-05 05:58:09 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:58:15 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /vaccinations/facility/FAC002
2025-12-05 05:58:15 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /vaccinations/facility/FAC002
2025-12-05 05:58:15 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /vaccinations/facility/FAC002, Auth header present: true
2025-12-05 05:58:15 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:58:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:58:15 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:58:15 [http-nio-8080-exec-4] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:58:15 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /vaccinations/facility/FAC002
2025-12-05 05:58:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/vaccinations/facility/FAC002", parameters={}
2025-12-05 05:58:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.vaccination.controller.VaccinationController#getVaccinationsByFacility(String)
2025-12-05 05:58:15 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByFacility(java.lang.String); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2025-12-05 05:58:15 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByFacility(java.lang.String); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2025-12-05 05:58:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        v1_0.id,
        v1_0.batch_id,
        v1_0.created_at,
        v1_0.date_administered,
        v1_0.dose_number,
        v1_0.facility_id,
        v1_0.notes,
        v1_0.nurse_id,
        v1_0.patient_id,
        v1_0.vaccine_name 
    from
        vaccinations v1_0 
    where
        v1_0.facility_id=?
2025-12-05 05:58:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:58:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccinationResponse(id=8, patientId=07771c0f-41ad-4adb-8a58-75fdf286bd03, patientName=null, batchId (truncated)...]
2025-12-05 05:58:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:58:17 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /inventory/batches/available/FAC002
2025-12-05 05:58:17 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /inventory/batches/available/FAC002, Auth header present: true
2025-12-05 05:58:17 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:58:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:58:17 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:58:17 [http-nio-8080-exec-6] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:58:17 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /inventory/batches/available/FAC002
2025-12-05 05:58:17 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/inventory/batches/available/FAC002", parameters={}
2025-12-05 05:58:17 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.InventoryController#getAvailableBatches(String)
2025-12-05 05:58:17 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getAvailableBatches(java.lang.String); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2025-12-05 05:58:17 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getAvailableBatches(java.lang.String); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2025-12-05 05:58:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.quantity_remaining>0 
        and vb1_0.expiry_date>? 
    order by
        vb1_0.expiry_date
2025-12-05 05:58:17 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:58:17 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccineBatchResponse(id=39, batchNumber=BATCH-ROT-0039, vaccineName=Rotavirus, manufacturer=AstraZe (truncated)...]
2025-12-05 05:58:17 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:58:21 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /reports/dashboard/FAC002
2025-12-05 05:58:21 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /reports/dashboard/FAC002, Auth header present: true
2025-12-05 05:58:21 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /inventory/batches/expiring-soon/FAC002
2025-12-05 05:58:21 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:58:21 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /inventory/batches/expiring-soon/FAC002, Auth header present: true
2025-12-05 05:58:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:58:21 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /vaccinations/facility/FAC002/date-range?startDate=2025-12-04&endDate=2025-12-05
2025-12-05 05:58:21 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:58:21 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /vaccinations/facility/FAC002/date-range, Auth header present: true
2025-12-05 05:58:21 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:58:21 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:58:21 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:58:21 [http-nio-8080-exec-8] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:58:21 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:58:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:58:21 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:58:21 [http-nio-8080-exec-1] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:58:21 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /reports/dashboard/FAC002
2025-12-05 05:58:21 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/dashboard/FAC002", parameters={}
2025-12-05 05:58:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.reporting.controller.ReportingController#getDashboardStats(String)
2025-12-05 05:58:21 [http-nio-8080-exec-5] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:58:21 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.reporting.controller.ReportingController.getDashboardStats(java.lang.String); target is of class [com.immunizationdb.reporting.controller.ReportingController]
2025-12-05 05:58:21 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.reporting.controller.ReportingController.getDashboardStats(java.lang.String); target is of class [com.immunizationdb.reporting.controller.ReportingController]
2025-12-05 05:58:21 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /inventory/batches/expiring-soon/FAC002
2025-12-05 05:58:21 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/inventory/batches/expiring-soon/FAC002", parameters={}
2025-12-05 05:58:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.InventoryController#getExpiringSoonBatches(String)
2025-12-05 05:58:21 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getExpiringSoonBatches(java.lang.String); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2025-12-05 05:58:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(p1_0.id) 
    from
        patients p1_0 
    where
        p1_0.facility_id=? 
        and p1_0.deleted=false
2025-12-05 05:58:21 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /vaccinations/facility/FAC002/date-range?startDate=2025-12-04&endDate=2025-12-05
2025-12-05 05:58:21 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/vaccinations/facility/FAC002/date-range?startDate=2025-12-04&endDate=2025-12-05", parameters={masked}
2025-12-05 05:58:21 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getExpiringSoonBatches(java.lang.String); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2025-12-05 05:58:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.vaccination.controller.VaccinationController#getVaccinationsByDateRange(String, LocalDate, LocalDate)
2025-12-05 05:58:21 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByDateRange(java.lang.String,java.time.LocalDate,java.time.LocalDate); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2025-12-05 05:58:21 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByDateRange(java.lang.String,java.time.LocalDate,java.time.LocalDate); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2025-12-05 05:58:21 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.expiry_date between ? and ? 
        and vb1_0.quantity_remaining>0
2025-12-05 05:58:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(v1_0.id) 
    from
        vaccinations v1_0 
    where
        v1_0.facility_id=? 
        and v1_0.date_administered between ? and ?
2025-12-05 05:58:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        v1_0.id,
        v1_0.batch_id,
        v1_0.created_at,
        v1_0.date_administered,
        v1_0.dose_number,
        v1_0.facility_id,
        v1_0.notes,
        v1_0.nurse_id,
        v1_0.patient_id,
        v1_0.vaccine_name 
    from
        vaccinations v1_0 
    where
        v1_0.facility_id=? 
        and v1_0.date_administered between ? and ?
2025-12-05 05:58:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:58:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.quantity_remaining>0 
        and vb1_0.expiry_date>? 
    order by
        vb1_0.expiry_date
2025-12-05 05:58:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccineBatchResponse(id=39, batchNumber=BATCH-ROT-0039, vaccineName=Rotavirus, manufacturer=AstraZe (truncated)...]
2025-12-05 05:58:21 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:58:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:58:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccinationResponse(id=269, patientId=39c327a7-084d-4909-9850-7c259363c3af, patientName=null, batch (truncated)...]
2025-12-05 05:58:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.expiry_date between ? and ? 
        and vb1_0.quantity_remaining>0
2025-12-05 05:58:21 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:58:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.description,
        c1_0.district_id,
        c1_0.end_date,
        c1_0.facility_id,
        c1_0.name,
        c1_0.national_id,
        c1_0.start_date,
        c1_0.status,
        c1_0.target_age_group,
        c1_0.target_population,
        c1_0.updated_at,
        c1_0.vaccinated_count,
        c1_0.vaccine_name 
    from
        campaigns c1_0 
    where
        c1_0.facility_id=? 
        and ? between c1_0.start_date and c1_0.end_date 
        and c1_0.status='ACTIVE'
2025-12-05 05:58:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:58:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [DashboardStatsResponse(totalPatients=23, totalVaccinations=null, vaccinationsThisMonth=1, activeCamp (truncated)...]
2025-12-05 05:58:21 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:59:34 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /patients
2025-12-05 05:59:34 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /patients
2025-12-05 05:59:34 [http-nio-8080-exec-7] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /patients, Auth header present: true
2025-12-05 05:59:34 [http-nio-8080-exec-7] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:59:34 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:59:34 [http-nio-8080-exec-7] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:59:34 [http-nio-8080-exec-7] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:59:34 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /patients
2025-12-05 05:59:34 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/patients", parameters={}
2025-12-05 05:59:34 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.patient.controller.PatientController#createPatient(CreatePatientRequest)
2025-12-05 05:59:34 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [CreatePatientRequest(fullName=wanko ayo messi, dateOfBirth=2020-06-10, gender=MALE, guardianName=Wan (truncated)...]
2025-12-05 05:59:35 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.createPatient(com.immunizationdb.patient.dto.CreatePatientRequest); target is of class [com.immunizationdb.patient.controller.PatientController]
2025-12-05 05:59:35 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.createPatient(com.immunizationdb.patient.dto.CreatePatientRequest); target is of class [com.immunizationdb.patient.controller.PatientController]
2025-12-05 05:59:35 [http-nio-8080-exec-7] INFO  c.i.patient.service.PatientService - Creating new patient: wanko ayo messi
2025-12-05 05:59:35 [http-nio-8080-exec-7] INFO  c.i.patient.service.PatientService - Patient created successfully with ID: 1457be15-cfaf-4599-879a-d050a68a5609
2025-12-05 05:59:35 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        patients
        (address, created_at, created_by, date_of_birth, deleted, deleted_at, facility_id, full_name, gender, guardian_name, phone_number, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-05 05:59:35 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:59:35 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [PatientResponse(id=1457be15-cfaf-4599-879a-d050a68a5609, fullName=wanko ayo messi, dateOfBirth=2020- (truncated)...]
2025-12-05 05:59:35 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-12-05 05:59:37 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients/facility/FAC002
2025-12-05 05:59:37 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /patients/facility/FAC002, Auth header present: true
2025-12-05 05:59:37 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:59:37 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:59:37 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:59:37 [http-nio-8080-exec-4] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:59:37 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients/facility/FAC002
2025-12-05 05:59:37 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/patients/facility/FAC002", parameters={}
2025-12-05 05:59:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.patient.controller.PatientController#getPatientsByFacility(String)
2025-12-05 05:59:37 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientsByFacility(java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2025-12-05 05:59:37 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientsByFacility(java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2025-12-05 05:59:37 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.facility_id=? 
        and not(p1_0.deleted)
2025-12-05 05:59:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:59:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[PatientResponse(id=07771c0f-41ad-4adb-8a58-75fdf286bd03, fullName=Linda Jones, dateOfBirth=2022-06- (truncated)...]
2025-12-05 05:59:37 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:59:42 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /reports/dashboard/FAC002
2025-12-05 05:59:42 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /reports/dashboard/FAC002, Auth header present: true
2025-12-05 05:59:42 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /inventory/batches/expiring-soon/FAC002
2025-12-05 05:59:42 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:59:42 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /inventory/batches/expiring-soon/FAC002, Auth header present: true
2025-12-05 05:59:42 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /vaccinations/facility/FAC002/date-range?startDate=2025-12-04&endDate=2025-12-05
2025-12-05 05:59:42 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:59:42 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /vaccinations/facility/FAC002/date-range, Auth header present: true
2025-12-05 05:59:42 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:59:42 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:59:42 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:59:42 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:59:42 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:59:42 [http-nio-8080-exec-6] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:59:42 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:59:42 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:59:42 [http-nio-8080-exec-5] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:59:42 [http-nio-8080-exec-1] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:59:42 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /reports/dashboard/FAC002
2025-12-05 05:59:42 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/dashboard/FAC002", parameters={}
2025-12-05 05:59:42 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.reporting.controller.ReportingController#getDashboardStats(String)
2025-12-05 05:59:42 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.reporting.controller.ReportingController.getDashboardStats(java.lang.String); target is of class [com.immunizationdb.reporting.controller.ReportingController]
2025-12-05 05:59:42 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /inventory/batches/expiring-soon/FAC002
2025-12-05 05:59:42 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /vaccinations/facility/FAC002/date-range?startDate=2025-12-04&endDate=2025-12-05
2025-12-05 05:59:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/inventory/batches/expiring-soon/FAC002", parameters={}
2025-12-05 05:59:42 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/vaccinations/facility/FAC002/date-range?startDate=2025-12-04&endDate=2025-12-05", parameters={masked}
2025-12-05 05:59:42 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.reporting.controller.ReportingController.getDashboardStats(java.lang.String); target is of class [com.immunizationdb.reporting.controller.ReportingController]
2025-12-05 05:59:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.InventoryController#getExpiringSoonBatches(String)
2025-12-05 05:59:42 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.vaccination.controller.VaccinationController#getVaccinationsByDateRange(String, LocalDate, LocalDate)
2025-12-05 05:59:42 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getExpiringSoonBatches(java.lang.String); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2025-12-05 05:59:42 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getExpiringSoonBatches(java.lang.String); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2025-12-05 05:59:42 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByDateRange(java.lang.String,java.time.LocalDate,java.time.LocalDate); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2025-12-05 05:59:42 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(p1_0.id) 
    from
        patients p1_0 
    where
        p1_0.facility_id=? 
        and p1_0.deleted=false
2025-12-05 05:59:42 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByDateRange(java.lang.String,java.time.LocalDate,java.time.LocalDate); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2025-12-05 05:59:42 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        v1_0.id,
        v1_0.batch_id,
        v1_0.created_at,
        v1_0.date_administered,
        v1_0.dose_number,
        v1_0.facility_id,
        v1_0.notes,
        v1_0.nurse_id,
        v1_0.patient_id,
        v1_0.vaccine_name 
    from
        vaccinations v1_0 
    where
        v1_0.facility_id=? 
        and v1_0.date_administered between ? and ?
2025-12-05 05:59:42 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.expiry_date between ? and ? 
        and vb1_0.quantity_remaining>0
2025-12-05 05:59:42 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        count(v1_0.id) 
    from
        vaccinations v1_0 
    where
        v1_0.facility_id=? 
        and v1_0.date_administered between ? and ?
2025-12-05 05:59:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:59:42 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:59:42 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.quantity_remaining>0 
        and vb1_0.expiry_date>? 
    order by
        vb1_0.expiry_date
2025-12-05 05:59:42 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccinationResponse(id=269, patientId=39c327a7-084d-4909-9850-7c259363c3af, patientName=null, batch (truncated)...]
2025-12-05 05:59:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccineBatchResponse(id=39, batchNumber=BATCH-ROT-0039, vaccineName=Rotavirus, manufacturer=AstraZe (truncated)...]
2025-12-05 05:59:42 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:59:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:59:42 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.expiry_date between ? and ? 
        and vb1_0.quantity_remaining>0
2025-12-05 05:59:42 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.description,
        c1_0.district_id,
        c1_0.end_date,
        c1_0.facility_id,
        c1_0.name,
        c1_0.national_id,
        c1_0.start_date,
        c1_0.status,
        c1_0.target_age_group,
        c1_0.target_population,
        c1_0.updated_at,
        c1_0.vaccinated_count,
        c1_0.vaccine_name 
    from
        campaigns c1_0 
    where
        c1_0.facility_id=? 
        and ? between c1_0.start_date and c1_0.end_date 
        and c1_0.status='ACTIVE'
2025-12-05 05:59:42 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:59:42 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [DashboardStatsResponse(totalPatients=24, totalVaccinations=null, vaccinationsThisMonth=1, activeCamp (truncated)...]
2025-12-05 05:59:42 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:59:47 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /reports/dashboard/FAC002
2025-12-05 05:59:47 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /reports/dashboard/FAC002, Auth header present: true
2025-12-05 05:59:47 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /inventory/batches/expiring-soon/FAC002
2025-12-05 05:59:47 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:59:47 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /inventory/batches/expiring-soon/FAC002, Auth header present: true
2025-12-05 05:59:47 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /vaccinations/facility/FAC002/date-range?startDate=2025-12-04&endDate=2025-12-05
2025-12-05 05:59:47 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:59:47 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /vaccinations/facility/FAC002/date-range, Auth header present: true
2025-12-05 05:59:47 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:59:47 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:59:47 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:59:47 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: worker.fac002
2025-12-05 05:59:47 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:59:47 [http-nio-8080-exec-8] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:59:47 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 05:59:47 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: worker.fac002, authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:59:47 [http-nio-8080-exec-2] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:59:47 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /reports/dashboard/FAC002
2025-12-05 05:59:47 [http-nio-8080-exec-10] INFO  c.i.a.s.JwtAuthenticationFilter - User worker.fac002 authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2025-12-05 05:59:47 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/dashboard/FAC002", parameters={}
2025-12-05 05:59:47 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /inventory/batches/expiring-soon/FAC002
2025-12-05 05:59:47 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/inventory/batches/expiring-soon/FAC002", parameters={}
2025-12-05 05:59:47 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.reporting.controller.ReportingController#getDashboardStats(String)
2025-12-05 05:59:47 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.InventoryController#getExpiringSoonBatches(String)
2025-12-05 05:59:47 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getExpiringSoonBatches(java.lang.String); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2025-12-05 05:59:47 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.reporting.controller.ReportingController.getDashboardStats(java.lang.String); target is of class [com.immunizationdb.reporting.controller.ReportingController]
2025-12-05 05:59:47 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getExpiringSoonBatches(java.lang.String); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2025-12-05 05:59:47 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.reporting.controller.ReportingController.getDashboardStats(java.lang.String); target is of class [com.immunizationdb.reporting.controller.ReportingController]
2025-12-05 05:59:47 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /vaccinations/facility/FAC002/date-range?startDate=2025-12-04&endDate=2025-12-05
2025-12-05 05:59:47 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/vaccinations/facility/FAC002/date-range?startDate=2025-12-04&endDate=2025-12-05", parameters={masked}
2025-12-05 05:59:47 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(p1_0.id) 
    from
        patients p1_0 
    where
        p1_0.facility_id=? 
        and p1_0.deleted=false
2025-12-05 05:59:47 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.vaccination.controller.VaccinationController#getVaccinationsByDateRange(String, LocalDate, LocalDate)
2025-12-05 05:59:47 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.expiry_date between ? and ? 
        and vb1_0.quantity_remaining>0
2025-12-05 05:59:47 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByDateRange(java.lang.String,java.time.LocalDate,java.time.LocalDate); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2025-12-05 05:59:47 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(v1_0.id) 
    from
        vaccinations v1_0 
    where
        v1_0.facility_id=? 
        and v1_0.date_administered between ? and ?
2025-12-05 05:59:47 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByDateRange(java.lang.String,java.time.LocalDate,java.time.LocalDate); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2025-12-05 05:59:47 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:59:47 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccineBatchResponse(id=39, batchNumber=BATCH-ROT-0039, vaccineName=Rotavirus, manufacturer=AstraZe (truncated)...]
2025-12-05 05:59:47 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        v1_0.id,
        v1_0.batch_id,
        v1_0.created_at,
        v1_0.date_administered,
        v1_0.dose_number,
        v1_0.facility_id,
        v1_0.notes,
        v1_0.nurse_id,
        v1_0.patient_id,
        v1_0.vaccine_name 
    from
        vaccinations v1_0 
    where
        v1_0.facility_id=? 
        and v1_0.date_administered between ? and ?
2025-12-05 05:59:47 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:59:47 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.quantity_remaining>0 
        and vb1_0.expiry_date>? 
    order by
        vb1_0.expiry_date
2025-12-05 05:59:47 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:59:47 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccinationResponse(id=269, patientId=39c327a7-084d-4909-9850-7c259363c3af, patientName=null, batch (truncated)...]
2025-12-05 05:59:47 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.expiry_date between ? and ? 
        and vb1_0.quantity_remaining>0
2025-12-05 05:59:47 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 05:59:47 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.description,
        c1_0.district_id,
        c1_0.end_date,
        c1_0.facility_id,
        c1_0.name,
        c1_0.national_id,
        c1_0.start_date,
        c1_0.status,
        c1_0.target_age_group,
        c1_0.target_population,
        c1_0.updated_at,
        c1_0.vaccinated_count,
        c1_0.vaccine_name 
    from
        campaigns c1_0 
    where
        c1_0.facility_id=? 
        and ? between c1_0.start_date and c1_0.end_date 
        and c1_0.status='ACTIVE'
2025-12-05 05:59:47 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 05:59:47 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [DashboardStatsResponse(totalPatients=24, totalVaccinations=null, vaccinationsThisMonth=1, activeCamp (truncated)...]
2025-12-05 05:59:47 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 06:02:26 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /inventory/batches/available/FAC001
2025-12-05 06:02:26 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /campaigns/active?facilityId=FAC001
2025-12-05 06:02:26 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /reports/dashboard/FAC001
2025-12-05 06:02:26 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /inventory/batches/available/FAC001, Auth header present: true
2025-12-05 06:02:26 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /campaigns/active, Auth header present: true
2025-12-05 06:02:26 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /reports/dashboard/FAC001, Auth header present: true
2025-12-05 06:02:26 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2025-12-05 06:02:26 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2025-12-05 06:02:26 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2025-12-05 06:02:26 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 06:02:26 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 06:02:26 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-05 06:02:26 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2025-12-05 06:02:26 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2025-12-05 06:02:26 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2025-12-05 06:02:26 [http-nio-8080-exec-5] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2025-12-05 06:02:26 [http-nio-8080-exec-1] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2025-12-05 06:02:26 [http-nio-8080-exec-4] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2025-12-05 06:02:26 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /inventory/batches/available/FAC001
2025-12-05 06:02:26 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /campaigns/active?facilityId=FAC001
2025-12-05 06:02:26 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/inventory/batches/available/FAC001", parameters={}
2025-12-05 06:02:27 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /reports/dashboard/FAC001
2025-12-05 06:02:27 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/campaigns/active?facilityId=FAC001", parameters={masked}
2025-12-05 06:02:27 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.InventoryController#getAvailableBatches(String)
2025-12-05 06:02:27 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/dashboard/FAC001", parameters={}
2025-12-05 06:02:27 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.campaign.controller.CampaignController#getActiveCampaigns(String)
2025-12-05 06:02:27 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getAvailableBatches(java.lang.String); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2025-12-05 06:02:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.reporting.controller.ReportingController#getDashboardStats(String)
2025-12-05 06:02:27 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.campaign.controller.CampaignController.getActiveCampaigns(java.lang.String); target is of class [com.immunizationdb.campaign.controller.CampaignController]
2025-12-05 06:02:27 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getAvailableBatches(java.lang.String); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2025-12-05 06:02:27 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.reporting.controller.ReportingController.getDashboardStats(java.lang.String); target is of class [com.immunizationdb.reporting.controller.ReportingController]
2025-12-05 06:02:27 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.campaign.controller.CampaignController.getActiveCampaigns(java.lang.String); target is of class [com.immunizationdb.campaign.controller.CampaignController]
2025-12-05 06:02:27 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.reporting.controller.ReportingController.getDashboardStats(java.lang.String); target is of class [com.immunizationdb.reporting.controller.ReportingController]
2025-12-05 06:02:27 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.description,
        c1_0.district_id,
        c1_0.end_date,
        c1_0.facility_id,
        c1_0.name,
        c1_0.national_id,
        c1_0.start_date,
        c1_0.status,
        c1_0.target_age_group,
        c1_0.target_population,
        c1_0.updated_at,
        c1_0.vaccinated_count,
        c1_0.vaccine_name 
    from
        campaigns c1_0 
    where
        c1_0.facility_id=? 
        and ? between c1_0.start_date and c1_0.end_date 
        and c1_0.status='ACTIVE'
2025-12-05 06:02:27 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.quantity_remaining>0 
        and vb1_0.expiry_date>? 
    order by
        vb1_0.expiry_date
2025-12-05 06:02:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(p1_0.id) 
    from
        patients p1_0 
    where
        p1_0.facility_id=? 
        and p1_0.deleted=false
2025-12-05 06:02:27 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 06:02:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(v1_0.id) 
    from
        vaccinations v1_0 
    where
        v1_0.facility_id=? 
        and v1_0.date_administered between ? and ?
2025-12-05 06:02:27 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 06:02:27 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CampaignResponse(id=8, name=Rotavirus Immunization Drive, description=Campaign targeting School-age (truncated)...]
2025-12-05 06:02:27 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccineBatchResponse(id=17, batchNumber=BATCH-ROT-0017, vaccineName=Rotavirus, manufacturer=Merck,  (truncated)...]
2025-12-05 06:02:27 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 06:02:27 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-05 06:02:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.quantity_remaining>0 
        and vb1_0.expiry_date>? 
    order by
        vb1_0.expiry_date
2025-12-05 06:02:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.expiry_date between ? and ? 
        and vb1_0.quantity_remaining>0
2025-12-05 06:02:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.description,
        c1_0.district_id,
        c1_0.end_date,
        c1_0.facility_id,
        c1_0.name,
        c1_0.national_id,
        c1_0.start_date,
        c1_0.status,
        c1_0.target_age_group,
        c1_0.target_population,
        c1_0.updated_at,
        c1_0.vaccinated_count,
        c1_0.vaccine_name 
    from
        campaigns c1_0 
    where
        c1_0.facility_id=? 
        and ? between c1_0.start_date and c1_0.end_date 
        and c1_0.status='ACTIVE'
2025-12-05 06:02:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-05 06:02:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [DashboardStatsResponse(totalPatients=35, totalVaccinations=null, vaccinationsThisMonth=18, activeCam (truncated)...]
2025-12-05 06:02:27 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
