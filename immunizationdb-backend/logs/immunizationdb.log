2026-02-01 23:24:07 [restartedMain] INFO  c.i.ImmunizationdbBackendApplication - Starting ImmunizationdbBackendApplication using Java 21.0.8 with PID 50592 (D:\project\Immunization-Management-Sytem-group5-project-\immunizationdb-backend\target\classes started by THE TECHNOLOGUE in D:\project\Immunization-Management-Sytem-group5-project-\immunizationdb-backend)
2026-02-01 23:24:07 [restartedMain] DEBUG c.i.ImmunizationdbBackendApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2026-02-01 23:24:07 [restartedMain] INFO  c.i.ImmunizationdbBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-01 23:24:07 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-02-01 23:24:07 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-02-01 23:24:09 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-01 23:24:09 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 233 ms. Found 11 JPA repository interfaces.
2026-02-01 23:24:10 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-01 23:24:10 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-01 23:24:10 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2026-02-01 23:24:10 [restartedMain] INFO  o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2026-02-01 23:24:10 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2748 ms
2026-02-01 23:24:11 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-01 23:24:11 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@7e1a6f5e
2026-02-01 23:24:11 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-01 23:24:11 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 9.22.3 by Redgate
2026-02-01 23:24:11 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - See release notes here: https://rd.gt/416ObMi
2026-02-01 23:24:11 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - 
2026-02-01 23:24:11 [restartedMain] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://localhost:5432/immunizationdb (PostgreSQL 18.1)
2026-02-01 23:24:11 [restartedMain] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: PostgreSQL 18.1 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.
2026-02-01 23:24:12 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": 8
2026-02-01 23:24:12 [restartedMain] WARN  o.f.core.internal.command.DbMigrate - outOfOrder mode is active. Migration of schema "public" may not be reproducible.
2026-02-01 23:24:12 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2026-02-01 23:24:12 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-01 23:24:12 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.3.1.Final
2026-02-01 23:24:12 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-01 23:24:12 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-01 23:24:12 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-01 23:24:13 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-01 23:24:13 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-01 23:24:14 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-01 23:24:14 [restartedMain] WARN  o.s.aop.framework.CglibAopProxy - Unable to proxy interface-implementing method [public final void org.springframework.web.filter.OncePerRequestFilter.doFilter(jakarta.servlet.ServletRequest,jakarta.servlet.ServletResponse,jakarta.servlet.FilterChain) throws jakarta.servlet.ServletException,java.io.IOException] because it is marked as final, consider using interface-based JDK proxies instead.
2026-02-01 23:24:14 [restartedMain] WARN  o.s.aop.framework.CglibAopProxy - Unable to proxy interface-implementing method [public final void org.springframework.web.filter.GenericFilterBean.init(jakarta.servlet.FilterConfig) throws jakarta.servlet.ServletException] because it is marked as final, consider using interface-based JDK proxies instead.
2026-02-01 23:24:14 [restartedMain] DEBUG c.i.a.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2026-02-01 23:24:14 [restartedMain] DEBUG o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2026-02-01 23:24:15 [restartedMain] INFO  c.i.sms.service.SmsService - SMS Service initialized - Username configured: true, API Key configured: true, SMS Enabled: true
2026-02-01 23:24:16 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-02-01 23:24:16 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 75 mappings in 'requestMappingHandlerMapping'
2026-02-01 23:24:16 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2026-02-01 23:24:16 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoint(s) beneath base path '/actuator'
2026-02-01 23:24:16 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3a5217ae, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6ac8e133, org.springframework.security.web.context.SecurityContextHolderFilter@4b9ede27, org.springframework.security.web.header.HeaderWriterFilter@76be2da9, org.springframework.web.filter.CorsFilter@2916140, org.springframework.security.web.authentication.logout.LogoutFilter@109eb431, com.immunizationdb.auth.security.JwtAuthenticationFilter@5994b35a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6de816b3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5a878167, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4fe72309, org.springframework.security.web.session.SessionManagementFilter@1b8d502, org.springframework.security.web.access.ExceptionTranslationFilter@6cebae41, org.springframework.security.web.access.intercept.AuthorizationFilter@60cf423a]
2026-02-01 23:24:16 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-02-01 23:24:17 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2026-02-01 23:24:17 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api'
2026-02-01 23:24:17 [restartedMain] INFO  c.i.ImmunizationdbBackendApplication - Started ImmunizationdbBackendApplication in 10.212 seconds (process running for 10.788)
2026-02-01 23:24:17 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2026-02-01 23:24:17 [restartedMain] INFO  c.i.auth.config.DataInitializer - ================================================================================
2026-02-01 23:24:17 [restartedMain] INFO  c.i.auth.config.DataInitializer - Database initialized successfully with 7 users
2026-02-01 23:24:17 [restartedMain] INFO  c.i.auth.config.DataInitializer - ================================================================================
2026-02-01 23:24:17 [restartedMain] INFO  c.i.auth.config.DataInitializer - DEFAULT LOGIN CREDENTIALS:
2026-02-01 23:24:17 [restartedMain] INFO  c.i.auth.config.DataInitializer -   Health Worker:      health.worker / Password123!
2026-02-01 23:24:17 [restartedMain] INFO  c.i.auth.config.DataInitializer -   Facility Manager:   facility.manager / Password123!
2026-02-01 23:24:17 [restartedMain] INFO  c.i.auth.config.DataInitializer -   Government Official: gov.official / Password123!
2026-02-01 23:24:17 [restartedMain] INFO  c.i.auth.config.DataInitializer - ================================================================================
2026-02-01 23:24:17 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2026-02-01 23:24:17 [restartedMain] INFO  c.i.config.DatabaseSeeder - Database already seeded. Skipping seed operation.
2026-02-01 23:25:02 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[.[localhost].[/api] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-01 23:25:02 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-01 23:25:02 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2026-02-01 23:25:02 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2026-02-01 23:25:02 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2026-02-01 23:25:02 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@2e5592df
2026-02-01 23:25:02 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@119b7bcc
2026-02-01 23:25:02 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-02-01 23:25:02 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 15 ms
2026-02-01 23:25:02 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /auth/login
2026-02-01 23:25:02 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-02-01 23:25:03 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-02-01 23:25:03 [http-nio-8080-exec-1] WARN  o.s.w.s.h.HandlerMappingIntrospector - Cache miss for REQUEST dispatch to '/api/auth/login' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2026-02-01 23:25:03 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-02-01 23:25:03 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2026-02-01 23:25:03 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.auth.controller.AuthController#login(LoginRequest)
2026-02-01 23:25:03 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(username=health.worker, password=Password123!)]
2026-02-01 23:25:03 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:25:04 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:25:05 [http-nio-8080-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2026-02-01 23:25:06 [http-nio-8080-exec-1] INFO  c.i.auth.service.AuthService - User health.worker logged in successfully
2026-02-01 23:25:06 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:25:06 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [LoginResponse(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJoZWFsdGgud29ya2VyIiwiaWF0IjoxNzY5OTg0NzA2LCJleHA (truncated)...]
2026-02-01 23:25:06 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:25:06 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /appointments?facilityId=FAC001&date=2026-02-01
2026-02-01 23:25:06 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/stock?facility_id=FAC001
2026-02-01 23:25:06 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /patients/search?facilityId=FAC001
2026-02-01 23:25:06 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/stock?facility_id=FAC001
2026-02-01 23:25:06 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients/search?facilityId=FAC001
2026-02-01 23:25:06 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /appointments?facilityId=FAC001&date=2026-02-01
2026-02-01 23:25:06 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /patients/search, Auth header present: true
2026-02-01 23:25:06 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /v1/stock, Auth header present: true
2026-02-01 23:25:06 [http-nio-8080-exec-7] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /appointments, Auth header present: true
2026-02-01 23:25:06 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: health.worker
2026-02-01 23:25:06 [http-nio-8080-exec-7] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: health.worker
2026-02-01 23:25:06 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: health.worker
2026-02-01 23:25:07 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:25:07 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:25:07 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:25:07 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: health.worker, authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:25:07 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: health.worker, authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:25:07 [http-nio-8080-exec-7] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: health.worker, authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:25:07 [http-nio-8080-exec-8] INFO  c.i.a.s.JwtAuthenticationFilter - User health.worker authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:25:07 [http-nio-8080-exec-6] INFO  c.i.a.s.JwtAuthenticationFilter - User health.worker authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:25:07 [http-nio-8080-exec-7] INFO  c.i.a.s.JwtAuthenticationFilter - User health.worker authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:25:07 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients/search?facilityId=FAC001
2026-02-01 23:25:07 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/patients/search?facilityId=FAC001", parameters={masked}
2026-02-01 23:25:07 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.patient.controller.PatientController#searchPatients(String, String, String)
2026-02-01 23:25:07 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/stock?facility_id=FAC001
2026-02-01 23:25:07 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/stock?facility_id=FAC001", parameters={masked}
2026-02-01 23:25:07 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /appointments?facilityId=FAC001&date=2026-02-01
2026-02-01 23:25:07 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.StockController#getStockLevels(String)
2026-02-01 23:25:07 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/appointments?facilityId=FAC001&date=2026-02-01", parameters={masked}
2026-02-01 23:25:07 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.appointment.controller.AppointmentController#getAppointments(String, LocalDate, LocalDate, LocalDate, UUID)
2026-02-01 23:25:07 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.StockController.getStockLevels(java.lang.String); target is of class [com.immunizationdb.inventory.controller.StockController]
2026-02-01 23:25:07 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.searchPatients(java.lang.String,java.lang.String,java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2026-02-01 23:25:07 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.appointment.controller.AppointmentController.getAppointments(java.lang.String,java.time.LocalDate,java.time.LocalDate,java.time.LocalDate,java.util.UUID); target is of class [com.immunizationdb.appointment.controller.AppointmentController]
2026-02-01 23:25:07 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.searchPatients(java.lang.String,java.lang.String,java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2026-02-01 23:25:07 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.appointment.controller.AppointmentController.getAppointments(java.lang.String,java.time.LocalDate,java.time.LocalDate,java.time.LocalDate,java.util.UUID); target is of class [com.immunizationdb.appointment.controller.AppointmentController]
2026-02-01 23:25:07 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.StockController.getStockLevels(java.lang.String); target is of class [com.immunizationdb.inventory.controller.StockController]
2026-02-01 23:25:07 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=?
2026-02-01 23:25:07 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        a1_0.id,
        a1_0.appointment_date,
        a1_0.appointment_time,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.dose_number,
        a1_0.facility_id,
        a1_0.notes,
        a1_0.patient_id,
        a1_0.sms_sent,
        a1_0.sms_sent_at,
        a1_0.status,
        a1_0.updated_at,
        a1_0.vaccine_name 
    from
        appointments a1_0 
    where
        a1_0.facility_id=? 
        and a1_0.appointment_date=?
2026-02-01 23:25:07 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.facility_id=? 
        and p1_0.deleted=false 
        and (
            lower(p1_0.full_name) like lower(('%'||?||'%')) escape '' 
            or lower(p1_0.guardian_name) like lower(('%'||?||'%')) escape '' 
            or p1_0.phone_number like ('%'||?||'%') escape ''
        )
2026-02-01 23:25:07 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:25:07 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[StockLevelResponse(vaccineId=bcg, vaccineName=bcg, currentQuantity=80, oldestExpiryDate=2026-07-16, (truncated)...]
2026-02-01 23:25:07 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=?
2026-02-01 23:25:07 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:25:07 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:25:07 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[PatientResponse(id=af901eef-9855-4870-87f3-dc14ff8e2e3d, fullName=Baby John Doe, dateOfBirth=2024-1 (truncated)...]
2026-02-01 23:25:07 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:25:07 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:25:07 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[AppointmentResponse(id=6952e104-ad0d-4ee3-a8f4-a015f92971a2, patientId=1d2eb317-e52d-402c-9ee8-2d3d (truncated)...]
2026-02-01 23:25:07 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:25:25 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /patients/facility/FAC001
2026-02-01 23:25:25 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients/facility/FAC001
2026-02-01 23:25:25 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /patients/facility/FAC001, Auth header present: true
2026-02-01 23:25:25 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: health.worker
2026-02-01 23:25:25 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:25:25 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: health.worker, authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:25:25 [http-nio-8080-exec-10] INFO  c.i.a.s.JwtAuthenticationFilter - User health.worker authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:25:25 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients/facility/FAC001
2026-02-01 23:25:25 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/patients/facility/FAC001", parameters={}
2026-02-01 23:25:25 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.patient.controller.PatientController#getPatientsByFacility(String)
2026-02-01 23:25:25 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientsByFacility(java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2026-02-01 23:25:25 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientsByFacility(java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2026-02-01 23:25:25 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.facility_id=? 
        and not(p1_0.deleted)
2026-02-01 23:25:25 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:25:25 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[PatientResponse(id=af901eef-9855-4870-87f3-dc14ff8e2e3d, fullName=Baby John Doe, dateOfBirth=2024-1 (truncated)...]
2026-02-01 23:25:25 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:25:29 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /patients/af901eef-9855-4870-87f3-dc14ff8e2e3d
2026-02-01 23:25:29 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients/af901eef-9855-4870-87f3-dc14ff8e2e3d
2026-02-01 23:25:29 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /patients/af901eef-9855-4870-87f3-dc14ff8e2e3d, Auth header present: true
2026-02-01 23:25:29 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: health.worker
2026-02-01 23:25:29 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:25:29 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: health.worker, authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:25:29 [http-nio-8080-exec-1] INFO  c.i.a.s.JwtAuthenticationFilter - User health.worker authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:25:29 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients/af901eef-9855-4870-87f3-dc14ff8e2e3d
2026-02-01 23:25:29 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/patients/af901eef-9855-4870-87f3-dc14ff8e2e3d", parameters={}
2026-02-01 23:25:29 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.patient.controller.PatientController#getPatientById(UUID)
2026-02-01 23:25:29 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientById(java.util.UUID); target is of class [com.immunizationdb.patient.controller.PatientController]
2026-02-01 23:25:29 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientById(java.util.UUID); target is of class [com.immunizationdb.patient.controller.PatientController]
2026-02-01 23:25:29 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:25:29 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:25:29 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [PatientResponse(id=af901eef-9855-4870-87f3-dc14ff8e2e3d, fullName=Baby John Doe, dateOfBirth=2024-10 (truncated)...]
2026-02-01 23:25:29 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:25:29 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /patients/af901eef-9855-4870-87f3-dc14ff8e2e3d/vaccinations
2026-02-01 23:25:29 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/adverse-events/patient/af901eef-9855-4870-87f3-dc14ff8e2e3d
2026-02-01 23:25:29 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /appointments?patientId=af901eef-9855-4870-87f3-dc14ff8e2e3d
2026-02-01 23:25:29 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients/af901eef-9855-4870-87f3-dc14ff8e2e3d/vaccinations
2026-02-01 23:25:29 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /appointments?patientId=af901eef-9855-4870-87f3-dc14ff8e2e3d
2026-02-01 23:25:29 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/adverse-events/patient/af901eef-9855-4870-87f3-dc14ff8e2e3d
2026-02-01 23:25:29 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /appointments, Auth header present: true
2026-02-01 23:25:29 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /patients/af901eef-9855-4870-87f3-dc14ff8e2e3d/vaccinations, Auth header present: true
2026-02-01 23:25:29 [http-nio-8080-exec-7] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /v1/adverse-events/patient/af901eef-9855-4870-87f3-dc14ff8e2e3d, Auth header present: true
2026-02-01 23:25:29 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: health.worker
2026-02-01 23:25:29 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: health.worker
2026-02-01 23:25:29 [http-nio-8080-exec-7] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: health.worker
2026-02-01 23:25:29 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:25:29 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:25:29 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:25:29 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: health.worker, authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:25:29 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: health.worker, authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:25:29 [http-nio-8080-exec-8] INFO  c.i.a.s.JwtAuthenticationFilter - User health.worker authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:25:29 [http-nio-8080-exec-6] INFO  c.i.a.s.JwtAuthenticationFilter - User health.worker authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:25:29 [http-nio-8080-exec-7] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: health.worker, authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:25:29 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /appointments?patientId=af901eef-9855-4870-87f3-dc14ff8e2e3d
2026-02-01 23:25:29 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/appointments?patientId=af901eef-9855-4870-87f3-dc14ff8e2e3d", parameters={masked}
2026-02-01 23:25:29 [http-nio-8080-exec-7] INFO  c.i.a.s.JwtAuthenticationFilter - User health.worker authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:25:29 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients/af901eef-9855-4870-87f3-dc14ff8e2e3d/vaccinations
2026-02-01 23:25:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.appointment.controller.AppointmentController#getAppointments(String, LocalDate, LocalDate, LocalDate, UUID)
2026-02-01 23:25:29 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/patients/af901eef-9855-4870-87f3-dc14ff8e2e3d/vaccinations", parameters={}
2026-02-01 23:25:29 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.appointment.controller.AppointmentController.getAppointments(java.lang.String,java.time.LocalDate,java.time.LocalDate,java.time.LocalDate,java.util.UUID); target is of class [com.immunizationdb.appointment.controller.AppointmentController]
2026-02-01 23:25:29 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.patient.controller.PatientController#getPatientVaccinations(UUID)
2026-02-01 23:25:29 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientVaccinations(java.util.UUID); target is of class [com.immunizationdb.patient.controller.PatientController]
2026-02-01 23:25:29 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.appointment.controller.AppointmentController.getAppointments(java.lang.String,java.time.LocalDate,java.time.LocalDate,java.time.LocalDate,java.util.UUID); target is of class [com.immunizationdb.appointment.controller.AppointmentController]
2026-02-01 23:25:29 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientVaccinations(java.util.UUID); target is of class [com.immunizationdb.patient.controller.PatientController]
2026-02-01 23:25:29 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:25:29 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/adverse-events/patient/af901eef-9855-4870-87f3-dc14ff8e2e3d
2026-02-01 23:25:29 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        a1_0.id,
        a1_0.appointment_date,
        a1_0.appointment_time,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.dose_number,
        a1_0.facility_id,
        a1_0.notes,
        a1_0.patient_id,
        a1_0.sms_sent,
        a1_0.sms_sent_at,
        a1_0.status,
        a1_0.updated_at,
        a1_0.vaccine_name 
    from
        appointments a1_0 
    where
        a1_0.patient_id=?
2026-02-01 23:25:29 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/adverse-events/patient/af901eef-9855-4870-87f3-dc14ff8e2e3d", parameters={}
2026-02-01 23:25:29 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.adverseevent.controller.AdverseEventController#getPatientAdverseEvents(UUID)
2026-02-01 23:25:29 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.adverseevent.controller.AdverseEventController.getPatientAdverseEvents(java.util.UUID); target is of class [com.immunizationdb.adverseevent.controller.AdverseEventController]
2026-02-01 23:25:29 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.adverseevent.controller.AdverseEventController.getPatientAdverseEvents(java.util.UUID); target is of class [com.immunizationdb.adverseevent.controller.AdverseEventController]
2026-02-01 23:25:29 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:25:29 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=?
2026-02-01 23:25:29 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        v1_0.id,
        v1_0.administration_site,
        v1_0.batch_id,
        v1_0.created_at,
        v1_0.date_administered,
        v1_0.dose_number,
        v1_0.facility_id,
        v1_0.notes,
        v1_0.nurse_id,
        v1_0.patient_id,
        v1_0.vaccine_name 
    from
        vaccinations v1_0 
    where
        v1_0.patient_id=? 
    order by
        v1_0.date_administered desc
2026-02-01 23:25:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:25:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[AppointmentResponse(id=663b5394-c4f7-4fd0-b19f-7ee5ab5f09a6, patientId=af901eef-9855-4870-87f3-dc14 (truncated)...]
2026-02-01 23:25:29 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        ae1_0.id,
        ae1_0.action_taken,
        ae1_0.created_at,
        ae1_0.description,
        ae1_0.patient_id,
        ae1_0.reported_at,
        ae1_0.reported_by,
        ae1_0.severity,
        ae1_0.vaccination_id 
    from
        adverse_events ae1_0 
    where
        ae1_0.patient_id=? 
    order by
        ae1_0.reported_at desc
2026-02-01 23:25:29 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:25:29 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:25:29 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2026-02-01 23:25:29 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:25:29 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:25:29 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-01 23:25:29 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:25:29 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:25:29 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:25:29 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccinationResponse(id=25, patientId=af901eef-9855-4870-87f3-dc14ff8e2e3d, patientName=Baby John Do (truncated)...]
2026-02-01 23:25:29 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:25:52 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients/facility/FAC001
2026-02-01 23:25:52 [http-nio-8080-exec-9] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /patients/facility/FAC001, Auth header present: true
2026-02-01 23:25:52 [http-nio-8080-exec-9] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: health.worker
2026-02-01 23:25:52 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:25:52 [http-nio-8080-exec-9] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: health.worker, authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:25:52 [http-nio-8080-exec-9] INFO  c.i.a.s.JwtAuthenticationFilter - User health.worker authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:25:52 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients/facility/FAC001
2026-02-01 23:25:52 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/patients/facility/FAC001", parameters={}
2026-02-01 23:25:52 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.patient.controller.PatientController#getPatientsByFacility(String)
2026-02-01 23:25:52 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientsByFacility(java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2026-02-01 23:25:52 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientsByFacility(java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2026-02-01 23:25:52 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.facility_id=? 
        and not(p1_0.deleted)
2026-02-01 23:25:52 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:25:52 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[PatientResponse(id=af901eef-9855-4870-87f3-dc14ff8e2e3d, fullName=Baby John Doe, dateOfBirth=2024-1 (truncated)...]
2026-02-01 23:25:52 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:25:55 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /appointments?facilityId=FAC001&date=2026-02-01
2026-02-01 23:25:55 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /appointments, Auth header present: true
2026-02-01 23:25:55 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: health.worker
2026-02-01 23:25:55 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:25:55 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: health.worker, authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:25:55 [http-nio-8080-exec-10] INFO  c.i.a.s.JwtAuthenticationFilter - User health.worker authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:25:55 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /appointments?facilityId=FAC001&date=2026-02-01
2026-02-01 23:25:55 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/appointments?facilityId=FAC001&date=2026-02-01", parameters={masked}
2026-02-01 23:25:55 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.appointment.controller.AppointmentController#getAppointments(String, LocalDate, LocalDate, LocalDate, UUID)
2026-02-01 23:25:55 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.appointment.controller.AppointmentController.getAppointments(java.lang.String,java.time.LocalDate,java.time.LocalDate,java.time.LocalDate,java.util.UUID); target is of class [com.immunizationdb.appointment.controller.AppointmentController]
2026-02-01 23:25:55 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.appointment.controller.AppointmentController.getAppointments(java.lang.String,java.time.LocalDate,java.time.LocalDate,java.time.LocalDate,java.util.UUID); target is of class [com.immunizationdb.appointment.controller.AppointmentController]
2026-02-01 23:25:55 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        a1_0.id,
        a1_0.appointment_date,
        a1_0.appointment_time,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.dose_number,
        a1_0.facility_id,
        a1_0.notes,
        a1_0.patient_id,
        a1_0.sms_sent,
        a1_0.sms_sent_at,
        a1_0.status,
        a1_0.updated_at,
        a1_0.vaccine_name 
    from
        appointments a1_0 
    where
        a1_0.facility_id=? 
        and a1_0.appointment_date=?
2026-02-01 23:25:55 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=?
2026-02-01 23:25:55 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:25:55 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[AppointmentResponse(id=6952e104-ad0d-4ee3-a8f4-a015f92971a2, patientId=1d2eb317-e52d-402c-9ee8-2d3d (truncated)...]
2026-02-01 23:25:55 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:26:00 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/stock?facility_id=FAC001
2026-02-01 23:26:00 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /v1/stock, Auth header present: true
2026-02-01 23:26:00 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: health.worker
2026-02-01 23:26:00 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:26:00 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: health.worker, authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:26:00 [http-nio-8080-exec-2] INFO  c.i.a.s.JwtAuthenticationFilter - User health.worker authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:26:00 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/stock?facility_id=FAC001
2026-02-01 23:26:00 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/stock?facility_id=FAC001", parameters={masked}
2026-02-01 23:26:00 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.StockController#getStockLevels(String)
2026-02-01 23:26:00 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.StockController.getStockLevels(java.lang.String); target is of class [com.immunizationdb.inventory.controller.StockController]
2026-02-01 23:26:00 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.StockController.getStockLevels(java.lang.String); target is of class [com.immunizationdb.inventory.controller.StockController]
2026-02-01 23:26:00 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=?
2026-02-01 23:26:00 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:26:00 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[StockLevelResponse(vaccineId=bcg, vaccineName=bcg, currentQuantity=80, oldestExpiryDate=2026-07-16, (truncated)...]
2026-02-01 23:26:00 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:26:05 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients/facility/FAC001
2026-02-01 23:26:05 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /vaccinations/facility/FAC001
2026-02-01 23:26:05 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /patients/facility/FAC001, Auth header present: true
2026-02-01 23:26:05 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: health.worker
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /vaccinations/facility/FAC001
2026-02-01 23:26:05 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /vaccinations/facility/FAC001, Auth header present: true
2026-02-01 23:26:05 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: health.worker, authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: health.worker
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:26:05 [http-nio-8080-exec-4] INFO  c.i.a.s.JwtAuthenticationFilter - User health.worker authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: health.worker, authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:26:05 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients/facility/FAC001
2026-02-01 23:26:05 [http-nio-8080-exec-5] INFO  c.i.a.s.JwtAuthenticationFilter - User health.worker authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:26:05 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/patients/facility/FAC001", parameters={}
2026-02-01 23:26:05 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.patient.controller.PatientController#getPatientsByFacility(String)
2026-02-01 23:26:05 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientsByFacility(java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2026-02-01 23:26:05 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientsByFacility(java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /vaccinations/facility/FAC001
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/vaccinations/facility/FAC001", parameters={}
2026-02-01 23:26:05 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.facility_id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.vaccination.controller.VaccinationController#getVaccinationsByFacility(String)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByFacility(java.lang.String); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByFacility(java.lang.String); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        v1_0.id,
        v1_0.administration_site,
        v1_0.batch_id,
        v1_0.created_at,
        v1_0.date_administered,
        v1_0.dose_number,
        v1_0.facility_id,
        v1_0.notes,
        v1_0.nurse_id,
        v1_0.patient_id,
        v1_0.vaccine_name 
    from
        vaccinations v1_0 
    where
        v1_0.facility_id=?
2026-02-01 23:26:05 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:26:05 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[PatientResponse(id=af901eef-9855-4870-87f3-dc14ff8e2e3d, fullName=Baby John Doe, dateOfBirth=2024-1 (truncated)...]
2026-02-01 23:26:05 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:26:05 [http-nio-8080-exec-5] INFO  c.i.v.service.VaccinationService - Found 33 vaccinations for facility: FAC001
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:05 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:06 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:06 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:26:06 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccinationResponse(id=1, patientId=af901eef-9855-4870-87f3-dc14ff8e2e3d, patientName=Baby John Doe (truncated)...]
2026-02-01 23:26:06 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:26:15 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /vaccinations/facility/FAC001
2026-02-01 23:26:15 [http-nio-8080-exec-3] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /vaccinations/facility/FAC001, Auth header present: true
2026-02-01 23:26:15 [http-nio-8080-exec-3] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: health.worker
2026-02-01 23:26:15 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:26:15 [http-nio-8080-exec-3] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: health.worker, authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:26:15 [http-nio-8080-exec-3] INFO  c.i.a.s.JwtAuthenticationFilter - User health.worker authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:26:15 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /vaccinations/facility/FAC001
2026-02-01 23:26:15 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/vaccinations/facility/FAC001", parameters={}
2026-02-01 23:26:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.vaccination.controller.VaccinationController#getVaccinationsByFacility(String)
2026-02-01 23:26:15 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByFacility(java.lang.String); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2026-02-01 23:26:15 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByFacility(java.lang.String); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2026-02-01 23:26:15 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        v1_0.id,
        v1_0.administration_site,
        v1_0.batch_id,
        v1_0.created_at,
        v1_0.date_administered,
        v1_0.dose_number,
        v1_0.facility_id,
        v1_0.notes,
        v1_0.nurse_id,
        v1_0.patient_id,
        v1_0.vaccine_name 
    from
        vaccinations v1_0 
    where
        v1_0.facility_id=?
2026-02-01 23:26:16 [http-nio-8080-exec-3] INFO  c.i.v.service.VaccinationService - Found 33 vaccinations for facility: FAC001
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccinationResponse(id=1, patientId=af901eef-9855-4870-87f3-dc14ff8e2e3d, patientName=Baby John Doe (truncated)...]
2026-02-01 23:26:16 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:26:17 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/stock?facility_id=FAC001
2026-02-01 23:26:17 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /v1/stock, Auth header present: true
2026-02-01 23:26:17 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: health.worker
2026-02-01 23:26:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:26:17 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: health.worker, authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:26:17 [http-nio-8080-exec-8] INFO  c.i.a.s.JwtAuthenticationFilter - User health.worker authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:26:17 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/stock?facility_id=FAC001
2026-02-01 23:26:17 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/stock?facility_id=FAC001", parameters={masked}
2026-02-01 23:26:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.StockController#getStockLevels(String)
2026-02-01 23:26:17 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.StockController.getStockLevels(java.lang.String); target is of class [com.immunizationdb.inventory.controller.StockController]
2026-02-01 23:26:17 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.StockController.getStockLevels(java.lang.String); target is of class [com.immunizationdb.inventory.controller.StockController]
2026-02-01 23:26:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=?
2026-02-01 23:26:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:26:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[StockLevelResponse(vaccineId=bcg, vaccineName=bcg, currentQuantity=80, oldestExpiryDate=2026-07-16, (truncated)...]
2026-02-01 23:26:17 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:26:44 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /auth/logout
2026-02-01 23:26:44 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/logout
2026-02-01 23:26:44 [http-nio-8080-exec-9] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /auth/logout, Auth header present: true
2026-02-01 23:26:44 [http-nio-8080-exec-9] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: health.worker
2026-02-01 23:26:44 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:26:44 [http-nio-8080-exec-9] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: health.worker, authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:26:44 [http-nio-8080-exec-9] INFO  c.i.a.s.JwtAuthenticationFilter - User health.worker authenticated successfully with authorities: [ROLE_HEALTH_WORKER]
2026-02-01 23:26:44 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/logout
2026-02-01 23:26:44 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/logout", parameters={}
2026-02-01 23:26:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.auth.controller.AuthController#logout(Authentication)
2026-02-01 23:26:44 [http-nio-8080-exec-9] INFO  c.i.auth.controller.AuthController - User health.worker logged out
2026-02-01 23:26:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:26:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [MessageResponse[message=Logged out successfully]]
2026-02-01 23:26:44 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:26:49 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-02-01 23:26:49 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-02-01 23:26:49 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-02-01 23:26:49 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2026-02-01 23:26:49 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.auth.controller.AuthController#login(LoginRequest)
2026-02-01 23:26:49 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(username=facility.manager, password=Password123!)]
2026-02-01 23:26:49 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:26:49 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:26:51 [http-nio-8080-exec-10] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2026-02-01 23:26:51 [http-nio-8080-exec-10] INFO  c.i.auth.service.AuthService - User facility.manager logged in successfully
2026-02-01 23:26:51 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:26:51 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [LoginResponse(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJmYWNpbGl0eS5tYW5hZ2VyIiwiaWF0IjoxNzY5OTg0ODExLCJ (truncated)...]
2026-02-01 23:26:51 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:26:51 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /vaccinations/facility/FAC001?startDate=2026-02-01&endDate=2026-02-01
2026-02-01 23:26:51 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients/facility/FAC001
2026-02-01 23:26:51 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /patients/facility/FAC001, Auth header present: true
2026-02-01 23:26:51 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /vaccinations/facility/FAC001?startDate=2025-12-31&endDate=2026-12-30
2026-02-01 23:26:51 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /inventory/batches/expiring?days=30&facilityId=FAC001
2026-02-01 23:26:51 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/stock?facility_id=FAC001
2026-02-01 23:26:51 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /vaccinations/facility/FAC001?startDate=2026-02-01&endDate=2026-02-01
2026-02-01 23:26:51 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:26:51 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /v1/stock, Auth header present: true
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /vaccinations/facility/FAC001?startDate=2025-12-31&endDate=2026-12-30
2026-02-01 23:26:51 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /vaccinations/facility/FAC001?startDate=2026-02-01&endDate=2026-02-01
2026-02-01 23:26:51 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /inventory/batches/expiring?days=30&facilityId=FAC001
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /vaccinations/facility/FAC001, Auth header present: true
2026-02-01 23:26:51 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:26:51 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /inventory/batches/expiring, Auth header present: true
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /vaccinations/facility/FAC001, Auth header present: true
2026-02-01 23:26:51 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:26:51 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:26:51 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:26:51 [http-nio-8080-exec-2] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:26:51 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:26:51 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:26:51 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients/facility/FAC001
2026-02-01 23:26:51 [http-nio-8080-exec-6] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:26:51 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/patients/facility/FAC001", parameters={}
2026-02-01 23:26:51 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.patient.controller.PatientController#getPatientsByFacility(String)
2026-02-01 23:26:51 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:26:51 [http-nio-8080-exec-7] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:26:51 [http-nio-8080-exec-8] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /vaccinations/facility/FAC001?startDate=2025-12-31&endDate=2026-12-30
2026-02-01 23:26:51 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientsByFacility(java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/vaccinations/facility/FAC001?startDate=2025-12-31&endDate=2026-12-30", parameters={masked}
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.vaccination.controller.VaccinationController#getVaccinationsByFacility(String)
2026-02-01 23:26:51 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientsByFacility(java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByFacility(java.lang.String); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2026-02-01 23:26:51 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/stock?facility_id=FAC001
2026-02-01 23:26:51 [http-nio-8080-exec-4] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByFacility(java.lang.String); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2026-02-01 23:26:51 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/stock?facility_id=FAC001", parameters={masked}
2026-02-01 23:26:51 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.facility_id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        v1_0.id,
        v1_0.administration_site,
        v1_0.batch_id,
        v1_0.created_at,
        v1_0.date_administered,
        v1_0.dose_number,
        v1_0.facility_id,
        v1_0.notes,
        v1_0.nurse_id,
        v1_0.patient_id,
        v1_0.vaccine_name 
    from
        vaccinations v1_0 
    where
        v1_0.facility_id=?
2026-02-01 23:26:51 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.StockController#getStockLevels(String)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /vaccinations/facility/FAC001?startDate=2026-02-01&endDate=2026-02-01
2026-02-01 23:26:51 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /inventory/batches/expiring?days=30&facilityId=FAC001
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/vaccinations/facility/FAC001?startDate=2026-02-01&endDate=2026-02-01", parameters={masked}
2026-02-01 23:26:51 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.StockController.getStockLevels(java.lang.String); target is of class [com.immunizationdb.inventory.controller.StockController]
2026-02-01 23:26:51 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/inventory/batches/expiring?days=30&facilityId=FAC001", parameters={masked}
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.vaccination.controller.VaccinationController#getVaccinationsByFacility(String)
2026-02-01 23:26:51 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.InventoryController#getExpiringBatches(String, int)
2026-02-01 23:26:51 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.StockController.getStockLevels(java.lang.String); target is of class [com.immunizationdb.inventory.controller.StockController]
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByFacility(java.lang.String); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2026-02-01 23:26:51 [http-nio-8080-exec-6] INFO  c.i.v.service.VaccinationService - Found 33 vaccinations for facility: FAC001
2026-02-01 23:26:51 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:26:51 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=?
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByFacility(java.lang.String); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2026-02-01 23:26:51 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[PatientResponse(id=af901eef-9855-4870-87f3-dc14ff8e2e3d, fullName=Baby John Doe, dateOfBirth=2024-1 (truncated)...]
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients/facility/FAC001
2026-02-01 23:26:51 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:26:51 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getExpiringBatches(java.lang.String,int); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2026-02-01 23:26:51 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /patients/facility/FAC001, Auth header present: true
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        v1_0.id,
        v1_0.administration_site,
        v1_0.batch_id,
        v1_0.created_at,
        v1_0.date_administered,
        v1_0.dose_number,
        v1_0.facility_id,
        v1_0.notes,
        v1_0.nurse_id,
        v1_0.patient_id,
        v1_0.vaccine_name 
    from
        vaccinations v1_0 
    where
        v1_0.facility_id=?
2026-02-01 23:26:51 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getExpiringBatches(java.lang.String,int); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:26:51 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:26:51 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:26:51 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[StockLevelResponse(vaccineId=bcg, vaccineName=bcg, currentQuantity=80, oldestExpiryDate=2026-07-16, (truncated)...]
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-01 23:26:51 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:26:51 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:26:51 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.expiry_date between ? and ? 
        and vb1_0.quantity_remaining>0
2026-02-01 23:26:51 [http-nio-8080-exec-10] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] INFO  c.i.v.service.VaccinationService - Found 33 vaccinations for facility: FAC001
2026-02-01 23:26:51 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients/facility/FAC001
2026-02-01 23:26:51 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:26:51 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/patients/facility/FAC001", parameters={}
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.patient.controller.PatientController#getPatientsByFacility(String)
2026-02-01 23:26:51 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccineBatchResponse(id=36, batchNumber=YFR-2026-04, vaccineName=yellow-fever, manufacturer=AYOP ld (truncated)...]
2026-02-01 23:26:51 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientsByFacility(java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2026-02-01 23:26:51 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientsByFacility(java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.facility_id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:26:51 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[PatientResponse(id=af901eef-9855-4870-87f3-dc14ff8e2e3d, fullName=Baby John Doe, dateOfBirth=2024-1 (truncated)...]
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:26:51 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccinationResponse(id=1, patientId=af901eef-9855-4870-87f3-dc14ff8e2e3d, patientName=Baby John Doe (truncated)...]
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-01 23:26:51 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:26:52 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccinationResponse(id=1, patientId=af901eef-9855-4870-87f3-dc14ff8e2e3d, patientName=Baby John Doe (truncated)...]
2026-02-01 23:26:52 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /vaccinations/facility/FAC001?startDate=2026-02-01&endDate=2026-02-01
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /vaccinations/facility/FAC001, Auth header present: true
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:26:52 [http-nio-8080-exec-1] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /vaccinations/facility/FAC001?startDate=2026-02-01&endDate=2026-02-01
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/vaccinations/facility/FAC001?startDate=2026-02-01&endDate=2026-02-01", parameters={masked}
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.vaccination.controller.VaccinationController#getVaccinationsByFacility(String)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByFacility(java.lang.String); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByFacility(java.lang.String); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        v1_0.id,
        v1_0.administration_site,
        v1_0.batch_id,
        v1_0.created_at,
        v1_0.date_administered,
        v1_0.dose_number,
        v1_0.facility_id,
        v1_0.notes,
        v1_0.nurse_id,
        v1_0.patient_id,
        v1_0.vaccine_name 
    from
        vaccinations v1_0 
    where
        v1_0.facility_id=?
2026-02-01 23:26:52 [http-nio-8080-exec-1] INFO  c.i.v.service.VaccinationService - Found 33 vaccinations for facility: FAC001
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccinationResponse(id=1, patientId=af901eef-9855-4870-87f3-dc14ff8e2e3d, patientName=Baby John Doe (truncated)...]
2026-02-01 23:26:52 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:27:02 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients/facility/FAC001
2026-02-01 23:27:02 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /patients/facility/FAC001, Auth header present: true
2026-02-01 23:27:02 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:27:02 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:27:02 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:02 [http-nio-8080-exec-5] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:02 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients/facility/FAC001
2026-02-01 23:27:02 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/patients/facility/FAC001", parameters={}
2026-02-01 23:27:02 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.patient.controller.PatientController#getPatientsByFacility(String)
2026-02-01 23:27:02 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientsByFacility(java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2026-02-01 23:27:02 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientsByFacility(java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2026-02-01 23:27:02 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.facility_id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:02 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:27:02 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[PatientResponse(id=af901eef-9855-4870-87f3-dc14ff8e2e3d, fullName=Baby John Doe, dateOfBirth=2024-1 (truncated)...]
2026-02-01 23:27:02 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:27:04 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /vaccinations/facility/FAC001
2026-02-01 23:27:04 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /inventory/vaccines
2026-02-01 23:27:04 [http-nio-8080-exec-9] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /vaccinations/facility/FAC001, Auth header present: true
2026-02-01 23:27:04 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /inventory/vaccines
2026-02-01 23:27:04 [http-nio-8080-exec-9] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:27:04 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /inventory/vaccines, Auth header present: true
2026-02-01 23:27:04 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:27:04 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:27:04 [http-nio-8080-exec-9] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:04 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:27:04 [http-nio-8080-exec-9] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:04 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:04 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /vaccinations/facility/FAC001
2026-02-01 23:27:04 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/vaccinations/facility/FAC001", parameters={}
2026-02-01 23:27:04 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.vaccination.controller.VaccinationController#getVaccinationsByFacility(String)
2026-02-01 23:27:04 [http-nio-8080-exec-2] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:04 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByFacility(java.lang.String); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2026-02-01 23:27:04 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByFacility(java.lang.String); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2026-02-01 23:27:04 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /inventory/vaccines
2026-02-01 23:27:04 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/inventory/vaccines", parameters={}
2026-02-01 23:27:04 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.InventoryController#getAllVaccines()
2026-02-01 23:27:04 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getAllVaccines(); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2026-02-01 23:27:04 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        v1_0.id,
        v1_0.administration_site,
        v1_0.batch_id,
        v1_0.created_at,
        v1_0.date_administered,
        v1_0.dose_number,
        v1_0.facility_id,
        v1_0.notes,
        v1_0.nurse_id,
        v1_0.patient_id,
        v1_0.vaccine_name 
    from
        vaccinations v1_0 
    where
        v1_0.facility_id=?
2026-02-01 23:27:04 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getAllVaccines(); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2026-02-01 23:27:04 [http-nio-8080-exec-9] INFO  c.i.v.service.VaccinationService - Found 33 vaccinations for facility: FAC001
2026-02-01 23:27:04 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:27:04 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{code=BCG, maxDoses=1, name=BCG, id=bcg, isActive=true}, {code=OPV, maxDoses=4, name=OPV, id=opv, i (truncated)...]
2026-02-01 23:27:04 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:04 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:27:04 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccinationResponse(id=1, patientId=af901eef-9855-4870-87f3-dc14ff8e2e3d, patientName=Baby John Doe (truncated)...]
2026-02-01 23:27:05 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:27:06 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/stock?facility_id=FAC001
2026-02-01 23:27:06 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /inventory/vaccines
2026-02-01 23:27:06 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /v1/stock, Auth header present: true
2026-02-01 23:27:06 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /inventory/vaccines, Auth header present: true
2026-02-01 23:27:06 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:27:06 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:27:06 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:27:06 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:27:06 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:06 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:06 [http-nio-8080-exec-4] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:06 [http-nio-8080-exec-8] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:06 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /inventory/vaccines
2026-02-01 23:27:06 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/inventory/vaccines", parameters={}
2026-02-01 23:27:06 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.InventoryController#getAllVaccines()
2026-02-01 23:27:06 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/stock?facility_id=FAC001
2026-02-01 23:27:06 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/stock?facility_id=FAC001", parameters={masked}
2026-02-01 23:27:06 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getAllVaccines(); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2026-02-01 23:27:06 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getAllVaccines(); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2026-02-01 23:27:06 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.StockController#getStockLevels(String)
2026-02-01 23:27:06 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:27:06 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.StockController.getStockLevels(java.lang.String); target is of class [com.immunizationdb.inventory.controller.StockController]
2026-02-01 23:27:06 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{code=BCG, maxDoses=1, name=BCG, id=bcg, isActive=true}, {code=OPV, maxDoses=4, name=OPV, id=opv, i (truncated)...]
2026-02-01 23:27:06 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.StockController.getStockLevels(java.lang.String); target is of class [com.immunizationdb.inventory.controller.StockController]
2026-02-01 23:27:06 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:27:06 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=?
2026-02-01 23:27:06 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:27:06 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[StockLevelResponse(vaccineId=bcg, vaccineName=bcg, currentQuantity=80, oldestExpiryDate=2026-07-16, (truncated)...]
2026-02-01 23:27:06 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:27:06 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /inventory/batches/expiring?days=30&facilityId=FAC001
2026-02-01 23:27:06 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /inventory/batches/expiring, Auth header present: true
2026-02-01 23:27:06 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:27:06 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:27:06 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:06 [http-nio-8080-exec-10] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:06 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /inventory/batches/expiring?days=30&facilityId=FAC001
2026-02-01 23:27:06 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/inventory/batches/expiring?days=30&facilityId=FAC001", parameters={masked}
2026-02-01 23:27:06 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.InventoryController#getExpiringBatches(String, int)
2026-02-01 23:27:06 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getExpiringBatches(java.lang.String,int); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2026-02-01 23:27:06 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getExpiringBatches(java.lang.String,int); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2026-02-01 23:27:06 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.expiry_date between ? and ? 
        and vb1_0.quantity_remaining>0
2026-02-01 23:27:06 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:27:06 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccineBatchResponse(id=36, batchNumber=YFR-2026-04, vaccineName=yellow-fever, manufacturer=AYOP ld (truncated)...]
2026-02-01 23:27:06 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:27:07 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /users/facility/staff
2026-02-01 23:27:07 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users/facility/staff
2026-02-01 23:27:07 [http-nio-8080-exec-7] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /users/facility/staff, Auth header present: true
2026-02-01 23:27:07 [http-nio-8080-exec-7] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:27:07 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:27:07 [http-nio-8080-exec-7] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:07 [http-nio-8080-exec-7] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:07 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users/facility/staff
2026-02-01 23:27:07 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/facility/staff", parameters={}
2026-02-01 23:27:07 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.auth.controller.UserController#getFacilityStaff(UserDetails)
2026-02-01 23:27:07 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.auth.controller.UserController.getFacilityStaff(org.springframework.security.core.userdetails.UserDetails); target is of class [com.immunizationdb.auth.controller.UserController]
2026-02-01 23:27:07 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.auth.controller.UserController.getFacilityStaff(org.springframework.security.core.userdetails.UserDetails); target is of class [com.immunizationdb.auth.controller.UserController]
2026-02-01 23:27:07 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:27:07 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.facility_id=? 
        and not(u1_0.deleted) 
        and u1_0.active
2026-02-01 23:27:07 [http-nio-8080-exec-7] INFO  c.i.auth.controller.UserController - Retrieved 3 staff members for facility FAC001
2026-02-01 23:27:07 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:27:07 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[UserResponse(id=1, username=health.worker, email=health.worker@immunization.com, fullName=Health Wo (truncated)...]
2026-02-01 23:27:07 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:27:11 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /sms-logs
2026-02-01 23:27:11 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /sms-logs
2026-02-01 23:27:11 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /sms-logs, Auth header present: true
2026-02-01 23:27:11 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:27:11 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:27:11 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:11 [http-nio-8080-exec-5] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:11 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /sms-logs
2026-02-01 23:27:11 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/sms-logs", parameters={}
2026-02-01 23:27:11 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.sms.controller.SmsLogController#getSmsLogs(LocalDateTime, LocalDateTime, String, String)
2026-02-01 23:27:11 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.sms.controller.SmsLogController.getSmsLogs(java.time.LocalDateTime,java.time.LocalDateTime,java.lang.String,java.lang.String); target is of class [com.immunizationdb.sms.controller.SmsLogController]
2026-02-01 23:27:11 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.sms.controller.SmsLogController.getSmsLogs(java.time.LocalDateTime,java.time.LocalDateTime,java.lang.String,java.lang.String); target is of class [com.immunizationdb.sms.controller.SmsLogController]
2026-02-01 23:27:11 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        sl1_0.id,
        sl1_0.appointment_id,
        sl1_0.created_at,
        sl1_0.error_message,
        sl1_0.message,
        sl1_0.patient_id,
        sl1_0.recipient_phone,
        sl1_0.sent_at,
        sl1_0.status 
    from
        sms_logs sl1_0
2026-02-01 23:27:11 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:27:11 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[SmsLogResponse(id=1, recipientPhone=+237699226444, message=Appointment Rescheduled: Bring Tom tam f (truncated)...]
2026-02-01 23:27:11 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:27:16 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients/facility/FAC001
2026-02-01 23:27:16 [http-nio-8080-exec-3] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /patients/facility/FAC001, Auth header present: true
2026-02-01 23:27:16 [http-nio-8080-exec-3] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:27:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:27:16 [http-nio-8080-exec-3] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:16 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /inventory/batches/expiring?days=30&facilityId=FAC001
2026-02-01 23:27:16 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /vaccinations/facility/FAC001?startDate=2026-02-01&endDate=2026-02-01
2026-02-01 23:27:16 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /vaccinations/facility/FAC001?startDate=2025-12-31&endDate=2026-12-30
2026-02-01 23:27:16 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /inventory/batches/expiring, Auth header present: true
2026-02-01 23:27:16 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /vaccinations/facility/FAC001, Auth header present: true
2026-02-01 23:27:16 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/stock?facility_id=FAC001
2026-02-01 23:27:16 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /vaccinations/facility/FAC001, Auth header present: true
2026-02-01 23:27:16 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:27:16 [http-nio-8080-exec-9] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /v1/stock, Auth header present: true
2026-02-01 23:27:16 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:27:16 [http-nio-8080-exec-3] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:16 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:27:16 [http-nio-8080-exec-9] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:27:16 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:27:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:27:16 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:27:16 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:27:16 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients/facility/FAC001
2026-02-01 23:27:16 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:16 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:16 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/patients/facility/FAC001", parameters={}
2026-02-01 23:27:16 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:16 [http-nio-8080-exec-9] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:16 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.patient.controller.PatientController#getPatientsByFacility(String)
2026-02-01 23:27:16 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientsByFacility(java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2026-02-01 23:27:16 [http-nio-8080-exec-2] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:16 [http-nio-8080-exec-4] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:16 [http-nio-8080-exec-8] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:16 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientsByFacility(java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2026-02-01 23:27:16 [http-nio-8080-exec-9] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:16 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /inventory/batches/expiring?days=30&facilityId=FAC001
2026-02-01 23:27:16 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /vaccinations/facility/FAC001?startDate=2026-02-01&endDate=2026-02-01
2026-02-01 23:27:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.facility_id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:16 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /vaccinations/facility/FAC001?startDate=2025-12-31&endDate=2026-12-30
2026-02-01 23:27:16 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/vaccinations/facility/FAC001?startDate=2025-12-31&endDate=2026-12-30", parameters={masked}
2026-02-01 23:27:16 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/vaccinations/facility/FAC001?startDate=2026-02-01&endDate=2026-02-01", parameters={masked}
2026-02-01 23:27:16 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/inventory/batches/expiring?days=30&facilityId=FAC001", parameters={masked}
2026-02-01 23:27:16 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.vaccination.controller.VaccinationController#getVaccinationsByFacility(String)
2026-02-01 23:27:16 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.vaccination.controller.VaccinationController#getVaccinationsByFacility(String)
2026-02-01 23:27:16 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/stock?facility_id=FAC001
2026-02-01 23:27:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.InventoryController#getExpiringBatches(String, int)
2026-02-01 23:27:16 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByFacility(java.lang.String); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2026-02-01 23:27:16 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByFacility(java.lang.String); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2026-02-01 23:27:16 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/stock?facility_id=FAC001", parameters={masked}
2026-02-01 23:27:16 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:27:16 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByFacility(java.lang.String); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2026-02-01 23:27:16 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.StockController#getStockLevels(String)
2026-02-01 23:27:16 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getExpiringBatches(java.lang.String,int); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2026-02-01 23:27:16 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByFacility(java.lang.String); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2026-02-01 23:27:16 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[PatientResponse(id=af901eef-9855-4870-87f3-dc14ff8e2e3d, fullName=Baby John Doe, dateOfBirth=2024-1 (truncated)...]
2026-02-01 23:27:16 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getExpiringBatches(java.lang.String,int); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2026-02-01 23:27:16 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.StockController.getStockLevels(java.lang.String); target is of class [com.immunizationdb.inventory.controller.StockController]
2026-02-01 23:27:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        v1_0.id,
        v1_0.administration_site,
        v1_0.batch_id,
        v1_0.created_at,
        v1_0.date_administered,
        v1_0.dose_number,
        v1_0.facility_id,
        v1_0.notes,
        v1_0.nurse_id,
        v1_0.patient_id,
        v1_0.vaccine_name 
    from
        vaccinations v1_0 
    where
        v1_0.facility_id=?
2026-02-01 23:27:16 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.StockController.getStockLevels(java.lang.String); target is of class [com.immunizationdb.inventory.controller.StockController]
2026-02-01 23:27:16 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        v1_0.id,
        v1_0.administration_site,
        v1_0.batch_id,
        v1_0.created_at,
        v1_0.date_administered,
        v1_0.dose_number,
        v1_0.facility_id,
        v1_0.notes,
        v1_0.nurse_id,
        v1_0.patient_id,
        v1_0.vaccine_name 
    from
        vaccinations v1_0 
    where
        v1_0.facility_id=?
2026-02-01 23:27:16 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.expiry_date between ? and ? 
        and vb1_0.quantity_remaining>0
2026-02-01 23:27:16 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=?
2026-02-01 23:27:16 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:27:16 [http-nio-8080-exec-2] INFO  c.i.v.service.VaccinationService - Found 33 vaccinations for facility: FAC001
2026-02-01 23:27:16 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients/facility/FAC001
2026-02-01 23:27:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:27:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccineBatchResponse(id=36, batchNumber=YFR-2026-04, vaccineName=yellow-fever, manufacturer=AYOP ld (truncated)...]
2026-02-01 23:27:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:16 [http-nio-8080-exec-8] INFO  c.i.v.service.VaccinationService - Found 33 vaccinations for facility: FAC001
2026-02-01 23:27:16 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /patients/facility/FAC001, Auth header present: true
2026-02-01 23:27:16 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:27:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:27:16 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:16 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:27:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-01 23:27:16 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:27:16 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:27:16 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:27:16 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:16 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[StockLevelResponse(vaccineId=bcg, vaccineName=bcg, currentQuantity=80, oldestExpiryDate=2026-07-16, (truncated)...]
2026-02-01 23:27:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:16 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:27:16 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-01 23:27:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-10] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients/facility/FAC001
2026-02-01 23:27:17 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/patients/facility/FAC001", parameters={}
2026-02-01 23:27:17 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.patient.controller.PatientController#getPatientsByFacility(String)
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientsByFacility(java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2026-02-01 23:27:17 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientsByFacility(java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.facility_id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:27:17 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[PatientResponse(id=af901eef-9855-4870-87f3-dc14ff8e2e3d, fullName=Baby John Doe, dateOfBirth=2024-1 (truncated)...]
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccinationResponse(id=1, patientId=af901eef-9855-4870-87f3-dc14ff8e2e3d, patientName=Baby John Doe (truncated)...]
2026-02-01 23:27:17 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /vaccinations/facility/FAC001?startDate=2026-02-01&endDate=2026-02-01
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /vaccinations/facility/FAC001, Auth header present: true
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccinationResponse(id=1, patientId=af901eef-9855-4870-87f3-dc14ff8e2e3d, patientName=Baby John Doe (truncated)...]
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:27:17 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:17 [http-nio-8080-exec-6] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /vaccinations/facility/FAC001?startDate=2026-02-01&endDate=2026-02-01
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/vaccinations/facility/FAC001?startDate=2026-02-01&endDate=2026-02-01", parameters={masked}
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.vaccination.controller.VaccinationController#getVaccinationsByFacility(String)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByFacility(java.lang.String); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByFacility(java.lang.String); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        v1_0.id,
        v1_0.administration_site,
        v1_0.batch_id,
        v1_0.created_at,
        v1_0.date_administered,
        v1_0.dose_number,
        v1_0.facility_id,
        v1_0.notes,
        v1_0.nurse_id,
        v1_0.patient_id,
        v1_0.vaccine_name 
    from
        vaccinations v1_0 
    where
        v1_0.facility_id=?
2026-02-01 23:27:17 [http-nio-8080-exec-6] INFO  c.i.v.service.VaccinationService - Found 33 vaccinations for facility: FAC001
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccinationResponse(id=1, patientId=af901eef-9855-4870-87f3-dc14ff8e2e3d, patientName=Baby John Doe (truncated)...]
2026-02-01 23:27:17 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:27:25 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /appointments?facilityId=FAC001
2026-02-01 23:27:25 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /appointments?facilityId=FAC001
2026-02-01 23:27:25 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /appointments, Auth header present: true
2026-02-01 23:27:25 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:27:25 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:27:25 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:25 [http-nio-8080-exec-1] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:27:25 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /appointments?facilityId=FAC001
2026-02-01 23:27:25 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/appointments?facilityId=FAC001", parameters={masked}
2026-02-01 23:27:25 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.appointment.controller.AppointmentController#getAppointments(String, LocalDate, LocalDate, LocalDate, UUID)
2026-02-01 23:27:25 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.appointment.controller.AppointmentController.getAppointments(java.lang.String,java.time.LocalDate,java.time.LocalDate,java.time.LocalDate,java.util.UUID); target is of class [com.immunizationdb.appointment.controller.AppointmentController]
2026-02-01 23:27:25 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.appointment.controller.AppointmentController.getAppointments(java.lang.String,java.time.LocalDate,java.time.LocalDate,java.time.LocalDate,java.util.UUID); target is of class [com.immunizationdb.appointment.controller.AppointmentController]
2026-02-01 23:27:25 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        a1_0.id,
        a1_0.appointment_date,
        a1_0.appointment_time,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.dose_number,
        a1_0.facility_id,
        a1_0.notes,
        a1_0.patient_id,
        a1_0.sms_sent,
        a1_0.sms_sent_at,
        a1_0.status,
        a1_0.updated_at,
        a1_0.vaccine_name 
    from
        appointments a1_0 
    where
        a1_0.facility_id=?
2026-02-01 23:27:25 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=?
2026-02-01 23:27:25 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=?
2026-02-01 23:27:25 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=?
2026-02-01 23:27:25 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=?
2026-02-01 23:27:26 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=?
2026-02-01 23:27:26 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:27:26 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[AppointmentResponse(id=1ea0ec8c-cf8d-4d2b-b665-30af3f215eb1, patientId=c9591ed2-5a1a-49a7-99e4-85a9 (truncated)...]
2026-02-01 23:27:26 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:28:09 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /appointments?facilityId=FAC001&date=2026-02-01
2026-02-01 23:28:09 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /appointments, Auth header present: true
2026-02-01 23:28:09 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:28:09 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:28:09 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:28:09 [http-nio-8080-exec-5] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:28:09 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /appointments?facilityId=FAC001&date=2026-02-01
2026-02-01 23:28:09 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/appointments?facilityId=FAC001&date=2026-02-01", parameters={masked}
2026-02-01 23:28:09 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.appointment.controller.AppointmentController#getAppointments(String, LocalDate, LocalDate, LocalDate, UUID)
2026-02-01 23:28:09 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.appointment.controller.AppointmentController.getAppointments(java.lang.String,java.time.LocalDate,java.time.LocalDate,java.time.LocalDate,java.util.UUID); target is of class [com.immunizationdb.appointment.controller.AppointmentController]
2026-02-01 23:28:09 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.appointment.controller.AppointmentController.getAppointments(java.lang.String,java.time.LocalDate,java.time.LocalDate,java.time.LocalDate,java.util.UUID); target is of class [com.immunizationdb.appointment.controller.AppointmentController]
2026-02-01 23:28:09 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        a1_0.id,
        a1_0.appointment_date,
        a1_0.appointment_time,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.dose_number,
        a1_0.facility_id,
        a1_0.notes,
        a1_0.patient_id,
        a1_0.sms_sent,
        a1_0.sms_sent_at,
        a1_0.status,
        a1_0.updated_at,
        a1_0.vaccine_name 
    from
        appointments a1_0 
    where
        a1_0.facility_id=? 
        and a1_0.appointment_date=?
2026-02-01 23:28:09 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=?
2026-02-01 23:28:09 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:28:09 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[AppointmentResponse(id=6952e104-ad0d-4ee3-a8f4-a015f92971a2, patientId=1d2eb317-e52d-402c-9ee8-2d3d (truncated)...]
2026-02-01 23:28:09 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:28:26 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /appointments?facilityId=FAC001&date=2026-02-01
2026-02-01 23:28:26 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /appointments, Auth header present: true
2026-02-01 23:28:27 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:28:27 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:28:27 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:28:27 [http-nio-8080-exec-8] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:28:27 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /appointments?facilityId=FAC001&date=2026-02-01
2026-02-01 23:28:27 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/appointments?facilityId=FAC001&date=2026-02-01", parameters={masked}
2026-02-01 23:28:27 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.appointment.controller.AppointmentController#getAppointments(String, LocalDate, LocalDate, LocalDate, UUID)
2026-02-01 23:28:27 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.appointment.controller.AppointmentController.getAppointments(java.lang.String,java.time.LocalDate,java.time.LocalDate,java.time.LocalDate,java.util.UUID); target is of class [com.immunizationdb.appointment.controller.AppointmentController]
2026-02-01 23:28:27 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.appointment.controller.AppointmentController.getAppointments(java.lang.String,java.time.LocalDate,java.time.LocalDate,java.time.LocalDate,java.util.UUID); target is of class [com.immunizationdb.appointment.controller.AppointmentController]
2026-02-01 23:28:27 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        a1_0.id,
        a1_0.appointment_date,
        a1_0.appointment_time,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.dose_number,
        a1_0.facility_id,
        a1_0.notes,
        a1_0.patient_id,
        a1_0.sms_sent,
        a1_0.sms_sent_at,
        a1_0.status,
        a1_0.updated_at,
        a1_0.vaccine_name 
    from
        appointments a1_0 
    where
        a1_0.facility_id=? 
        and a1_0.appointment_date=?
2026-02-01 23:28:27 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=?
2026-02-01 23:28:27 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:28:27 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[AppointmentResponse(id=6952e104-ad0d-4ee3-a8f4-a015f92971a2, patientId=1d2eb317-e52d-402c-9ee8-2d3d (truncated)...]
2026-02-01 23:28:27 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:29:58 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /vaccinations/facility/FAC001?startDate=2026-02-01&endDate=2026-02-01
2026-02-01 23:29:58 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/stock?facility_id=FAC001
2026-02-01 23:29:58 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients/facility/FAC001
2026-02-01 23:29:58 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /vaccinations/facility/FAC001?startDate=2025-12-31&endDate=2026-12-30
2026-02-01 23:29:58 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /inventory/batches/expiring?days=30&facilityId=FAC001
2026-02-01 23:29:58 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /v1/stock, Auth header present: true
2026-02-01 23:29:58 [http-nio-8080-exec-7] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /patients/facility/FAC001, Auth header present: true
2026-02-01 23:29:58 [http-nio-8080-exec-3] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /inventory/batches/expiring, Auth header present: true
2026-02-01 23:29:58 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /vaccinations/facility/FAC001, Auth header present: true
2026-02-01 23:29:58 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /vaccinations/facility/FAC001, Auth header present: true
2026-02-01 23:29:58 [http-nio-8080-exec-7] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:29:58 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:29:58 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:29:58 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:29:58 [http-nio-8080-exec-3] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:29:58 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:29:58 [http-nio-8080-exec-7] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:29:58 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:29:58 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:29:58 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:29:58 [http-nio-8080-exec-3] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:29:58 [http-nio-8080-exec-7] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:29:58 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:29:58 [http-nio-8080-exec-4] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:29:58 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:29:58 [http-nio-8080-exec-3] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:29:58 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:29:58 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /inventory/batches/expiring?days=30&facilityId=FAC001
2026-02-01 23:29:58 [http-nio-8080-exec-4] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:29:58 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients/facility/FAC001
2026-02-01 23:29:58 [http-nio-8080-exec-5] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:29:58 [http-nio-8080-exec-1] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:29:58 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/inventory/batches/expiring?days=30&facilityId=FAC001", parameters={masked}
2026-02-01 23:29:58 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/patients/facility/FAC001", parameters={}
2026-02-01 23:29:58 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.patient.controller.PatientController#getPatientsByFacility(String)
2026-02-01 23:29:58 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.InventoryController#getExpiringBatches(String, int)
2026-02-01 23:29:58 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientsByFacility(java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2026-02-01 23:29:58 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/stock?facility_id=FAC001
2026-02-01 23:29:58 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/stock?facility_id=FAC001", parameters={masked}
2026-02-01 23:29:58 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /vaccinations/facility/FAC001?startDate=2026-02-01&endDate=2026-02-01
2026-02-01 23:29:58 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.StockController#getStockLevels(String)
2026-02-01 23:29:58 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /vaccinations/facility/FAC001?startDate=2025-12-31&endDate=2026-12-30
2026-02-01 23:29:58 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getExpiringBatches(java.lang.String,int); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2026-02-01 23:29:58 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/vaccinations/facility/FAC001?startDate=2026-02-01&endDate=2026-02-01", parameters={masked}
2026-02-01 23:29:58 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientsByFacility(java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2026-02-01 23:29:58 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/vaccinations/facility/FAC001?startDate=2025-12-31&endDate=2026-12-30", parameters={masked}
2026-02-01 23:29:58 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.StockController.getStockLevels(java.lang.String); target is of class [com.immunizationdb.inventory.controller.StockController]
2026-02-01 23:29:58 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.vaccination.controller.VaccinationController#getVaccinationsByFacility(String)
2026-02-01 23:29:58 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.vaccination.controller.VaccinationController#getVaccinationsByFacility(String)
2026-02-01 23:29:59 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.StockController.getStockLevels(java.lang.String); target is of class [com.immunizationdb.inventory.controller.StockController]
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByFacility(java.lang.String); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByFacility(java.lang.String); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2026-02-01 23:29:59 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getExpiringBatches(java.lang.String,int); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByFacility(java.lang.String); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByFacility(java.lang.String); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2026-02-01 23:29:59 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=?
2026-02-01 23:29:59 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.facility_id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        v1_0.id,
        v1_0.administration_site,
        v1_0.batch_id,
        v1_0.created_at,
        v1_0.date_administered,
        v1_0.dose_number,
        v1_0.facility_id,
        v1_0.notes,
        v1_0.nurse_id,
        v1_0.patient_id,
        v1_0.vaccine_name 
    from
        vaccinations v1_0 
    where
        v1_0.facility_id=?
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        v1_0.id,
        v1_0.administration_site,
        v1_0.batch_id,
        v1_0.created_at,
        v1_0.date_administered,
        v1_0.dose_number,
        v1_0.facility_id,
        v1_0.notes,
        v1_0.nurse_id,
        v1_0.patient_id,
        v1_0.vaccine_name 
    from
        vaccinations v1_0 
    where
        v1_0.facility_id=?
2026-02-01 23:29:59 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.expiry_date between ? and ? 
        and vb1_0.quantity_remaining>0
2026-02-01 23:29:59 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:29:59 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:29:59 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[StockLevelResponse(vaccineId=bcg, vaccineName=bcg, currentQuantity=80, oldestExpiryDate=2026-07-16, (truncated)...]
2026-02-01 23:29:59 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[PatientResponse(id=af901eef-9855-4870-87f3-dc14ff8e2e3d, fullName=Baby John Doe, dateOfBirth=2024-1 (truncated)...]
2026-02-01 23:29:59 [http-nio-8080-exec-1] INFO  c.i.v.service.VaccinationService - Found 33 vaccinations for facility: FAC001
2026-02-01 23:29:59 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:29:59 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:29:59 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccineBatchResponse(id=36, batchNumber=YFR-2026-04, vaccineName=yellow-fever, manufacturer=AYOP ld (truncated)...]
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:29:59 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients/facility/FAC001
2026-02-01 23:29:59 [http-nio-8080-exec-4] INFO  c.i.v.service.VaccinationService - Found 33 vaccinations for facility: FAC001
2026-02-01 23:29:59 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:29:59 [http-nio-8080-exec-9] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /patients/facility/FAC001, Auth header present: true
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-01 23:29:59 [http-nio-8080-exec-9] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:29:59 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-9] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:29:59 [http-nio-8080-exec-9] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients/facility/FAC001
2026-02-01 23:29:59 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/patients/facility/FAC001", parameters={}
2026-02-01 23:29:59 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.patient.controller.PatientController#getPatientsByFacility(String)
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientsByFacility(java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientsByFacility(java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.facility_id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:29:59 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[PatientResponse(id=af901eef-9855-4870-87f3-dc14ff8e2e3d, fullName=Baby John Doe, dateOfBirth=2024-1 (truncated)...]
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccinationResponse(id=1, patientId=af901eef-9855-4870-87f3-dc14ff8e2e3d, patientName=Baby John Doe (truncated)...]
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /vaccinations/facility/FAC001?startDate=2026-02-01&endDate=2026-02-01
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /vaccinations/facility/FAC001, Auth header present: true
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccinationResponse(id=1, patientId=af901eef-9855-4870-87f3-dc14ff8e2e3d, patientName=Baby John Doe (truncated)...]
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /vaccinations/facility/FAC001?startDate=2026-02-01&endDate=2026-02-01
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/vaccinations/facility/FAC001?startDate=2026-02-01&endDate=2026-02-01", parameters={masked}
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.vaccination.controller.VaccinationController#getVaccinationsByFacility(String)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByFacility(java.lang.String); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2026-02-01 23:29:59 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByFacility(java.lang.String); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        v1_0.id,
        v1_0.administration_site,
        v1_0.batch_id,
        v1_0.created_at,
        v1_0.date_administered,
        v1_0.dose_number,
        v1_0.facility_id,
        v1_0.notes,
        v1_0.nurse_id,
        v1_0.patient_id,
        v1_0.vaccine_name 
    from
        vaccinations v1_0 
    where
        v1_0.facility_id=?
2026-02-01 23:29:59 [http-nio-8080-exec-10] INFO  c.i.v.service.VaccinationService - Found 33 vaccinations for facility: FAC001
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccinationResponse(id=1, patientId=af901eef-9855-4870-87f3-dc14ff8e2e3d, patientName=Baby John Doe (truncated)...]
2026-02-01 23:29:59 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:30:20 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients/facility/FAC001
2026-02-01 23:30:20 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /patients/facility/FAC001, Auth header present: true
2026-02-01 23:30:20 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:30:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:30:20 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:30:20 [http-nio-8080-exec-2] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:30:20 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients/facility/FAC001
2026-02-01 23:30:20 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/patients/facility/FAC001", parameters={}
2026-02-01 23:30:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.patient.controller.PatientController#getPatientsByFacility(String)
2026-02-01 23:30:20 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientsByFacility(java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2026-02-01 23:30:20 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientsByFacility(java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2026-02-01 23:30:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.facility_id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:30:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[PatientResponse(id=af901eef-9855-4870-87f3-dc14ff8e2e3d, fullName=Baby John Doe, dateOfBirth=2024-1 (truncated)...]
2026-02-01 23:30:20 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /vaccinations/facility/FAC001
2026-02-01 23:30:23 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /inventory/vaccines
2026-02-01 23:30:23 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /inventory/vaccines, Auth header present: true
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /vaccinations/facility/FAC001, Auth header present: true
2026-02-01 23:30:23 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:30:23 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:30:23 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:30:23 [http-nio-8080-exec-6] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:30:23 [http-nio-8080-exec-8] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /vaccinations/facility/FAC001
2026-02-01 23:30:23 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /inventory/vaccines
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/vaccinations/facility/FAC001", parameters={}
2026-02-01 23:30:23 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/inventory/vaccines", parameters={}
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.vaccination.controller.VaccinationController#getVaccinationsByFacility(String)
2026-02-01 23:30:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.InventoryController#getAllVaccines()
2026-02-01 23:30:23 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getAllVaccines(); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByFacility(java.lang.String); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2026-02-01 23:30:23 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getAllVaccines(); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByFacility(java.lang.String); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2026-02-01 23:30:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:30:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{code=BCG, maxDoses=1, name=BCG, id=bcg, isActive=true}, {code=OPV, maxDoses=4, name=OPV, id=opv, i (truncated)...]
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        v1_0.id,
        v1_0.administration_site,
        v1_0.batch_id,
        v1_0.created_at,
        v1_0.date_administered,
        v1_0.dose_number,
        v1_0.facility_id,
        v1_0.notes,
        v1_0.nurse_id,
        v1_0.patient_id,
        v1_0.vaccine_name 
    from
        vaccinations v1_0 
    where
        v1_0.facility_id=?
2026-02-01 23:30:23 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:30:23 [http-nio-8080-exec-8] INFO  c.i.v.service.VaccinationService - Found 33 vaccinations for facility: FAC001
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:30:23 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccinationResponse(id=1, patientId=af901eef-9855-4870-87f3-dc14ff8e2e3d, patientName=Baby John Doe (truncated)...]
2026-02-01 23:30:24 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:30:34 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/stock?facility_id=FAC001
2026-02-01 23:30:34 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /inventory/vaccines
2026-02-01 23:30:34 [http-nio-8080-exec-7] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /inventory/vaccines, Auth header present: true
2026-02-01 23:30:34 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /v1/stock, Auth header present: true
2026-02-01 23:30:34 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:30:34 [http-nio-8080-exec-7] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:30:34 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:30:34 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:30:34 [http-nio-8080-exec-5] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:30:34 [http-nio-8080-exec-7] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:30:34 [http-nio-8080-exec-5] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:30:34 [http-nio-8080-exec-7] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:30:34 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /inventory/vaccines
2026-02-01 23:30:34 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/stock?facility_id=FAC001
2026-02-01 23:30:34 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/inventory/vaccines", parameters={}
2026-02-01 23:30:34 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/stock?facility_id=FAC001", parameters={masked}
2026-02-01 23:30:34 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.InventoryController#getAllVaccines()
2026-02-01 23:30:34 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.StockController#getStockLevels(String)
2026-02-01 23:30:34 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getAllVaccines(); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2026-02-01 23:30:34 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.StockController.getStockLevels(java.lang.String); target is of class [com.immunizationdb.inventory.controller.StockController]
2026-02-01 23:30:34 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getAllVaccines(); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2026-02-01 23:30:34 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.StockController.getStockLevels(java.lang.String); target is of class [com.immunizationdb.inventory.controller.StockController]
2026-02-01 23:30:34 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:30:34 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=?
2026-02-01 23:30:34 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{code=BCG, maxDoses=1, name=BCG, id=bcg, isActive=true}, {code=OPV, maxDoses=4, name=OPV, id=opv, i (truncated)...]
2026-02-01 23:30:34 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:30:34 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:30:34 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[StockLevelResponse(vaccineId=bcg, vaccineName=bcg, currentQuantity=80, oldestExpiryDate=2026-07-16, (truncated)...]
2026-02-01 23:30:34 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:30:34 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /inventory/batches/expiring?days=30&facilityId=FAC001
2026-02-01 23:30:34 [http-nio-8080-exec-3] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /inventory/batches/expiring, Auth header present: true
2026-02-01 23:30:34 [http-nio-8080-exec-3] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:30:34 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:30:34 [http-nio-8080-exec-3] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:30:34 [http-nio-8080-exec-3] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:30:34 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /inventory/batches/expiring?days=30&facilityId=FAC001
2026-02-01 23:30:34 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/inventory/batches/expiring?days=30&facilityId=FAC001", parameters={masked}
2026-02-01 23:30:34 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.InventoryController#getExpiringBatches(String, int)
2026-02-01 23:30:34 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getExpiringBatches(java.lang.String,int); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2026-02-01 23:30:34 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getExpiringBatches(java.lang.String,int); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2026-02-01 23:30:34 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.expiry_date between ? and ? 
        and vb1_0.quantity_remaining>0
2026-02-01 23:30:34 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:30:34 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccineBatchResponse(id=36, batchNumber=YFR-2026-04, vaccineName=yellow-fever, manufacturer=AYOP ld (truncated)...]
2026-02-01 23:30:34 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:31:04 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /inventory/batches/available/FAC001/vaccine/BCG
2026-02-01 23:31:04 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /inventory/batches/available/FAC001/vaccine/BCG
2026-02-01 23:31:04 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /inventory/batches/available/FAC001/vaccine/BCG, Auth header present: true
2026-02-01 23:31:04 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:31:04 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:31:04 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:31:04 [http-nio-8080-exec-6] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:31:04 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /inventory/batches/available/FAC001/vaccine/BCG
2026-02-01 23:31:04 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/inventory/batches/available/FAC001/vaccine/BCG", parameters={}
2026-02-01 23:31:04 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.InventoryController#getAvailableBatchesByVaccine(String, String)
2026-02-01 23:31:04 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getAvailableBatchesByVaccine(java.lang.String,java.lang.String); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2026-02-01 23:31:04 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getAvailableBatchesByVaccine(java.lang.String,java.lang.String); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2026-02-01 23:31:04 [http-nio-8080-exec-6] INFO  c.i.i.controller.InventoryController - getAvailableBatchesByVaccine called - facilityId: FAC001, vaccineName: 'BCG'
2026-02-01 23:31:04 [http-nio-8080-exec-6] INFO  c.i.i.service.InventoryService - Finding available batches for facility: FAC001, vaccine: 'BCG' (decoded: 'BCG')
2026-02-01 23:31:04 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and lower(trim(BOTH from vb1_0.vaccine_name))=lower(trim(BOTH from ?)) 
        and vb1_0.quantity_remaining>0 
        and vb1_0.expiry_date>? 
    order by
        vb1_0.expiry_date
2026-02-01 23:31:04 [http-nio-8080-exec-6] INFO  c.i.i.service.InventoryService - Found 1 available batches for vaccine: 'BCG' in facility: FAC001
2026-02-01 23:31:04 [http-nio-8080-exec-6] INFO  c.i.i.controller.InventoryController - Returning 1 batches for facility: FAC001, vaccine: 'BCG'
2026-02-01 23:31:04 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:31:04 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccineBatchResponse(id=31, batchNumber=BCG-2026-45, vaccineName=bcg, manufacturer=donj, quantityRe (truncated)...]
2026-02-01 23:31:04 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:31:13 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users/facility/staff
2026-02-01 23:31:13 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /users/facility/staff, Auth header present: true
2026-02-01 23:31:13 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:31:13 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:31:13 [http-nio-8080-exec-8] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:31:13 [http-nio-8080-exec-8] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:31:13 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users/facility/staff
2026-02-01 23:31:13 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/facility/staff", parameters={}
2026-02-01 23:31:13 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.auth.controller.UserController#getFacilityStaff(UserDetails)
2026-02-01 23:31:13 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.auth.controller.UserController.getFacilityStaff(org.springframework.security.core.userdetails.UserDetails); target is of class [com.immunizationdb.auth.controller.UserController]
2026-02-01 23:31:13 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.auth.controller.UserController.getFacilityStaff(org.springframework.security.core.userdetails.UserDetails); target is of class [com.immunizationdb.auth.controller.UserController]
2026-02-01 23:31:13 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:31:13 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.facility_id=? 
        and not(u1_0.deleted) 
        and u1_0.active
2026-02-01 23:31:13 [http-nio-8080-exec-8] INFO  c.i.auth.controller.UserController - Retrieved 3 staff members for facility FAC001
2026-02-01 23:31:13 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:31:13 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[UserResponse(id=1, username=health.worker, email=health.worker@immunization.com, fullName=Health Wo (truncated)...]
2026-02-01 23:31:13 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:32:18 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /appointments?facilityId=FAC001&date=2026-02-01
2026-02-01 23:32:18 [http-nio-8080-exec-3] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /appointments, Auth header present: true
2026-02-01 23:32:18 [http-nio-8080-exec-3] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:32:18 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:32:18 [http-nio-8080-exec-3] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:32:18 [http-nio-8080-exec-3] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:32:18 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /appointments?facilityId=FAC001&date=2026-02-01
2026-02-01 23:32:18 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/appointments?facilityId=FAC001&date=2026-02-01", parameters={masked}
2026-02-01 23:32:18 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.appointment.controller.AppointmentController#getAppointments(String, LocalDate, LocalDate, LocalDate, UUID)
2026-02-01 23:32:18 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.appointment.controller.AppointmentController.getAppointments(java.lang.String,java.time.LocalDate,java.time.LocalDate,java.time.LocalDate,java.util.UUID); target is of class [com.immunizationdb.appointment.controller.AppointmentController]
2026-02-01 23:32:18 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.appointment.controller.AppointmentController.getAppointments(java.lang.String,java.time.LocalDate,java.time.LocalDate,java.time.LocalDate,java.util.UUID); target is of class [com.immunizationdb.appointment.controller.AppointmentController]
2026-02-01 23:32:18 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        a1_0.id,
        a1_0.appointment_date,
        a1_0.appointment_time,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.dose_number,
        a1_0.facility_id,
        a1_0.notes,
        a1_0.patient_id,
        a1_0.sms_sent,
        a1_0.sms_sent_at,
        a1_0.status,
        a1_0.updated_at,
        a1_0.vaccine_name 
    from
        appointments a1_0 
    where
        a1_0.facility_id=? 
        and a1_0.appointment_date=?
2026-02-01 23:32:18 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=?
2026-02-01 23:32:18 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:32:18 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[AppointmentResponse(id=6952e104-ad0d-4ee3-a8f4-a015f92971a2, patientId=1d2eb317-e52d-402c-9ee8-2d3d (truncated)...]
2026-02-01 23:32:18 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:32:21 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients/facility/FAC001
2026-02-01 23:32:21 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /patients/facility/FAC001, Auth header present: true
2026-02-01 23:32:21 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:32:21 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:32:21 [http-nio-8080-exec-1] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:32:21 [http-nio-8080-exec-1] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:32:21 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients/facility/FAC001
2026-02-01 23:32:21 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/patients/facility/FAC001", parameters={}
2026-02-01 23:32:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.patient.controller.PatientController#getPatientsByFacility(String)
2026-02-01 23:32:21 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientsByFacility(java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2026-02-01 23:32:21 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.patient.controller.PatientController.getPatientsByFacility(java.lang.String); target is of class [com.immunizationdb.patient.controller.PatientController]
2026-02-01 23:32:21 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.facility_id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:32:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[PatientResponse(id=af901eef-9855-4870-87f3-dc14ff8e2e3d, fullName=Baby John Doe, dateOfBirth=2024-1 (truncated)...]
2026-02-01 23:32:21 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:32:21 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /vaccinations/facility/FAC001?startDate=2026-02-01&endDate=2026-02-28
2026-02-01 23:32:21 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /vaccinations/facility/FAC001?startDate=2026-02-01&endDate=2026-02-28
2026-02-01 23:32:21 [http-nio-8080-exec-9] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /vaccinations/facility/FAC001, Auth header present: true
2026-02-01 23:32:21 [http-nio-8080-exec-9] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:32:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:32:21 [http-nio-8080-exec-9] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:32:21 [http-nio-8080-exec-9] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:32:21 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /vaccinations/facility/FAC001?startDate=2026-02-01&endDate=2026-02-28
2026-02-01 23:32:21 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/vaccinations/facility/FAC001?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-01 23:32:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.vaccination.controller.VaccinationController#getVaccinationsByFacility(String)
2026-02-01 23:32:21 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByFacility(java.lang.String); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.vaccination.controller.VaccinationController.getVaccinationsByFacility(java.lang.String); target is of class [com.immunizationdb.vaccination.controller.VaccinationController]
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        v1_0.id,
        v1_0.administration_site,
        v1_0.batch_id,
        v1_0.created_at,
        v1_0.date_administered,
        v1_0.dose_number,
        v1_0.facility_id,
        v1_0.notes,
        v1_0.nurse_id,
        v1_0.patient_id,
        v1_0.vaccine_name 
    from
        vaccinations v1_0 
    where
        v1_0.facility_id=?
2026-02-01 23:32:22 [http-nio-8080-exec-9] INFO  c.i.v.service.VaccinationService - Found 33 vaccinations for facility: FAC001
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.id=?
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.date_of_birth,
        p1_0.deleted,
        p1_0.deleted_at,
        p1_0.facility_id,
        p1_0.full_name,
        p1_0.gender,
        p1_0.guardian_name,
        p1_0.has_severe_adverse_events,
        p1_0.national_id,
        p1_0.phone_number 
    from
        patients p1_0 
    where
        p1_0.id=? 
        and not(p1_0.deleted)
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccinationResponse(id=1, patientId=af901eef-9855-4870-87f3-dc14ff8e2e3d, patientName=Baby John Doe (truncated)...]
2026-02-01 23:32:22 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:32:26 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /sms-logs
2026-02-01 23:32:26 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /sms-logs, Auth header present: true
2026-02-01 23:32:26 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:32:26 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:32:26 [http-nio-8080-exec-10] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:32:26 [http-nio-8080-exec-10] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:32:26 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /sms-logs
2026-02-01 23:32:26 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/sms-logs", parameters={}
2026-02-01 23:32:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.sms.controller.SmsLogController#getSmsLogs(LocalDateTime, LocalDateTime, String, String)
2026-02-01 23:32:26 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.sms.controller.SmsLogController.getSmsLogs(java.time.LocalDateTime,java.time.LocalDateTime,java.lang.String,java.lang.String); target is of class [com.immunizationdb.sms.controller.SmsLogController]
2026-02-01 23:32:26 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.sms.controller.SmsLogController.getSmsLogs(java.time.LocalDateTime,java.time.LocalDateTime,java.lang.String,java.lang.String); target is of class [com.immunizationdb.sms.controller.SmsLogController]
2026-02-01 23:32:26 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        sl1_0.id,
        sl1_0.appointment_id,
        sl1_0.created_at,
        sl1_0.error_message,
        sl1_0.message,
        sl1_0.patient_id,
        sl1_0.recipient_phone,
        sl1_0.sent_at,
        sl1_0.status 
    from
        sms_logs sl1_0
2026-02-01 23:32:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:32:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[SmsLogResponse(id=1, recipientPhone=+237699226444, message=Appointment Rescheduled: Bring Tom tam f (truncated)...]
2026-02-01 23:32:26 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:32:31 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/stock?facility_id=FAC001
2026-02-01 23:32:31 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /v1/stock, Auth header present: true
2026-02-01 23:32:31 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:32:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:32:31 [http-nio-8080-exec-2] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:32:31 [http-nio-8080-exec-2] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:32:31 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/stock?facility_id=FAC001
2026-02-01 23:32:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/stock?facility_id=FAC001", parameters={masked}
2026-02-01 23:32:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.StockController#getStockLevels(String)
2026-02-01 23:32:31 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.StockController.getStockLevels(java.lang.String); target is of class [com.immunizationdb.inventory.controller.StockController]
2026-02-01 23:32:31 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.StockController.getStockLevels(java.lang.String); target is of class [com.immunizationdb.inventory.controller.StockController]
2026-02-01 23:32:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=?
2026-02-01 23:32:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:32:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[StockLevelResponse(vaccineId=bcg, vaccineName=bcg, currentQuantity=80, oldestExpiryDate=2026-07-16, (truncated)...]
2026-02-01 23:32:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-01 23:32:31 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /inventory/batches/expiring?days=30&facilityId=FAC001
2026-02-01 23:32:31 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Processing request to: /inventory/batches/expiring, Auth header present: true
2026-02-01 23:32:31 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Extracted username from token: facility.manager
2026-02-01 23:32:31 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted,
        u1_0.deleted_at,
        u1_0.district_id,
        u1_0.email,
        u1_0.facility_id,
        u1_0.failed_login_attempts,
        u1_0.full_name,
        u1_0.locked,
        u1_0.national_id,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2026-02-01 23:32:31 [http-nio-8080-exec-6] DEBUG c.i.a.s.JwtAuthenticationFilter - Loaded user details for: facility.manager, authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:32:31 [http-nio-8080-exec-6] INFO  c.i.a.s.JwtAuthenticationFilter - User facility.manager authenticated successfully with authorities: [ROLE_FACILITY_MANAGER]
2026-02-01 23:32:31 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /inventory/batches/expiring?days=30&facilityId=FAC001
2026-02-01 23:32:31 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/inventory/batches/expiring?days=30&facilityId=FAC001", parameters={masked}
2026-02-01 23:32:31 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.immunizationdb.inventory.controller.InventoryController#getExpiringBatches(String, int)
2026-02-01 23:32:31 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getExpiringBatches(java.lang.String,int); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2026-02-01 23:32:31 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.immunizationdb.inventory.controller.InventoryController.getExpiringBatches(java.lang.String,int); target is of class [com.immunizationdb.inventory.controller.InventoryController]
2026-02-01 23:32:31 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        vb1_0.id,
        vb1_0.batch_number,
        vb1_0.created_at,
        vb1_0.created_by,
        vb1_0.expiry_date,
        vb1_0.facility_id,
        vb1_0.manufacturer,
        vb1_0.quantity_received,
        vb1_0.quantity_remaining,
        vb1_0.receipt_date,
        vb1_0.vaccine_name 
    from
        vaccine_batches vb1_0 
    where
        vb1_0.facility_id=? 
        and vb1_0.expiry_date between ? and ? 
        and vb1_0.quantity_remaining>0
2026-02-01 23:32:31 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2026-02-01 23:32:31 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[VaccineBatchResponse(id=36, batchNumber=YFR-2026-04, vaccineName=yellow-fever, manufacturer=AYOP ld (truncated)...]
2026-02-01 23:32:31 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
