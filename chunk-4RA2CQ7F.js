import{a as I}from"./chunk-PXTKAV3L.js";import{a as C}from"./chunk-Y7V3HG6R.js";import{a as S}from"./chunk-QHILUX33.js";import{a as w}from"./chunk-RB2IKARN.js";import"./chunk-7UZYWCAJ.js";import"./chunk-MLMGL4QO.js";import{a as D}from"./chunk-WGPNLH4W.js";import"./chunk-VLP6GBL3.js";import{e as y}from"./chunk-WNEPFQ7C.js";import{Ia as O,Ka as M,Oa as P,P as c,Ra as u,Sa as v,Ta as h,U as d,V as _,Xa as x,Z as l,_a as b,ba as s,ca as i,da as n,ea as p,ma as g,va as a,wa as m,xa as f}from"./chunk-T4RMSDZY.js";function E(e,o){e&1&&(i(0,"div",7)(1,"div",8),a(2,"\u23F3"),n(),i(3,"p",9),a(4,"Loading stock levels..."),n()())}function T(e,o){e&1&&(i(0,"div",10)(1,"div",11)(2,"div",12),a(3,"\u{1F4E6}"),n(),i(4,"h2"),a(5,"No Stock Available"),n(),i(6,"p"),a(7,"There are no vaccines in stock at this facility."),n()()())}function z(e,o){if(e&1&&(i(0,"div",20)(1,"div",21),a(2,"\u{1F4C5}"),n(),i(3,"div",22)(4,"span",23),a(5,"Oldest Expiry Date"),n(),i(6,"span",24),a(7),O(8,"date"),n()()()),e&2){let t=g().$implicit;c(7),m(M(8,1,t.oldestExpiryDate,"mediumDate"))}}function V(e,o){if(e&1&&(i(0,"div",15)(1,"div",16)(2,"div",17)(3,"h3"),a(4),n(),i(5,"span",18),a(6),n()()(),i(7,"div",19)(8,"div",20)(9,"div",21),a(10,"\u{1F489}"),n(),i(11,"div",22)(12,"span",23),a(13,"Current Quantity"),n(),i(14,"span",24),a(15),n()()(),l(16,z,9,4,"div",25),n()()),e&2){let t=o.$implicit,r=g(2);s("ngClass",r.getStatusClass(t.status)),c(4),m(t.vaccineName),c(),s("ngClass","badge-"+t.status.toLowerCase()),c(),f(" ",t.status," "),c(9),f("",t.currentQuantity||t.totalQuantity||0," doses"),c(),s("ngIf",t.oldestExpiryDate)}}function j(e,o){if(e&1&&(i(0,"div",13),l(1,V,17,6,"div",14),n()),e&2){let t=g();c(),s("ngForOf",t.stockLevels)}}function F(e,o){if(e&1&&p(0,"app-alert",26),e&2){let t=g();s("message",t.errorMessage)("show",!!t.errorMessage)}}function N(e,o){e&1&&p(0,"app-loader")}var L=class e{constructor(o,t,r){this.stockService=o;this.authService=t;this.cdr=r}stockLevels=[];loading=!1;errorMessage="";isLoadingData=!1;ngOnInit(){this.loadStockLevels()}loadStockLevels(){if(this.isLoadingData)return;this.isLoadingData=!0,this.loading=!0;let o=Date.now(),r=this.authService.getCurrentUser()?.facilityId;this.stockService.getStockLevels(r).subscribe({next:k=>{this.stockLevels=k||[],C(o,()=>{this.loading=!1,this.isLoadingData=!1,this.cdr.detectChanges()})},error:k=>{this.errorMessage="Failed to load stock levels",this.stockLevels=[],C(o,()=>{this.loading=!1,this.isLoadingData=!1,this.cdr.detectChanges()})}})}getStatusClass(o){if(!o)return"";switch(o.toUpperCase()){case"GOOD":return"status-good";case"LOW":return"status-low";case"CRITICAL":return"status-critical";case"OUT":return"status-critical";default:return""}}static \u0275fac=function(t){return new(t||e)(d(I),d(y),d(P))};static \u0275cmp=_({type:e,selectors:[["app-vaccinator-stock"]],decls:7,vars:5,consts:[["pageTitle","Stock Dashboard","pageSubtitle","View current vaccine stock levels"],[1,"stock-page"],["class","loading-container",4,"ngIf"],["class","empty-state-container",4,"ngIf"],["class","stock-grid",4,"ngIf"],["type","error",3,"message","show",4,"ngIf"],[4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"loading-text"],[1,"empty-state-container"],[1,"empty-state"],[1,"empty-icon"],[1,"stock-grid"],["class","stock-card",3,"ngClass",4,"ngFor","ngForOf"],[1,"stock-card",3,"ngClass"],[1,"stock-header"],[1,"stock-title"],[1,"status-badge",3,"ngClass"],[1,"stock-details"],[1,"stock-item"],[1,"stock-icon"],[1,"stock-info"],[1,"label"],[1,"value"],["class","stock-item",4,"ngIf"],["type","error",3,"message","show"]],template:function(t,r){t&1&&(i(0,"app-layout",0)(1,"div",1),l(2,E,5,0,"div",2)(3,T,8,0,"div",3)(4,j,2,1,"div",4)(5,F,1,2,"app-alert",5)(6,N,1,0,"app-loader",6),n()()),t&2&&(c(2),s("ngIf",r.loading),c(),s("ngIf",!r.loading&&r.stockLevels.length===0),c(),s("ngIf",!r.loading&&r.stockLevels.length>0),c(),s("ngIf",r.errorMessage),c(),s("ngIf",r.loading))},dependencies:[b,u,v,h,D,S,w,x],styles:['.stock-page[_ngcontent-%COMP%]{padding:clamp(1.5rem,4vw,3rem);max-width:1400px;margin:0 auto;background:linear-gradient(135deg,#f8fafc,#f1f5f9);min-height:100vh}.stock-page[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:60vh;gap:1.5rem}.stock-page[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{font-size:3rem;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.stock-page[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%]{color:#64748b;font-size:1.125rem;font-weight:600;margin:0}.stock-page[_ngcontent-%COMP%]   .empty-state-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:60vh}.stock-page[_ngcontent-%COMP%]   .empty-state-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem;background:linear-gradient(135deg,#fff,#fafbfc);border-radius:24px;box-shadow:0 4px 20px #0000000f;border:2px solid #e2e8f0;max-width:500px}.stock-page[_ngcontent-%COMP%]   .empty-state-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1.5rem;opacity:.6}.stock-page[_ngcontent-%COMP%]   .empty-state-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#1e293b;margin-bottom:1rem}.stock-page[_ngcontent-%COMP%]   .empty-state-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:1rem;margin-bottom:2rem;line-height:1.6}.stock-page[_ngcontent-%COMP%]   .stock-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:clamp(1.5rem,3vw,2rem);margin-top:2rem}.stock-page[_ngcontent-%COMP%]   .stock-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#fafbfc);border-radius:20px;padding:clamp(1.5rem,3vw,2rem);box-shadow:0 4px 20px #0000000f;border:2px solid #e2e8f0;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.stock-page[_ngcontent-%COMP%]   .stock-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;transition:all .3s ease}.stock-page[_ngcontent-%COMP%]   .stock-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 30px #0000001f}.stock-page[_ngcontent-%COMP%]   .stock-card.status-good[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#10b981,#059669)}.stock-page[_ngcontent-%COMP%]   .stock-card.status-low[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#f59e0b,#d97706)}.stock-page[_ngcontent-%COMP%]   .stock-card.status-critical[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#ef4444,#dc2626)}.stock-page[_ngcontent-%COMP%]   .stock-card[_ngcontent-%COMP%]   .stock-header[_ngcontent-%COMP%]{margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:1px solid #e2e8f0}.stock-page[_ngcontent-%COMP%]   .stock-card[_ngcontent-%COMP%]   .stock-header[_ngcontent-%COMP%]   .stock-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1rem}.stock-page[_ngcontent-%COMP%]   .stock-card[_ngcontent-%COMP%]   .stock-header[_ngcontent-%COMP%]   .stock-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:clamp(1.25rem,2.5vw,1.5rem);font-weight:700;color:#1e293b;flex:1}.stock-page[_ngcontent-%COMP%]   .stock-card[_ngcontent-%COMP%]   .stock-header[_ngcontent-%COMP%]   .stock-title[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:12px;font-size:.75rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px;white-space:nowrap}.stock-page[_ngcontent-%COMP%]   .stock-card[_ngcontent-%COMP%]   .stock-header[_ngcontent-%COMP%]   .stock-title[_ngcontent-%COMP%]   .status-badge.badge-good[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d1fae5,#a7f3d0);color:#065f46}.stock-page[_ngcontent-%COMP%]   .stock-card[_ngcontent-%COMP%]   .stock-header[_ngcontent-%COMP%]   .stock-title[_ngcontent-%COMP%]   .status-badge.badge-low[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fef3c7,#fde68a);color:#92400e}.stock-page[_ngcontent-%COMP%]   .stock-card[_ngcontent-%COMP%]   .stock-header[_ngcontent-%COMP%]   .stock-title[_ngcontent-%COMP%]   .status-badge.badge-critical[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fee2e2,#fecaca);color:#991b1b}.stock-page[_ngcontent-%COMP%]   .stock-card[_ngcontent-%COMP%]   .stock-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.stock-page[_ngcontent-%COMP%]   .stock-card[_ngcontent-%COMP%]   .stock-details[_ngcontent-%COMP%]   .stock-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem;background:linear-gradient(135deg,#f8fafc,#f1f5f9);border-radius:12px;border:1px solid #e2e8f0;transition:all .2s ease}.stock-page[_ngcontent-%COMP%]   .stock-card[_ngcontent-%COMP%]   .stock-details[_ngcontent-%COMP%]   .stock-item[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#f1f5f9,#e2e8f0);border-color:#cbd5e1}.stock-page[_ngcontent-%COMP%]   .stock-card[_ngcontent-%COMP%]   .stock-details[_ngcontent-%COMP%]   .stock-item[_ngcontent-%COMP%]   .stock-icon[_ngcontent-%COMP%]{font-size:1.5rem;width:48px;height:48px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#fff,#f8fafc);border-radius:12px;border:1px solid #e2e8f0;flex-shrink:0}.stock-page[_ngcontent-%COMP%]   .stock-card[_ngcontent-%COMP%]   .stock-details[_ngcontent-%COMP%]   .stock-item[_ngcontent-%COMP%]   .stock-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.25rem}.stock-page[_ngcontent-%COMP%]   .stock-card[_ngcontent-%COMP%]   .stock-details[_ngcontent-%COMP%]   .stock-item[_ngcontent-%COMP%]   .stock-info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#64748b;font-size:.875rem;font-weight:500}.stock-page[_ngcontent-%COMP%]   .stock-card[_ngcontent-%COMP%]   .stock-details[_ngcontent-%COMP%]   .stock-item[_ngcontent-%COMP%]   .stock-info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#1e293b;font-size:1.125rem;font-weight:700}']})};export{L as VaccinatorStockComponent};
