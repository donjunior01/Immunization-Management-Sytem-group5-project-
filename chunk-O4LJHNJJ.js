import{a as H}from"./chunk-W7ZZ276E.js";import{a as P}from"./chunk-DS5JRME6.js";import"./chunk-JMDA2KYA.js";import"./chunk-FP7EL6KI.js";import{a as w}from"./chunk-Y7V3HG6R.js";import{a as Q}from"./chunk-QHILUX33.js";import{a as q}from"./chunk-RB2IKARN.js";import"./chunk-7UZYWCAJ.js";import"./chunk-MLMGL4QO.js";import{a as B}from"./chunk-4G3G25LR.js";import{b as z,d as L,f as N,m as W,n as R,o as $,u as j}from"./chunk-VLP6GBL3.js";import{e as F}from"./chunk-K3XQKY74.js";import{A as O,Aa as b,B as h,Ba as u,Ca as M,Oa as S,P as r,Ra as D,Sa as k,Ta as T,U as _,V as A,Z as g,_a as I,ba as l,ca as o,da as a,ea as x,ib as E,ka as y,la as m,ma as d,mb as V,va as i,wa as C,xa as f,ya as v}from"./chunk-T4RMSDZY.js";function Y(s,n){if(s&1&&(o(0,"span",26),i(1),a()),s&2){let e=d();r(),v(" ",e.getAppointmentCount()," ",e.getAppointmentCount()===1?"Appointment":"Appointments"," ")}}function G(s,n){if(s&1&&x(0,"app-alert",27),s&2){let e=d();l("message",e.errorMessage)("show",!!e.errorMessage)}}function J(s,n){if(s&1){let e=y();o(0,"button",28),m("click",function(){O(e);let p=d();return p.selectedDate=p.getTodayDate(),h(p.onDateChange())}),i(1," Today "),a()}}function K(s,n){if(s&1){let e=y();o(0,"tr",29),m("click",function(){let p=O(e).$implicit,c=d();return h(c.viewPatientDetail(p.patientId))}),o(1,"td")(2,"strong"),i(3),a()(),o(4,"td"),i(5),a(),o(6,"td")(7,"span",30),i(8),a()(),o(9,"td"),i(10),a(),o(11,"td")(12,"span",31),i(13),a()()()}if(s&2){let e=n.$implicit,t=d();l("title","Click to view patient details"),r(3),C(e.patientName||"Unknown"),r(2),C(t.formatAge(e.patientAge)),r(3),v(" ",e.vaccineName," - Dose ",e.doseNumber," "),r(2),C(t.formatTime(e.appointmentTime)),r(2),l("ngClass","status-"+(e.status||"scheduled").toLowerCase()),r(),f(" ",e.status," ")}}function X(s,n){if(s&1&&(o(0,"tr",32)(1,"td",33)(2,"div",34)(3,"span",35),i(4,"\u{1F4C5}"),a(),o(5,"p"),i(6),a()()()()),s&2){let e=d();r(6),f("No appointments found for ",e.isToday?"today":"this date")}}function Z(s,n){s&1&&x(0,"app-loader")}var U=class s{constructor(n,e,t,p){this.appointmentService=n;this.authService=e;this.cdr=t;this.router=p}appointments=[];filteredAppointments=[];loading=!1;errorMessage="";selectedDate=P(new Date,"yyyy-MM-dd");isToday=!0;searchQuery="";appointmentFilter="all";isLoadingData=!1;ngOnInit(){this.checkIfToday(),this.loadAppointments()}checkIfToday(){let n=P(new Date,"yyyy-MM-dd");this.isToday=this.selectedDate===n}loadAppointments(){if(this.isLoadingData)return;this.isLoadingData=!0,this.loading=!0,this.errorMessage="";let n=Date.now(),t=this.authService.getCurrentUser()?.facilityId;if(!t){this.errorMessage="Facility ID is required. Please ensure you are assigned to a facility.",this.loading=!1,this.isLoadingData=!1;return}this.appointmentService.getAppointments(t,this.selectedDate).subscribe({next:p=>{this.appointments=p||[],this.applyFilters(),w(n,()=>{this.loading=!1,this.isLoadingData=!1,this.cdr.detectChanges()})},error:p=>{console.error("Failed to load appointments:",p),this.appointments=[],this.filteredAppointments=[],this.errorMessage="Failed to load appointments. Please try again.",w(n,()=>{this.loading=!1,this.isLoadingData=!1,this.cdr.detectChanges()})}})}onDateChange(){this.checkIfToday(),this.loadAppointments()}applyFilters(){let n=[...this.appointments];if(this.searchQuery.trim()){let e=this.searchQuery.toLowerCase();n=n.filter(t=>t.patientName?.toLowerCase().includes(e)||t.vaccineName?.toLowerCase().includes(e))}this.appointmentFilter!=="all"&&(n=n.filter(e=>e.status?.toLowerCase()===this.appointmentFilter.toLowerCase())),this.filteredAppointments=n}onSearch(){this.applyFilters()}onFilterChange(){this.applyFilters()}getAppointmentCount(){return this.appointments.length}getScheduledCount(){return this.appointments.filter(n=>n.status==="SCHEDULED").length}formatTime(n){if(!n)return"All Day";try{let[e,t]=n.split(":"),p=parseInt(e,10),c=p>=12?"PM":"AM";return`${p%12||12}:${t} ${c}`}catch{return n}}formatAge(n){if(!n)return"N/A";if(n<12)return`${n} ${n===1?"month":"months"}`;let e=Math.floor(n/12),t=n%12;return t===0?`${e} ${e===1?"year":"years"}`:`${e} ${e===1?"year":"years"}, ${t} ${t===1?"month":"months"}`}viewPatientDetail(n){n&&this.router.navigate(["/vaccinator/patients/detail"],{queryParams:{patientId:n}})}getTodayDate(){return P(new Date,"yyyy-MM-dd")}static \u0275fac=function(e){return new(e||s)(_(H),_(F),_(S),_(E))};static \u0275cmp=A({type:s,selectors:[["app-vaccinator-appointments"]],decls:55,vars:13,consts:[["pageTitle","Today's Appointments"],[1,"appointments-page"],[1,"page-header"],[1,"subtitle"],[1,"badge-container"],["class","appointment-badge",4,"ngIf"],["type","error",3,"message","show",4,"ngIf"],[1,"filters-card"],[1,"search-box"],[1,"search-icon"],["type","text","placeholder","Search by patient name or vaccine...",1,"search-input",3,"ngModelChange","input","ngModel"],[1,"filter-group"],["type","date",1,"filter-input",3,"ngModelChange","change","ngModel","value"],["type","button","class","btn btn-sm btn-secondary","style","margin-left: 8px;",3,"click",4,"ngIf"],[1,"filter-select",3,"ngModelChange","change","ngModel"],["value","all"],["value","scheduled"],["value","completed"],["value","missed"],[1,"appointments-table-card"],[1,"table-header"],[1,"table-container"],[1,"appointments-table"],["class","appointment-row",3,"title","click",4,"ngFor","ngForOf"],["class","no-data",4,"ngIf"],[4,"ngIf"],[1,"appointment-badge"],["type","error",3,"message","show"],["type","button",1,"btn","btn-sm","btn-secondary",2,"margin-left","8px",3,"click"],[1,"appointment-row",3,"click","title"],[1,"vaccine-info"],[1,"status-badge",3,"ngClass"],[1,"no-data"],["colspan","5"],[1,"empty-state"],[1,"empty-icon"]],template:function(e,t){e&1&&(o(0,"app-layout",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1"),i(5,"Today's Appointments"),a(),o(6,"p",3),i(7,"View and manage today's vaccination schedule"),a()(),o(8,"div",4),g(9,Y,2,2,"span",5),a()(),g(10,G,1,2,"app-alert",6),o(11,"div",7)(12,"div",8)(13,"span",9),i(14,"\u{1F50D}"),a(),o(15,"input",10),M("ngModelChange",function(c){return u(t.searchQuery,c)||(t.searchQuery=c),c}),m("input",function(){return t.onSearch()}),a()(),o(16,"div",11)(17,"label"),i(18,"Date:"),a(),o(19,"input",12),M("ngModelChange",function(c){return u(t.selectedDate,c)||(t.selectedDate=c),c}),m("change",function(){return t.onDateChange()}),a(),g(20,J,2,0,"button",13),a(),o(21,"div",11)(22,"label"),i(23,"Status:"),a(),o(24,"select",14),M("ngModelChange",function(c){return u(t.appointmentFilter,c)||(t.appointmentFilter=c),c}),m("change",function(){return t.onFilterChange()}),o(25,"option",15),i(26),a(),o(27,"option",16),i(28),a(),o(29,"option",17),i(30,"Completed"),a(),o(31,"option",18),i(32,"Missed"),a()()()(),o(33,"div",19)(34,"div",20)(35,"h3"),i(36),a()(),o(37,"div",21)(38,"table",22)(39,"thead")(40,"tr")(41,"th"),i(42,"Patient Name"),a(),o(43,"th"),i(44,"Age"),a(),o(45,"th"),i(46,"Vaccine Due"),a(),o(47,"th"),i(48,"Appointment Time"),a(),o(49,"th"),i(50,"Status"),a()()(),o(51,"tbody"),g(52,K,14,8,"tr",23)(53,X,7,1,"tr",24),a()()()(),g(54,Z,1,0,"app-loader",25),a()()),e&2&&(r(9),l("ngIf",t.getAppointmentCount()>0),r(),l("ngIf",t.errorMessage),r(5),b("ngModel",t.searchQuery),r(4),b("ngModel",t.selectedDate),l("value",t.selectedDate),r(),l("ngIf",!t.isToday),r(4),b("ngModel",t.appointmentFilter),r(2),f("All (",t.getAppointmentCount(),")"),r(2),f("Scheduled (",t.getScheduledCount(),")"),r(8),f("Appointments (",t.filteredAppointments.length,")"),r(16),l("ngForOf",t.filteredAppointments),r(),l("ngIf",t.filteredAppointments.length===0&&!t.loading),r(),l("ngIf",t.loading))},dependencies:[I,D,k,T,j,R,$,z,W,L,N,V,B,Q,q],styles:[".appointments-page[_ngcontent-%COMP%]{padding:clamp(1.5rem,4vw,3rem);max-width:1920px;margin:0 auto;background:linear-gradient(135deg,#f8fafc,#f1f5f9);min-height:100vh}.appointments-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:1.5rem;margin-bottom:2rem;padding-bottom:1.5rem;border-bottom:2px solid #e2e8f0;flex-wrap:wrap}.appointments-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{flex:1;min-width:200px;display:flex;flex-direction:column;gap:.5rem}.appointments-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.25rem;font-weight:700;color:#1e293b;margin:0}.appointments-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#64748b;font-size:1rem;margin:0}.appointments-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .badge-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.appointments-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .appointment-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:12px 24px;background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff;border-radius:12px;font-weight:700;font-size:1rem;box-shadow:0 4px 12px #3b82f64d;animation:_ngcontent-%COMP%_scaleIn .3s ease-out}.appointments-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#fafbfc);padding:clamp(1.25rem,3vw,1.75rem);border-radius:24px;box-shadow:0 4px 20px #0000000f;margin-bottom:2rem;display:flex;gap:1.5rem;align-items:center;flex-wrap:wrap;border:1px solid rgba(226,232,240,.8)}.appointments-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]{flex:1;min-width:300px;position:relative}.appointments-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#64748b;font-size:1.125rem}.appointments-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px 12px 44px;border:2px solid #cbd5e1;border-radius:10px;font-size:.875rem;transition:all .2s}.appointments-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 4px #3b82f61a}.appointments-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.appointments-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#475569;font-size:.9375rem}.appointments-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-input[_ngcontent-%COMP%]{padding:12px 16px;border:2px solid #cbd5e1;border-radius:10px;font-size:.875rem;background:#fff;cursor:pointer;transition:all .2s}.appointments-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 4px #3b82f61a}.appointments-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%]{padding:12px 16px;border:2px solid #cbd5e1;border-radius:10px;font-size:.875rem;background:#fff;cursor:pointer;transition:all .2s}.appointments-page[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 4px #3b82f61a}.appointments-page[_ngcontent-%COMP%]   .appointments-table-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#fafbfc);border-radius:24px;box-shadow:0 4px 20px #0000000f;overflow:hidden;border:1px solid rgba(226,232,240,.8)}.appointments-page[_ngcontent-%COMP%]   .appointments-table-card[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{padding:clamp(1.25rem,3vw,1.75rem);border-bottom:3px solid #e2e8f0;background:linear-gradient(135deg,#f8fafc,#f1f5f9)}.appointments-page[_ngcontent-%COMP%]   .appointments-table-card[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:800;background:linear-gradient(135deg,#1e293b,#475569);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.appointments-page[_ngcontent-%COMP%]   .appointments-table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow-x:auto}.appointments-page[_ngcontent-%COMP%]   .appointments-table-card[_ngcontent-%COMP%]   .appointments-table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0}.appointments-page[_ngcontent-%COMP%]   .appointments-table-card[_ngcontent-%COMP%]   .appointments-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9)}.appointments-page[_ngcontent-%COMP%]   .appointments-table-card[_ngcontent-%COMP%]   .appointments-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1.25rem 1.5rem;text-align:left;font-weight:800;color:#1e293b;font-size:.875rem;text-transform:uppercase;letter-spacing:.075em;border-bottom:3px solid #3b82f6}.appointments-page[_ngcontent-%COMP%]   .appointments-table-card[_ngcontent-%COMP%]   .appointments-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .3s ease;background:#fff}.appointments-page[_ngcontent-%COMP%]   .appointments-table-card[_ngcontent-%COMP%]   .appointments-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background:#fafbfc}.appointments-page[_ngcontent-%COMP%]   .appointments-table-card[_ngcontent-%COMP%]   .appointments-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#eff6ff,#dbeafe);transform:scale(1.01)}.appointments-page[_ngcontent-%COMP%]   .appointments-table-card[_ngcontent-%COMP%]   .appointments-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1.25rem 1.5rem;color:#475569;font-weight:600;vertical-align:middle;border-bottom:1px solid #e2e8f0;font-size:.9375rem}.appointments-page[_ngcontent-%COMP%]   .appointments-table-card[_ngcontent-%COMP%]   .appointments-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.appointment-row[_ngcontent-%COMP%]{cursor:pointer}.appointments-page[_ngcontent-%COMP%]   .appointments-table-card[_ngcontent-%COMP%]   .appointments-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.appointment-row[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#eff6ff,#dbeafe);transform:translate(4px);box-shadow:-4px 0 #3b82f6}.appointments-page[_ngcontent-%COMP%]   .appointments-table-card[_ngcontent-%COMP%]   .appointments-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.appointment-row[_ngcontent-%COMP%]:active{transform:translate(2px)}.appointments-page[_ngcontent-%COMP%]   .appointments-table-card[_ngcontent-%COMP%]   .appointments-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .vaccine-info[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;background:#3b82f61a;color:#2563eb;border-radius:12px;font-size:.875rem;font-weight:600}.appointments-page[_ngcontent-%COMP%]   .appointments-table-card[_ngcontent-%COMP%]   .appointments-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{display:inline-block;padding:6px 12px;border-radius:12px;font-size:.8125rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em}.appointments-page[_ngcontent-%COMP%]   .appointments-table-card[_ngcontent-%COMP%]   .appointments-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .status-badge.status-scheduled[_ngcontent-%COMP%]{background:#3b82f61a;color:#2563eb}.appointments-page[_ngcontent-%COMP%]   .appointments-table-card[_ngcontent-%COMP%]   .appointments-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .status-badge.status-completed[_ngcontent-%COMP%]{background:#22c55e1a;color:#16a34a}.appointments-page[_ngcontent-%COMP%]   .appointments-table-card[_ngcontent-%COMP%]   .appointments-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .status-badge.status-missed[_ngcontent-%COMP%]{background:#ef44441a;color:#dc2626}.appointments-page[_ngcontent-%COMP%]   .appointments-table-card[_ngcontent-%COMP%]   .appointments-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .status-badge.status-cancelled[_ngcontent-%COMP%]{background:#6b72801a;color:#6b7280}.appointments-page[_ngcontent-%COMP%]   .appointments-table-card[_ngcontent-%COMP%]   .appointments-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .status-badge.status-rescheduled[_ngcontent-%COMP%]{background:#f59e0b1a;color:#d97706}.appointments-page[_ngcontent-%COMP%]   .appointments-table-card[_ngcontent-%COMP%]   .appointments-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{text-align:center;padding:3rem}.appointments-page[_ngcontent-%COMP%]   .appointments-table-card[_ngcontent-%COMP%]   .appointments-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:3rem;display:block;margin-bottom:.5rem}.appointments-page[_ngcontent-%COMP%]   .appointments-table-card[_ngcontent-%COMP%]   .appointments-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:1rem;margin:0}.appointments-page[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;padding:12px 24px;font-size:.875rem;font-weight:600;border-radius:10px;border:none;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);text-decoration:none;min-width:120px;gap:.5rem;box-sizing:border-box}.appointments-page[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.appointments-page[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#475569;border:2px solid #cbd5e1;box-shadow:0 2px 4px #0000000d}.appointments-page[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#f1f5f9;border-color:#94a3b8;transform:translateY(-1px);box-shadow:0 4px 8px #0000001a}.appointments-page[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.appointments-page[_ngcontent-%COMP%]   .btn.btn-sm[_ngcontent-%COMP%]{padding:8px 16px;font-size:.8125rem;min-width:80px}@keyframes _ngcontent-%COMP%_scaleIn{0%{transform:scale(.9);opacity:0}to{transform:scale(1);opacity:1}}"]})};export{U as VaccinatorAppointmentsComponent};
