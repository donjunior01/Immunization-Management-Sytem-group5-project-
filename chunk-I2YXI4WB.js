import{b as d}from"./chunk-K3XQKY74.js";import{bb as m,db as o,k as r,v as n,z as p}from"./chunk-T4RMSDZY.js";var g=class i{http=p(o);apiUrl=d.apiUrl;getSmsLogs(t){let e=new m;return t?.startDate&&t.startDate.trim()!==""&&(e=e.set("startDate",t.startDate)),t?.endDate&&t.endDate.trim()!==""&&(e=e.set("endDate",t.endDate)),t?.status&&t.status.trim()!==""&&(e=e.set("status",t.status)),t?.recipientPhone&&t.recipientPhone.trim()!==""&&(e=e.set("recipient_phone",t.recipientPhone)),this.http.get(`${this.apiUrl}/sms-logs`,{params:e}).pipe(r(s=>s.map(a=>({id:String(a.id||""),recipientPhone:a.recipientPhone||"",message:a.message||"",status:a.status||"PENDING",sentAt:a.sentAt||"",errorMessage:a.errorMessage||"",appointmentId:a.appointmentId||"",patientId:a.patientId||""}))))}getSmsLogById(t){return this.http.get(`${this.apiUrl}/sms-logs/${t}`)}sendSms(t,e){return this.http.post(`${this.apiUrl}/sms-logs/send`,{phone:t,message:e}).pipe(r(s=>({id:String(s.id||""),recipientPhone:s.recipientPhone||"",message:s.message||"",status:s.status||"PENDING",sentAt:s.sentAt||"",errorMessage:s.errorMessage||"",appointmentId:s.appointmentId||"",patientId:s.patientId||""})))}deleteSmsLog(t){return this.http.delete(`${this.apiUrl}/sms-logs/${t}`)}static \u0275fac=function(e){return new(e||i)};static \u0275prov=n({token:i,factory:i.\u0275fac,providedIn:"root"})};export{g as a};
